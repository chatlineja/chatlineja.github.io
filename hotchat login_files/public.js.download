try{(function(a){a.mixin({contains:a.includes})})(_);

(function(a){a.mixin({findWhere:a.find})})(_);

(function(a){a.firstPristine=a.first;a.mixin({first:function(b){b=a.isObject(b)?a.values(b):b;return a.firstPristine(b)}})})(_);

(function(a){a.mixin({guid:function(b){b=!1===b?!1:!0;return a.guidBlock()+a.guidBlock(b)+a.guidBlock(b)+a.guidBlock()}})})(_);

(function(a){a.mixin({guidBlock:function(a){var b=(Math.random().toString(16)+"000000000").substr(2,8);return a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b}})})(_);

(function(a){a.mixin({object:a.zipObject})})(_);

(function(a){a.mixin({pluck:a.map})})(_);

(function(a){a.mixin({where:a.filter})})(_);

"object"!==typeof window.site&&(site={});site.initialized=!1;site.protocol=window.location.protocol.replace(":","");site.page={};site.widget={};site.v=21;site.current_zoom=null;site.zindex=function(){return Math.max.apply(null,$.map($("body *"),function(a,b){if("static"!=$(a).css("position"))return parseInt($(a).css("z-index"))||1}))};site.hash_function={};site.hash_function.ctc=function(a){var b={profile_id:Number(a[1])};b.profile_id&&site.demand.bundle("site.clicktocall","library/clicktocall",function(){site.clicktocall.connect.initialize(b)})};
site.hashcheck=function(){if(!document.location.hash.length)return!1;for(var a=String(document.location.hash).substring(1).split("|"),b,c=0,d=a.length;c<d;c++)if(b=a[c].split("+"),"function"===typeof site.hash_function[b[0]])site.hash_function[b[0]](b)};
site.initialize=function(a){if(this.initialized)return!1;this.variables=["url"];var b=this.libraries();this.importer(b,_.keys(b));this.importer(a.site);this.business.initialize(a.business);this.theater.initialize(a.theater);this.user.initialize(a.user);this.header.initialize();this.footer.initialize();this.warning.initialize();this.track.initialize();this.form.initialize();_.isObject(this.url)||(this.url={http:"http://www.talktome.com/",https:"https://www.talktome.com/"});this.url.current=this.url[this.protocol];
this.url.page=window.location.protocol+"//"+window.location.host+window.location.pathname;this.is_a_user=a.is_a_user;this.events();return site.initialized=!0};site.callback=function(a,b){return utility.callback(a,b)};site.constrain_norm=function(a,b){var c={};if(_.isEmpty(a)||_.isEmpty(b))return c;for(var d in b)_.isSet(a[d])&&(c[d]=site.normalize(a[d],b[d]));return c};site.normalize=function(a,b){b&&"function"==typeof site.normalize[b]||(b="string");return site.normalize[b](a)};
site.normalize.string=function(a){return"undefined"===typeof a?"":a};site.normalize.bool=function(a){return!!site.normalize.number(a)};site.normalize.int=function(a){return Math.floor(site.normalize.string(a))};site.normalize.number=function(a){return Number(site.normalize.string(a))};
site.data_get=function(a,b){b||(b=!1);return site.user.data&&site.user.data[a]?site.user.data[a]:site.theater.data&&site.theater.data[a]?site.theater.data[a]:site.business.data&&site.business.data[a]?site.business.data[a]:b};site.js_error=function(a,b,c){_.isObject(a)||(a={error:String(a)||"Connection Error (1E100)"});b=a.error||b||"Connection Error (2E100)";site.vars.admin&&(b+="<br/>EC: "+a.code,a=Error().stack.split("\n")[4],b+="<br/>"+a);return site.dialog.alert(b,c)};
site.trigger_active_date=function(){$(".js_active_date").each(function(){var a=parseInt($(this).data("ts"))||0,b="Now",c=null;0!==a&&(b=moment.unix(a).fromNow(),c=moment.unix(a).format("MMM Do YYYY, h:mm:ss a"));$(this).find("span").text(b);$(this).attr("data-html",c)})};
site.events=function(){$("#content").data("profile_id")&&(site.ping.profile_id=$("#content").data("profile_id"));site.trigger_active_date();$("nav > a.hotchat_claim").off("click");$("nav > a.hotchat_claim").on("click",function(){site.module.load("claim_account",null,{})});$("div.hotchat_caller_claim a").off("click");$("div.hotchat_caller_claim a").on("click",function(){site.module.load("claim_account",null,{})});$("select.prefilled").each(function(){$(this).val($(this).data("default")).change()});
$("#hc_profile_search > input").on("keydown",function(a){if(13!=a.which)return!0;a=$("#hc_profile_search > input");site.scrub_field(a,/[^0-9]/gi);return site.goprofile(a.val())?!0:(site.dialog.alert("Enter Full Profile Number"),!1)});$("#hc_profile_search > button.search").on("click",function(a){a=$("#hc_profile_search > input");site.scrub_field(a,/[^0-9]/gi);return site.goprofile(a.val())?!0:(site.dialog.alert("Enter Full Profile Number"),!1)});$(document.body).on("click",function(a){if(!$(a.target).hasClass("dont_close")&&
site.window.bypass.click)return site.window.bypass.click=!1});$(document.body).on("click",".ctc",function(){if(1!=site.vars.callactive){var a=$(this).data("options");if(!site.user.id)return site.utility.cookie.set("abandoned","ctc",1),site.utility.cookie.set("abandoned_id",JSON.stringify(a),1),site.user.login(a);"amw_connect"==$(this).data("id")&&(console.log("is amw_connect"),WalletWidget.hide());site.demand.bundle("site.clicktocall","library/clicktocall",function(){site.clicktocall.connect.initialize(a)})}return!1});
$(document.body).on("click",".play_streaming",function(){var a=$(this).data("options"),b=parseFloat(site.wallet.balance);if(!site.user.id)return site.utility.cookie.set("abandoned_play","play_stream",1),site.utility.cookie.set("abandoned_play_id",JSON.stringify(a),1),site.user.login(a);if(2==site.user.type_id)return alert("You are not allowed to watch videos."),!1;b-=parseFloat(a.rate_price);0>=b?alert("You don't have enough money in your wallet to watch this video."):site.demand.bundle("site.streaming",
"library/streaming",function(){site.streaming.connect.initialize(a)});return!1});$(".file_manager").click(function(){var a=this;window.User_Menu.close();site.demand.bundle("site.file_manager","members/widget/file_manager",function(){site.file_manager.boot($(a).data("options"),$(a).data("callback"))});return!1});$(window.document).on("click",".webchat_connect",function(){return site.load.chat($(this).data("options"))});$(".notes").live("click",function(){var a=$(this).data("options");if(!site.user.id)return site.utility.cookie.set("abandoned",
"notes",1),site.utility.cookie.set("abandoned_id",a.profile_id,1),site.user.login(a);site.demand.bundle("site.note","library/note",function(){site.note.show(a)});return!1});$(".caller_notes").live("click",function(){var a=$(this).data("options");site.demand.bundle("site.caller_notes","members/caller_notes",function(){site.caller_notes.show(a)});return!1});$(".compose_action").live("click",function(a){a=$(a.target);var b=$("#to_address").data("profile-id");if(site.compose.is_mass_message)site.compose.mass_message_send();
else switch(!0){case a.is(".approve"):site.price.approve();break;case a.is(".cancel"):site.price.cancel();break;default:case a.is(".send"):if(!site.compose.validate())return!1;"1"!==_.get(site.vars,"user.type_id")&&site.vars.is_hotchat&&"ALL"==b?site.compose.message():(site.price.reset(),site.price.confirm(a,"left",1005,function(){site.compose.price_submit("message")}))}});$(".texting_compose").live("click",function(){var a=0<$(this).parents("#services_online").length;site.user.id?a&&"1"!=site.user.type_id?
site.dialog.alert({message:"You must be logged in as a Caller to send a "+site.vars.words.text+" Message"}):site.sms_window_request($(this).data()):site.user.login()});$(".message_compose").live("click",function(a){a=$(this).data();return site.user.id?a.is_mass_message?site.compose.show(!1,!1,!0,a.profile_id):compose(this):(site.utility.cookie.set("abandoned","message_compose",1),site.utility.cookie.set("abandoned_id",a.options.profile_id,1),site.user.login(a.options))});$(document.body).on("click",
".action_close_compose",function(){site.compose.hide(!0)});$("#ladybug").on("click",function(){return site.ladybug.initialize()});$(document.body).on("click",".view_toggle span:not(.sel)",function(){site.user.id?site.request("global/ajax/browse_mode/",{mode:$(this).attr("class")}):site.utility.cookie.set("browse_mode",$(this).attr("class"),1);$(".widget_profile").removeClass("split").removeClass("grid").addClass($(this).attr("class"));$(".view_toggle span").removeClass("sel");$(this).addClass("sel");
$(".view_toggle span i").each(function(){$(this).attr("class",$(this).attr("class").replace("_selected",""))});$("i",this).attr("class",$("i",this).attr("class")+"_selected");return!0});$("img.avatar").on("error",function(a){$(this).attr("src",site.url.current+"images/_default_avatar.png")});$(".widget_profile_avatar > img").on("error",function(){$(this).attr("src",site.url.current+"images/_default_avatar.png")});"function"==typeof site.utility.time.live&&site.utility.time.live();site.sso_link_active()};
site.sms_window_request=function(a){site.sms_data=a;site.request("global/ajax/get-balance/",{},site.sms_window_show)};site.sms_window_show=function(a){a.balance&&.01>parseFloat(a.balance)&&2!=site.user.type_id?site.dialog.alert("You must fund your wallet before you can send a "+site.vars.words.text+" Message."):(site.ng.load("caller_sms_window","load",site.sms_data),delete site.sms_data)};
site.talker_trial=function(a){a||(a="your profile can be active on the site.");site.dialog.alert("We require all new talkers to participate in our chat program for "+(site.vars.require_account_activated_account_age||1)+" days and have "+(site.vars.require_account_activated_connection_minutes||1)+" minutes of connection time with callers before "+a)};site.importer=function(a,b){b||(b=this.variables);return this.utility.importer(b,a,this)};
site.libraries=function(){return{business:{},chat:{},clicktocall:{},contacts:{},dialog:{},file:{},footer:{},gallery:{},hash:{},header:{},library:{},members:{},messages:{},note:{},ping:{},player:{},product:{},profile:{},rating:{},theater:{},timer:{},track:{},user:{},utility:{},wallet:{},warning:{},webcam:{},window:{}}};site.is_mobile=function(){return!0};
site.detect_zoom=function(){var a=(window.outerWidth-8)/window.innerWidth;zoomLevel=0;return zoomLevel=.46<=a&&.54>=a?"-4":.64>=a?"-3":.76>=a?"-2":.92>=a?"-1":1.1>=a?"0":1.32>=a?"1":1.58>=a?"2":1.9>=a?"3":2.28>=a?"4":2.7>=a?"5":"6"};
site.adjust_zoom=function(){if(500>window.outerWidth)return $("#header").addClass("zoomed"),!0;var a=site.detect_zoom();if(site.current_zoom&&site.current_zoom===a)return!1;site.current_zoom=a;0<site.current_zoom?$("#header").addClass("zoomed"):$("#header").removeClass("zoomed");return!0};
site.build_state_list=function(a,b,c){var d=a.data()||{};this.countries||_.isEmpty(c)||(this.countries=c);!this.countries&&$("form#javascript textarea[name=countries]").val()&&(this.countries=$.parseJSON($("form#javascript textarea[name=countries]").val()));if(!this.countries||!this.countries[b])return!1;if(!a.is("select")||"undefined"===typeof this.countries)return a.attr("disabled","disabled"),a.html("<option disabled selected>Error Processing Form</option>");if(_.isUndefined(b)||_.isUndefined(this.countries[b]))return a.attr("disabled",
"disabled"),a.html("<option disabled selected>Select your country first.</option>");var e="";switch(b){case "US":e=d.force_select?e+'<option selected value="ZZ"> -- Select your State -- </option>':e+'<option disabled selected value="ZZ"> -- Select your State -- </option>';_.each(this.countries.US.listing,function(a){e+='<option value="'+a.country_state_id+'">'+a.title+"</option>"});break;case "CA":e=d.force_select?e+'<option selected value="ZZ"> -- Select your Provence -- </option>':e+'<option disabled selected value="ZZ"> -- Select your Provence -- </option>';
_.each(this.countries.CA.listing,function(a){e+='<option value="'+a.country_state_id+'">'+a.title+"</option>"});break;default:e+='<option value="NA" selected>Not in US/CA</option>'}a.html(e).val(a.data("state"))};
site.get_ajax=function(a,b,c){if(!a||"string"!==typeof a)return!1;site.vars.auth&&(a=-1===a.indexOf("?")?a+"?":a,a+="&_ah="+site.vars.auth.hash+"&_ts="+site.vars.auth.ts);a=$.get(site.url.current+a);"function"===typeof b&&a.done(function(a,c,f){return b(a,c,f)});"function"===typeof c&&a.fail(function(a,b,f){return c(a,b,f)});return a};
site.request=function(a,b,c,d){if(!a||"string"!==typeof a)return!1;b=site.obj(b,{});site.vars.auth&&(b._ah=site.vars.auth.hash,b._ts=site.vars.auth.ts);a=$.post(site.url.current+a,b);"function"===typeof c&&a.done(function(a,b,d){return c(a,b,d)});"function"===typeof d&&a.fail(function(a,b,c){return d(a,b,c)});return a};site.obj=function(a,b){return _.isObject(a)?a:_.isUndefined(b)?{}:b};
site.form_activate=function(){$("form.active").off("submit.form_active");$("form.active").on("submit.form_active",function(){var a=$(this);site.request(a.attr("action"),a.get_form_data(),function(a){a=site.obj(a,{error:"Unknown Error"});if(a.error)return site.dialog.alert(a.error),!1;window.location=window.location});return!1})};
site.is_profile_title_change_eligible=function(a){if(!a||!site.vars.profile_title_change_eligible||!site.vars.profile_title_change_eligible.length)return!1;for(var b=0,c=site.vars.profile_title_change_eligible.length,d=!1;!d&&c>b;)d=site.vars.profile_title_change_eligible[b]==a,b++;return d};site.markdown={};site.markdown.encode=function(a,b){b=site.callback(b);site.request("ajax/data.php",{action:"markdown_encode",input:a},b);return!1};site.load={};
site.load.chat=function(a){if(!site.user.id)return site.user.login();site.chat.dialog.caller.request.boot(a);return!1};jQuery.fn.extend({get_form_data:function(a){var b={};$(this.serializeArray()).each(function(a,d){b[d.name]?(_.isArray(b[d.name])||(b[d.name]=[b[d.name]]),b[d.name].push(d.value)):b[d.name]=d.value});return b}});
$(document).ready(function(){var a=eval("" + '({"is_a_user":"1","site":{"url":{"http":"https:\/\/www.talktome.com\/","https":"https:\/\/www.hotchat.com\/","prod":"https:\/\/www.hotchat.com\/","webrtc":"webrtc.hotchat.com","xmpp":"xmpp.hotchat.com","xmpp_username_domain":"hotchat.com"}},"business":{"id":"7","title":"Hot Chat","data":{"title":"Hot Chat","gaid":"UA-23153169-3","ga4id":"G-EREKLTNS1D","bing_tracking_id":"5011654","chat_price_per_message":0.25,"phone":"1-800-HOT-CHAT","vchat_number":"800-468-2428","user_password_minlength":"6","user_handle_minlength":"5","user_handle_maxlength":"32","word_talker":"Lady","word_talkers":"Ladies"}},"theater":{"id":9,"title":"HotChat.com","data":{"title":"HotChat.com","gaid":"UA-23153169-3","bing_tracking_id":"5011654","chat_price_per_message":0.25,"phone":"1-800-HOT-CHAT","user_password_minlength":"6","user_handle_minlength":"5","user_handle_maxlength":"32","word_talker":"Lady","word_talkers":"Ladies"}}})' + "");site.initialize(a);site.vars&&(a=site.vars,site.importer(a.site),site.business.importer(a.business),site.theater.importer(a.theater),site.user.importer(a.user));site.is_mobile()&&(site.adjust_zoom(),$(window).on("resize.zoomed",site.adjust_zoom))});
var AMW={launch:function(a,b){"function"==AMW.onSuccess&&(AMW.onSuccess=null);"function"==AMW.onCancel&&(AMW.onCancel=null);"function"==typeof a&&(AMW.onSuccess=a);"function"==typeof b&&(AMW.onCancel=b);if("object"==typeof UI_AddMoney)return UI_AddMoney.show();AMW._loader()},_loader:function(a){$("#window_fade").fadeIn(400);a||$("<link/>",{href:AMW.uri.css,type:"text/css",rel:"stylesheet"}).appendTo("head");$.ajax({url:AMW.uri.html}).done(function(b){$("#window_fade:not(.locked)").fadeOut(200);$("body").append(b);
a||$.getScript(AMW.uri.js,function(){UI_AddMoney.ini();UI_AddMoney.show()})})}};
$(function(){AMW.uri={api:site.url.current+"/AMW.php",html:site.url.current+"/AMW.php?load=html",css:site.url.current+"/AMW.php?load=css",js:site.url.current+"/AMW.php?load=js"};site.display_offer();site.vars.launch_js_modal&&site.vars.launch_js_modal.add_money&&AMW.launch();$(document).ready(function(){site.vars.launch_js_modal&&site.vars.launch_js_modal.add_money_membership&&$('#memberships button.enroll[amount-id="'+parseInt(site.vars.launch_js_modal.add_money_membership)+'"]').click()})});
site.iovation={data:{allow:!0},decline_payment:function(a){var b="There was a problem with your request.<br/><a href='"+(site.url.current+"contact/");a.iovation_id&&(b+="?s=signup HELP-"+a.iovation_id+"'");b+="title='Get in touch with us.'>Contact Us</a>, or call Customer Support at "+a.cs_number+" for assistance.<br/>";a.iovation_id&&(b+="(Error Code: HELP-"+a.iovation_id+")");UI_AddMoney.hide();site.dialog.alert(b)},decline_signup:function(a){var b="There was a problem with your request.<br/><a href='"+
(site.url.current+"contact/");a.iovation_id&&(b+="?s=signup HELP-"+a.iovation_id+"'");b+="title='Get in touch with us.'>Contact Us</a>, or call Customer Support at "+a.cs_number+" for assistance.<br/>";a.iovation_id&&(b+="(Error Code: HELP-"+a.iovation_id+")");site.dialog.alert(b)},get_blackbox:function(){return window.IGLOO.getBlackbox().blackbox},init:function(){site.iovation.loaded||(site.iovation.load_js(site.url.current+"js/20171003135746_config.js"),site.iovation.load_js(site.url.current+"js/20171003135806_loader_static.js"),
site.iovation.loaded=!0)},load_js:function(a){var b=document.createElement("script");b.type="application/javascript";b.src=a;document.body.appendChild(b)},send:function(a,b,c){if(site.vars.iovation){a.blackbox=site.iovation.get_blackbox();site.device.device_risk_id&&(a.device_risk_id=site.device.device_risk_id);if(site.iovation.data&&void 0!=site.iovation.data.allow&&1!=site.iovation.data.allow&&1!=site.iovation.data.allow)return c?c(site.iovation.data):b(site.iovation.data),!1;a=site.request("ajax/iovation/",
a);$.when(a).done(function(a){site.iovation.data=a;a.allow?b(a):c?c(a):b(a)})}else b({status:1,allow:!0})}};
site.wamwm={profile_id:null,confirm:function(a){var b=a.ppm_rate,c=a.chat_rate;b&&(b=parseFloat(b+.2).toFixed(2));c&&(c=parseFloat(c+.2).toFixed(2));var d='<div class="wwm"><p class="click-yes">Click YES below to visit our video on demand site.</p><p>You can talk on the phone, or over web chat, while watching a movie with <span>'+(a.profile_title+"</span>.</p>");d+='<div class="_f">';a.avatar&&(d+='\t<div class="_w"><img src="'+a.avatar+'" /></div>');d+='\t<div class="_p">';b&&(d=d+"\t\t<div>\t\t\t<div>\t\t\t\t<span>Phone + Movie</span>\t\t\t\t<b>$"+
(b+"</b>\t\t\t\t<small>Per Minute</small>"),site.vars.wamwm_offer.first_5_min_free&&(d+='\t\t\t\t<strong><i class="fa fa-fw fa-star"></i>First 5 Minutes Free!<i class="fa fa-fw fa-star"></i></strong>'),d+="\t\t\t</div>\t\t</div>");c&&(d=d+"\t\t<div>\t\t\t<div>\t\t\t\t<span>Web Chat + Movie</span>\t\t\t\t<b>$"+(c+"</b>\t\t\t\t<small>Per Minute</small>"),d+="\t\t\t</div>",d+="\t\t</div>");d+="\t</div>";d+="</div>";d+="<p><em>You pick the movie as well as control the play, pause and rewind features. I will see exactly what you see in real time.</em></p>";
d+='<small class="warning"><i class="fa fa-fw fa-exclamation-triangle"></i> You must be on a computer to use this feature.</small>';d+="</div>";site.wamwm.profile_id=a.profile_id;site.dialog.confirm({title:'<i class="fa fa-fw fa-film" style="font-size:16px; margin-left:-2.25em; padding-right:2em;"></i> Watch with Me',message:d,skip_icon:!0,classes:"wwm dialog-orange"},site.wamwm.launch)},launch:function(a){a&&site.request("global/ajax/wamwm_hm_url/",{profile_id:site.wamwm.profile_id},function(a){a.url?
window.location=a.url:site.dialog.alert(a.error)})}};site.device={init:function(a){site.device.callback=a;site.device.script=document.createElement("script");a&&(site.device.script.onload=function(){a()});var b=1*(new Date).getTime();site.device.script.src=site.url.current+"js/device_id.js?v="+b;document.head.appendChild(site.device.script)}};
site.display_offer=function(){var a=$("div.offer_input_label").data("blob");if(!a||!a.code)return!1;if(!site.vars.user||a.amount)$("#offer_input").hide(),$("div.offer_input_label").html('<span style="padding: 5px;">Offer Code:</span><span style="money" style="padding: 5px;"><strong style="padding:5px;color:white;">'+a.code+"</strong>$"+a.amount+'</span><span style="padding: 5px;">'+a.description+"</span>").show();return!0};
site.sso_link_active=function(){$("li.js-sso, a.js-sso").off("click touchend");$("li.js-sso, a.js-sso").on("click touchend",function(a){if($(a.target).is(".sso_link")||$(a.target).is("input"))return!0;var b=$(a.target).is(".js-sso")?$(a.target).data():$(a.target).parents(".js-sso").data();a.preventDefault();return site.sso_link(b)})};
site.sso_link=function(a){a=a||{};a.preventDefault?(site.debug("preventDefault b",a),a.preventDefault(),a=$(this).data()):site.debug("sso_link data",a);var b=_.defaults(a,{host:"",tid:""});if(!b.tid&&!b.host)return!1;b.action="redirect";!b.url&&b.profile_id&&(b.url="/p/"+b.profile_id);!b.message&&b.profile_id&&(b.message="profile_moved");if(b.message)return site.request("ajax/sso.php",b,function(a){if(!a.success||!a.link)return!1;var d=b.host?b.host:"tlremote_"+b.tid,c=function(b){!1!==b&&window.open(a.link,
d)};return a.message?site.dialog.alert(a.message,c):c()}),!0;a=site.url.current+"ajax/sso/?redirect=1";site.vars.auth&&(b._ah=site.vars.auth.hash,b._ts=site.vars.auth.ts);a+="&"+$.param(b);window.open(a,"_blank")};
var FlashDetect=new function(){var a=this;a.installed=!1;a.raw="";a.major=-1;a.minor=-1;a.revision=-1;a.revisionStr="";var b=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(a){return c(a)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(a){var b="6,0,21";try{a.AllowScriptAccess="always",b=c(a)}catch(f){}return b}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(a){return c(a)}}],c=function(a){var b=-1;try{b=a.GetVariable("$version")}catch(f){}return b};a.majorAtLeast=function(b){return a.major>=
b};a.minorAtLeast=function(b){return a.minor>=b};a.revisionAtLeast=function(b){return a.revision>=b};a.versionAtLeast=function(b){var d=[a.major,a.minor,a.revision],c=Math.min(d.length,arguments.length);for(i=0;i<c;i++)if(d[i]>=arguments[i]){if(!(i+1<c&&d[i]==arguments[i]))return!0}else return!1};a.FlashDetect=function(){if(navigator.plugins&&0<navigator.plugins.length){var d=navigator.mimeTypes;if(d&&d["application/x-shockwave-flash"]&&d["application/x-shockwave-flash"].enabledPlugin&&d["application/x-shockwave-flash"].enabledPlugin.description){var c=
d=d["application/x-shockwave-flash"].enabledPlugin.description;d=c.split(/ +/);var f=d[2].split(/\./);d=d[3];var h=parseInt(f[0],10);var k=parseInt(f[1],10);var g=d;var l=parseInt(d.replace(/[a-zA-Z]/g,""),10)||a.revision;a.raw=c;a.major=h;a.minor=k;a.revisionStr=g;a.revision=l;a.installed=!0}}else if(-1==navigator.appVersion.indexOf("Mac")&&window.execScript)for(d=-1,f=0;f<b.length&&-1==d;f++){c=-1;try{c=new ActiveXObject(b[f].name)}catch(m){c={activeXError:!0}}c.activeXError||(a.installed=!0,d=
b[f].version(c),-1!=d&&(c=d,g=c.split(","),h=parseInt(g[0].split(" ")[1],10),k=parseInt(g[1],10),l=parseInt(g[2],10),g=g[2],a.raw=c,a.major=h,a.minor=k,a.revision=l,a.revisionStr=g))}}()};FlashDetect.JS_RELEASE="1.0.4";(function(){})();
site.debug=function(){if(console&&console.log&&site.vars.debug){var a=site.vars.sbuser?site.vars.sbuser:"tldebug";switch(arguments.length){case 1:console.log(a,arguments[0]);break;case 2:console.log(a,arguments[0],arguments[1]);break;case 3:console.log(a,arguments[0],arguments[1],arguments[2]);break;case 4:console.log(a,arguments[0],arguments[1],arguments[2],arguments[3]);break;default:for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c]);console.log(a,JSON.parse(JSON.stringify(b)))}return!0}};
site.parse_json=function(a){if("string"==typeof a&&!/^[\[|\{](\s|.*|\w)*[\]|\}]$/.test(a))return a;try{a=JSON.parse(a)}catch(b){return site.debug("INVALID JSON",a),!1}return a};site.ls={};
site.ls.clear=function(a){try{if("undefined"===typeof window.localStorage)return!1}catch(f){return!1}a=a||["debug"];for(var b={},c=0;c<a.length;c++){var d=a[c];"undefined"!=typeof window.localStorage[d]&&(b[d]=window.localStorage[d])}window.localStorage.clear();if(!b)return!0;for(var e in b)window.localStorage.setItem(e,b[e]);return!0};site.ls.save=function(a,b){try{if("undefined"===typeof window.localStorage)return!1}catch(c){return!1}window.localStorage.setItem(a,b);return!0};
site.ls.save.number=function(a,b){return site.ls.save(a,Number(b)||0)};site.ls.save.object=function(a,b){return site.ls.save(a,JSON.stringify(b))};site.ls.remove=function(a){if("undefined"===typeof window.localStorage)return!1;window.localStorage.removeItem(a);return!0};site.ls.load=function(a){try{if("undefined"===typeof window.localStorage)return!1}catch(b){return!1}return window.localStorage.getItem(a)||""};site.ls.load.number=function(a){return Number(site.ls.load(a))||0};
site.ls.load.object=function(a){return site.parse_json(site.ls.load(a))||{}};site.ls.load.data=function(a,b){return site.ls.load.object(a)[b]||""};
var JSTimer={data:{},start:function(){return!$("span.js-timer").length||JSTimer.data.interval?!1:JSTimer.data.interval=setInterval(JSTimer.update,1E3)},stop:function(){if(!JSTimer.data.interval)return!1;clearInterval(JSTimer.data.interval);JSTimer.data.interval=null;return!0},update:function(){if(!$("span.js-timer").length||!JSTimer.data.interval)return JSTimer.stop();$("span.js-timer").each(function(a,b){a=Number($(b).html())+1;return Number.isNaN(a)?!1:$(b).html(a)});return!0}},InitObject={fridge:{on_pageload:{queue:[]},
on_quickview:{queue:[],preserve:!0},on_resize:{function:"on_resize",queue:[],preserve:!0}},hook_string:function(a,b,c,d){var e=_.get(window,a+"."+b);if("function"!==typeof e)return site.debug({msg:"InitObject.hook_string -> Invalid Hook",obj:a,method:b,data:c,callback:d}),!1;c=c||{};d=site.callback(d);e(c,d);return!0},hook:function(a,b,c,d){if(!a||!b||"function"!==typeof a[b])return site.debug({msg:"InitObject.hook -> Invalid Hook",obj:a,method:b,data:c,callback:d}),!1;c=c||{};return a[b](c,d)},consume:function(a,
b,c,d){c=InitObject.hook(a,b,c,d);a[b]=null;return c},consume_queue:function(a){var b=_.get(this,"fridge."+a,{}),c=_.get(b,"function","bin");_.get(b,"queue",[]).forEach(function(a){a=_.get(window,a+"."+c,null);return"function"!==typeof a?!1:a()});_.get(b,"preserve")||(this.fridge[a].queue=[]);return!0},delay:function(a,b){_.isArray(_.get(this,"fridge."+b+".queue"))||(b="on_pageload");if(-1!=this.fridge[b].queue.indexOf(a))return!1;this.fridge[b].queue.push(a);return!0},queue:function(a,b){return this.delay(a,
"on_pageload")}};$(document).ready(function(){InitObject.consume_queue("on_pageload")});
var business={initialize:function(a){if(this.initialized)return!1;this.variables=["id","title","data"];this.importer(a);return this.initialized=!0},importer:function(a,b){b||(b=this.variables);return site.utility.importer(b,a,this)}};site.business=business;

var theater={initialize:function(a){if(this.initialized)return!1;this.variables=["id","title","data"];this.importer(a);return this.initialized=!0},importer:function(a,b){b||(b=this.variables);return site.utility.importer(b,a,this)}};site.theater=theater;

window.Q=angular.injector(["ng"]).get("$q");var utility={log:function(){if("sandbox"!==_.get(site,"vars.environment"))return!1;console.log.apply(null,arguments)}};utility.log.info=utility.log.bind(null,"[info]");utility.log.warn=utility.log.bind(null,"[warn]");utility.log.error=utility.log.bind(null,"[error]");utility.log.debug=utility.log.bind(null,"[debug]");utility.log.trace=utility.log.bind(null,"trace");utility.callback=function(a,b){return"function"===typeof a?a:"function"===typeof b?b:function(){}};
utility.importer=function(a,b,c,d){d=site.callback(d);if(!b)return d(!1);for(var f in a){var e=a[f];b[e]&&(c[e]?$.extend(c[e],b[e]):c[e]=b[e])}return d(c)};utility.is_number=function(a){return!isNaN(parseFloat(a))&&isFinite(a)};utility.get_number=function(a){return utility.is_number(a)?Number(a):0};utility.is_string=function(a){return utility.is_number(a)||"string"===typeof a};utility.get_string=function(a){return utility.is_string(a)?String(a):""};
utility.zindex=function(){var a=0;$("body > *").each(function(){var b=parseInt($(this).css("zIndex"))||0;b>a&&(a=b)});return a};utility.cookie={};utility.cookie.remove=function(a){utility.cookie.set(a,"",-1)};utility.cookie.get=function(a){for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c],f=d.substr(0,d.indexOf("="));f=f.replace(/^\s+|\s+$/g,"");d=d.substr(d.indexOf("=")+1);if(site.vars.cookie_prefix+a===f)return unescape(d)}return!1};
utility.cookie.set=function(a,b,c,d,f){d=_.isUndefined(d)?site.vars.cookie_domain:d;f=_.isUndefined(f)?"/":f;if(-1==c)var e=new Date(0);else e=new Date,e.setDate(e.getDate()+c);b=escape(b)+(null==c?"":"; expires="+e.toUTCString())+"; path="+f+"; domain=."+d;document.cookie=site.vars.cookie_prefix+a+"="+b;return!0};utility.json={};
utility.json.get=function(a,b){if($("#javascript textarea[name="+a+"]").length)return!1;site.request("ajax/data.php",{action:a},function(c){$("#javascript").append('<textarea style="display:none" name="'+a+'">'+JSON.stringify(c[a])+"</textarea>");b(c)});return!0};utility.html={};utility.html.encode=function(a){return $("<div/>").text(a).html()};utility.html.decode=function(a){return $("<div/>").html(a).text()};
utility.hide_you_earn=function(a){return 1==site.vars.feature_hide_you_earn?a?' class="hide"':" hide":""};utility.date_parse=function(a){var b=new Date;a=String(a).split(/[- :]/);b.setFullYear(a[0]);b.setMonth(a[1]-1);b.setDate(a[2]);b.setHours(a[3]);b.setMinutes(a[4]);b.setSeconds(a[5]);b.setMilliseconds(0);return b};
utility.datetime_to_datetime_seconds=function(a,b){a=utility.date_parse(a);b?b=utility.date_parse(b):(b=new Date,b=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds()));return Math.floor((b-a)/1E3)};utility.random_int=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};
utility.str_pad=function(a){"object"!==typeof a&&(a={value:String(a)});a=$.extend({direction:"left",shim:"0",min_length:2},a);for(var b="",c=0,d=a.min_length-a.value.length;c<d;c++)b+=a.shim;b.length&&(a.value="left"===a.direction?b+a.value:a.value+b);return a.value};utility.time={display_types:["prettyElapsed","usDate","usDateTime"]};utility.time.switch_display_type=function(a,b){"undefined"===typeof b&&(b=this.display_types);var c=(b.indexOf($(a).data("type"))+1)%b.length;$(a).data("type",b[c])};
utility.time.live=function(){$("time.active").each(function(a,b){$(b).data("active")||($(b).data("active",!0),"undefined"===typeof $(b).data("orig")&&(a=$(b).text(),$(b).data("orig",a).attr("title",a)),"undefined"===typeof $(b).data("type")&&$(b).data("type","prettyElapsed"),"undefined"===typeof $(b).data("toggle")&&$(b).data("toggle",!1),$(b).click(function(){if(!$(this).data("toggle"))return!1;utility.time.switch_display_type(this);utility.time.display(this)}),utility.time.display(b))})};
utility.time.update=function(){$("time.active").each(function(a,b){utility.time.display(b)})};utility.time.display=function(a){var b=$(a).data("orig");switch($(a).data("type")){case "usDateTime":$(a).text(moment(b,"YYYY-MM-DD hh:mm:ss").format("LLL"));break;case "usDate":$(a).text(moment(b,"YYYY-MM-DD hh:mm:ss").format("LL"));break;default:$(a).text(moment(b,"YYYY-MM-DD hh:mm:ss").fromNow())}};utility.format={};
utility.format.time=function(a){a=Math.floor(a)||0;return(3600<=a?[utility.str_pad(Math.floor(a/3600))]:[]).concat([utility.str_pad(Math.floor(a/60)%60),utility.str_pad(Math.floor(a)%60)]).join(":")};utility.format.phone=function(a,b){a=String(a);use_filter_array=["US","CA","MX"];use_filter=use_filter_array.indexOf(b);4!==a.length&&-1<use_filter&&(a="("+a.substring(0,3)+") "+a.substring(3,6)+"-"+a.substring(6));return a};
utility.format.money=function(a){"object"!==typeof a&&(a={value:a});"string"===typeof a.value&&(a.value=parseFloat(a.value));a=$.extend({precision:2,decimal:".",seperator:","},a);return"undefined"!==typeof a.value&&!isNaN(a.value)&&a.value.formatMoney(a.precision,a.decimal,a.seperator)};site.utility=utility;

site.window={focussed:!0};site.window.bypass={click:!1,fade:!1};site.window.fade={visible:0};site.window.fade.show=function(a,b,c){b=site.callback(b);this.visible++;c?$("#window_fade").css("backgroundImage","none"):$("#window_fade").css("backgroundImage","url("+site.url.current+"images/icon_64_preloader_white.gif) no-repeat center center");$("#window_fade").click(a).fadeIn(250,b)};
site.window.fade.hide=function(a){this.visible--;if(0<this.visible)return!1;this.visible=0;a=site.callback(a);$("#window_fade").fadeOut(250,a)};site.window.preloader={};site.window.preloader.show=function(){$("#window_fade").addClass("preloader")};site.window.preloader.hide=function(){$("#window_fade").removeClass("preloader")};

var user={v:9,initialize:function(a){if(this.initialized)return!1;this.variables=["id","type_id","title","data"];this.importer(a);return this.initialized=!0},importer:function(a,b){b||(b=this.variables);return site.utility.importer(b,a,this)},login:function(a){return site.user.login.show(a)}};
user.login.show=function(a){a=a||{};a.action=a.action||"";a.profile_id=a.profile_id||0;a.showfade=a.showfade||"show";"show"==a.showfade&&site.window.fade.show();$("#login_window").center();$("#login_window").fadeIn(function(){$.getScript("https://www.google.com/recaptcha/api.js?render=6LcRTXsUAAAAAMFZDz9zX9vvE0P6Y_If8hGQwI9X",function(a,c,d){grecaptcha.ready(function(){grecaptcha.execute("6LcRTXsUAAAAAMFZDz9zX9vvE0P6Y_If8hGQwI9X",{action:"default_login_modal"}).then(function(a){document.getElementById("login-form-captcha-token").value=
a})})});$("#login_window input[type=text]").eq(0).focus();$("#login_window input[name=action]").val(a.action);a.profile_id&&($("#profile_info").show(),$("#profile_info span").text("#"+a.profile_id))});return!1};user.login.hide=function(){site.window.fade.hide();$("#login_window").hide();$("#profile_info").hide();$("#window_fade.open_window_fade").fadeOut().removeClass("open_window_fade");return!1};site.user=user;site.user.logout={elapsed_seconds_before_displaying_dialog:900,version:2};
site.user.logout.cookieGet=function(){return _.parseInt(site.utility.cookie.get("user_profile_date_active"))};
site.user.logout.dialog=function(){if(site.user.logout.dialog.visible)return!1;site.utility.log("site.user.logout.dialog");site.user.logout.dialog.countdown.cookie=site.user.logout.cookieGet();site.user.logout.dialog.countdown.current=site.user.logout.dialog.countdown.start;site.utility.cookie.remove("user_logout_request");site.user.logout.dialog.instance=site.user.logout.dialog.render(site.user.logout.dialog.callback);site.user.logout.dialog.countdown.timeout=setInterval(site.user.logout.dialog.countdown.fn,
site.user.logout.dialog.countdown.interval)};
site.user.logout.dialog.callback=function(a){site.utility.log("site.user.logout.dialog.callback","confirmed =",a);site.user.logout.dialog.visible=!1;!1!==a?(clearInterval(site.user.logout.dialog.countdown.timeout),clearTimeout(site.user.logout.dialog.countdown.timeout),site.request("ajax/user-session-extend/",{},function(){site.user.logout.dialog.countdown.timeout=setTimeout(site.user.logout.init,1E3)})):($("#user_logout_dialog .icon_24_close_white").hide(),site.user.logout.request())};
site.user.logout.dialog.countdown={cookie:null,current:60,interval:1E3,start:60,timeout:null};
site.user.logout.dialog.countdown.fn=function(){site.utility.log("site.user.logout.dialog.countdown.fn");if(site.user.logout.dialog.countdown.cookie!=site.user.logout.cookieGet())site.user.logout.dialog.instance.destroy(),site.user.logout.dialog.visible=!1,clearInterval(site.user.logout.dialog.countdown.timeout),site.user.logout.timer.fn();else{if(site.utility.cookie.get("user_logout_request"))return site.user.logout.request();site.user.logout.dialog.countdown.current--;if(1>site.user.logout.dialog.countdown.current)return site.user.logout.request();
$("#user_logout_dialog #countdown").html(site.user.logout.dialog.countdown.current)}};site.user.logout.dialog.render=function(a){site.utility.log("site.user.logout.dialog.render");site.user.logout.dialog.visible=!0;return site.dialog.confirm({id:"user_logout_dialog",classes:"dialog-red",message:'You will be logged out in <strong id="countdown">'+site.user.logout.dialog.countdown.current+"</strong> seconds. Do you want to stay logged in?",title:"Your session is about to expire!",theme:"red"},a)};
site.user.logout.dialog.visible=!1;site.user.logout.init=function(){site.utility.log("site.user.logout.init");if("/admin/"===window.location.pathname.substr(0,7))return!1;site.user.logout.timer.fn()};
site.user.logout.request=function(){site.utility.log("site.user.logout.request");alert("You're being logged out...");site.user.logout.dialog.instance.destroy();site.user.logout.dialog.visible=!1;clearInterval(site.user.logout.dialog.countdown.timeout);if(site.utility.cookie.get("user_logout_request"))return site.logout.go();site.utility.cookie.set("user_logout_request","1",1);return site.logout.go()};site.user.logout.timer={};
site.user.logout.timer.fn=function(){clearTimeout(site.user.logout.timer.timeout);var a=(new Date(site.user.logout.cookieGet())).getTime();if(!a||0>a||_.isNaN(a))return site.user.logout.timer.timeout=setTimeout(site.user.logout.timer.fn,2E3),!1;a=site.user.logout.elapsed_seconds_before_displaying_dialog-(Math.ceil((new Date).getTime()/1E3)-site.user.logout.cookieGet());a=1>a?0:a;site.utility.log("site.user.logout.timer.fn","seconds_until_next_run =",a);if(1>a)return site.user.logout.dialog();site.user.logout.timer.timeout=
setTimeout(site.user.logout.timer.fn,1E3*a)};site.user.logout.timer.timeout=null;$(document).ready(function(){if(site.user.id&&site.vars.feature_user_logout_dialog)var a=setInterval(function(){_.isFunction(_.get(site,"dialog.confirm"))&&(clearInterval(a),setTimeout(site.user.logout.init,3E4))},500)});site.user.extend={elapsed_seconds_before_request:1200,version:1};site.user.extend.cookieGet=function(){return _.parseInt(site.utility.cookie.get("user_profile_date_active"))};
site.user.extend.init=function(){site.utility.log("site.user.extend.init");site.user.extend.elapsed_seconds_before_request=site.vars.user_extend_session_seconds||site.user.extend.elapsed_seconds_before_request;site.user.extend.elapsed_seconds_before_request=_.isNaN(site.user.extend.elapsed_seconds_before_request)||60>site.user.extend.elapsed_seconds_before_request?1200:site.user.extend.elapsed_seconds_before_request;if(!site.user.id)return"user_missing";if("/admin/"===window.location.pathname.substr(0,
7))return"admin_disabled";site.user.extend.timer.fn()};site.user.extend.request=function(){site.utility.log("site.user.extend.request");if(site.utility.cookie.get("user_extend_request"))return!1;site.utility.cookie.set("user_extend_request","1",1);site.request("ajax/user-session-extend/",{},function(){setTimeout(site.user.extend.init,5E3)})};site.user.extend.timer={};
site.user.extend.timer.fn=function(){clearTimeout(site.user.extend.timer.timeout);var a=(new Date(site.user.extend.cookieGet())).getTime();if(!a||0>a||_.isNaN(a))return site.user.extend.timer.timeout=setTimeout(site.user.extend.timer.fn,2E3),!1;a=site.user.extend.elapsed_seconds_before_request-(Math.ceil((new Date).getTime()/1E3)-site.user.extend.cookieGet());a=1>a?0:a;site.utility.log("site.user.extend.timer.fn","seconds_until_next_run =",a);if(1>a)return site.user.extend.request();site.user.extend.timer.timeout=
setTimeout(site.user.extend.timer.fn,1E3*a)};site.user.extend.timer.timeout=null;$(document).ready(function(){if(site.user.id&&site.vars.feature_user_extend_session)var a=setInterval(function(){_.isFunction(_.get(site,"request"))&&(clearInterval(a),setTimeout(site.user.extend.init,5E3))},500)});$(function(){site.vars&&site.vars.user&&site.user.importer(site.vars.user);site.user.logout.cookieDomain="."+site.vars.cookie_domain});

var animations={fly:function(d,a,b){var e=d.offset();a=a.offset();b=site.callback(b);var c=$(d).clone(!0,!0).appendTo("body");c.css({left:e.left,position:"absolute",top:e.top,zIndex:999999});c.animate({left:a.left+"px",top:a.top+"px",opacity:0},1E3,function(){c.remove();b(!0)})}};site.animations=animations;

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(d){var c=0;return function(){return c<d.length?{done:!1,value:d[c++]}:{done:!0}}};$jscomp.arrayIterator=function(d){return{next:$jscomp.arrayIteratorImpl(d)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,c,e){if(d==Array.prototype||d==Object.prototype)return d;d[c]=e.value;return d};$jscomp.getGlobal=function(d){d=["object"==typeof globalThis&&globalThis,d,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<d.length;++c){var e=d[c];if(e&&e.Math==Math)return e}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(d,c){var e=$jscomp.propertyToPolyfillSymbol[c];if(null==e)return d[c];e=d[e];return void 0!==e?e:d[c]};
$jscomp.polyfill=function(d,c,e,f){c&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(d,c,e,f):$jscomp.polyfillUnisolated(d,c,e,f))};$jscomp.polyfillUnisolated=function(d,c,e,f){e=$jscomp.global;d=d.split(".");for(f=0;f<d.length-1;f++){var g=d[f];g in e||(e[g]={});e=e[g]}d=d[d.length-1];f=e[d];c=c(f);c!=f&&null!=c&&$jscomp.defineProperty(e,d,{configurable:!0,writable:!0,value:c})};
$jscomp.polyfillIsolated=function(d,c,e,f){var g=d.split(".");d=1===g.length;f=g[0];f=!d&&f in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var a=0;a<g.length-1;a++){var b=g[a];b in f||(f[b]={});f=f[b]}g=g[g.length-1];e=$jscomp.IS_SYMBOL_NATIVE&&"es6"===e?f[g]:null;c=c(e);null!=c&&(d?$jscomp.defineProperty($jscomp.polyfills,g,{configurable:!0,writable:!0,value:c}):c!==e&&($jscomp.propertyToPolyfillSymbol[g]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(g):$jscomp.POLYFILL_PREFIX+g,g=$jscomp.propertyToPolyfillSymbol[g],
$jscomp.defineProperty(f,g,{configurable:!0,writable:!0,value:c})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(d){if(d)return d;var c=function(d,a){this.$jscomp$symbol$id_=d;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:a})};c.prototype.toString=function(){return this.$jscomp$symbol$id_};var e=0,f=function(d){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new c("jscomp_symbol_"+(d||"")+"_"+e++,d)};return f},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(d){if(d)return d;d=Symbol("Symbol.iterator");for(var c="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),e=0;e<c.length;e++){var f=$jscomp.global[c[e]];"function"===typeof f&&"function"!=typeof f.prototype[d]&&$jscomp.defineProperty(f.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return d},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(d){d={next:d};d[Symbol.iterator]=function(){return this};return d};$jscomp.iteratorFromArray=function(d,c){d instanceof String&&(d+="");var e=0,f={next:function(){if(e<d.length){var g=e++;return{value:c(g,d[g]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill("Array.prototype.keys",function(d){return d?d:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6","es3");$jscomp.findInternal=function(d,c,e){d instanceof String&&(d=String(d));for(var f=d.length,g=0;g<f;g++){var a=d[g];if(c.call(e,a,g,d))return{i:g,v:a}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(d){return d?d:function(d,e){return $jscomp.findInternal(this,d,e).v}},"es6","es3");
(function(d,c,e,f,g){var a={cache_get_profile:function(b,h){b=d.get(a.data.cache,"chat["+b+"]");var c={};if(!b)return c;var k=e.user.id!=b.chat_profile_profile_user_id?"other_":"";h&&(k=k?"":"other_");c.avatar_https=b[k+"chat_profile_profile_avatar_https"]||e.url.current+"images/_default_avatar.png";c.profile_id=b[k+"chat_profile_profile_id"];c.title=b[k+"chat_profile_profile_title"];c.headline=b[k+"chat_profile_headline"];c.rating=b[k+"chat_profile_rating"];c.rating_count=b[k+"chat_profile_rating_count"];
c.price_chat=b[k+"chat_rate_chat_price"];"undefined"==typeof c.price_chat&&(c.price_chat=d.get(d.where(d.get(g,"$_CACHE_INPUT.rates"),{rate_type_id:17}),"[0].price_caller"));e.chat.assistant&&e.chat.use_assistant&&(c.avatar_https=e.chat.assistant.avatar_https||e.url.current+"images/_default_avatar.png",c.profile_id=e.chat.assistant.profile_id,c.title=e.chat.assistant.title,c.headline=e.chat.assistant.headline,c.rating=e.chat.assistant.rating_average,c.rating_count=e.chat.assistant.rating_count,c.price_chat=
e.chat.assistant.rate_chat_price,c.url_https=e.url.https+e.chat.assistant.url_https);return c},data:{audio:{ding:"ria/webchat.mp3"},cache:{caller_request:{},chat:{},chat_browser_tab_id:null,chat_message:{}},chat_price_per_message:.5,talker_request_countdown_seconds:45,idle_timeout:6E4},dialog:{}};a.dialog.caller={};a.dialog.caller.request={};a.dialog.caller.request.boot=function(b){if(!e.user.id)return e.user.login();a.dialog.caller.request.render(b);a.dialog.caller.request.show(b)};a.dialog.caller.request.cancel=
function(b,c){if(d.get(a.data.cache,"caller_request["+b+"].chat_id"))return e.request("ajax/chat/",{action:"cancel",chat_id:d.get(a.data.cache,"caller_request["+b+"].chat_id")}),c?void 0:a.dialog.caller.request.hide(null,!0)};a.dialog.caller.request.hide=function(b,h){d.get(g,"ServiceWindow.chat.enabled")&&ServiceWindow.chat.hide();c(".modal_window").is(":visible")||e.window.fade.hide();!h&&d.get(e,"chat.dialog.caller.request.data.profile.profile_id")&&a.dialog.caller.request.cancel(d.get(e,"chat.dialog.caller.request.data.profile.profile_id"),
!0);if(c(".chat-dialog-caller-request").length)return c(".chat-dialog-caller-request").hide("drop",{direction:"down"},function(){c(this).remove();d.isFunction(b)?b():void 0});d.isFunction(b)?b():void 0};a.dialog.caller.request.html=function(a){return'\t\t\t<section class="chat-dialog-caller-request">\t\t\t\t<div class="chat-dialog-caller-request-step0">\t\t\t\t\t<h1>Loading, Please Wait...<i class="fas fa-times" data-html="Cancel this Chat" data-top-nudge="-5" onclick="site.chat.dialog.caller.request.hide()"></i></h1>\t\t\t\t\t<img class="loading" src="'+
e.url.current+'images/loading.gif" />\t\t\t\t</div>\t\t\t\t<div class="chat-dialog-caller-request-step1">\t\t\t\t\t<h1>You\'re about to start a Web Chat!<i class="fas fa-times" data-html="Cancel this Chat" data-top-nudge="-5" onclick="site.chat.dialog.caller.request.hide()"></i></h1>\t\t\t\t\t<img class="avatar" src="'+a.img+'" />\t\t\t\t\t<div>\t\t\t\t\t\t<h2>'+unescape(a.title)+'</h2>\t\t\t\t\t\t<small>Please don\'t disclose any personal information for your own safety purposes. We will never ask you for your password or credit card information!</small>\t\t\t\t\t\t<div id="chat-dialog-caller-request-rates"></div>\t\t\t\t\t\t<button class="button1" onclick="return site.chat.dialog.caller.request.hide()">Cancel</button>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t\t<div class="chat-dialog-caller-request-step2 hide">\t\t\t\t\t<h1>Please wait, while we start your Chat!<i class="fas fa-times" data-html="Cancel this Chat" data-top-nudge="-5" onclick="site.chat.dialog.caller.request.cancel('+
a.profile_id+')"></i></h1>\t\t\t\t\t<img class="avatar" src="'+a.img+'" />\t\t\t\t\t<div>\t\t\t\t\t\t<h2>'+unescape(a.title)+'</h2>\t\t\t\t\t\t<img class="loading" src="'+e.url.current+'images/loading.gif" />\t\t\t\t\t\t<button class="button1" onclick="return site.chat.dialog.caller.request.cancel('+a.profile_id+')">Cancel Chat</button>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</section>'};a.dialog.caller.request.html.rates=function(a){var b="";d.each(d.get(a,"profile_rate.listing"),function(c){c.price_caller&&
(b+='<button class="button3" onclick="return site.chat.dialog.caller.request.start('+d.get(a,"profile.profile_id")+", "+c.profile_rate_id+')">'+(17==c.rate_type_id?"Chat with Me for $"+f.format.money(c.price_caller)+"/min":"Up to "+c.minutes+" minutes for $"+f.format.money(c.price_caller))+"</button><br />")});return b};a.dialog.caller.request.render=function(b){return c(".chat-dialog-caller-request").length?!1:c("body").prepend(a.dialog.caller.request.html(b))};a.dialog.caller.request.show=function(b){c("#window_fade").fadeIn();
c(".chat-dialog-caller-request .chat-dialog-caller-request-step1, .chat-dialog-caller-request .chat-dialog-caller-request-step2").hide();c(".chat-dialog-caller-request .chat-dialog-caller-request-step0").show();c(".chat-dialog-caller-request").show("drop",{direction:"down"});e.request("ajax/chat/",{action:"init",target_profile_id:d.get(b,"profile_id")},function(b){if(!1===d.get(b,"success")||d.get(b,"error"))return b=d.get(b,"error")||"An unknown error has occurred.",e.chat.dialog.caller.request.hide(),
e.dialog.alert(b),!1;a.dialog.caller.request.data=d.get(b,"data");c(".modal_window").is(":visible")||g.RESPONSIVE?a.dialog.caller.request.show.dialog():browse.t_modal_launch(d.get(a,"dialog.caller.request.data.profile.profile_id"),d.get(a,"dialog.caller.request.data.profile.title_rewrite"),a.dialog.caller.request.show.dialog)})};a.dialog.caller.request.show.dialog=function(){c(".chat-dialog-caller-request-step1 > div > span > span").html(f.format.money(d.get(a,"dialog.caller.request.data.profile_rate.profile_price")||
0));c(".chat-dialog-caller-request-step1 #chat-dialog-caller-request-rates").html(a.dialog.caller.request.html.rates(a.dialog.caller.request.data));c(".chat-dialog-caller-request .chat-dialog-caller-request-step0, .chat-dialog-caller-request .chat-dialog-caller-request-step2").hide();c(".chat-dialog-caller-request .chat-dialog-caller-request-step1").show()};a.dialog.caller.request.start=function(b,h){d.set(a.data.cache,"caller_request["+b+"]",null);c(".chat-dialog-caller-request .chat-dialog-caller-request-step1").hide();
c(".chat-dialog-caller-request .chat-dialog-caller-request-step2").show();e.sock.request("chat/request",{profile_rate_id:h||d.get(a,"dialog.caller.request.data.profile_rate.profile_rate_id"),target_profile_id:b}).then(function(c){var e=d.get(c,"error")||d.get(c,"error-code");if(e)return a.dialog.caller.request.start.error(e);d.set(a.data.cache,"caller_request["+b+"]",d.get(c,"data"));a.chat_id=d.get(c,"data.chat_id")},function(b){a.dialog.caller.request.start.error(b)})};a.dialog.caller.request.start.error=
function(b){a.dialog.caller.request.hide(function(){var a="Sorry, we were unable to start your Chat.";d.isString(b)&&b&&(a+=" (Error: "+b+")");e.dialog.alert(a)})};a.dialog.talker={};a.dialog.talker.request={};a.dialog.talker.request.accept=function(b){a.chat_id=b;e.sock.request("chat/accept",{chat_id:b}).then(function(b){if(b=d.get(b,"error")||d.get(b,"error-code"))return a.dialog.talker.request.accept.error(b)},function(b){a.dialog.talker.request.accept.error(b)})};a.dialog.talker.request.accept.error=
function(b){a.dialog.talker.request.hide(function(){var c="Sorry, we were unable to start your Chat.";d.isString(b)&&b&&(c+=" (Error: "+b+")");if(a.dialog.talker.request.countdown.callback)return a.dialog.talker.request.countdown.callback(c),!1;e.dialog.alert(c)})};a.dialog.talker.request.boot=function(b){if(!e.user.id)return e.user.login();a.dialog.talker.request.countdown.boot(b);a.dialog.talker.request.render(b);a.dialog.talker.request.show()};a.dialog.talker.request.countdown={};a.dialog.talker.request.countdown.boot=
function(b){var h=d.get(b,"element");a.dialog.talker.request.countdown.element=h?h:'.chat-dialog-talker-request strong, #web-chat-caller div[step="2"] strong span';b&&(b.callback&&(a.dialog.talker.request.countdown.callback=b.callback),"undefined"!=typeof b.idle_timeout&&(a.data.idle_timeout=b.idle_timeout));e.chat.dialog.talker.request.countdown.destroy();e.chat.dialog.talker.request.countdown.instance=setInterval(a.dialog.talker.request.countdown.tick.bind(null,b),a.dialog.talker.request.countdown.interval);
c(a.dialog.talker.request.countdown.element).html(a.dialog.talker.request.countdown.seconds)};a.dialog.talker.request.countdown.destroy=function(){clearInterval(e.chat.dialog.talker.request.countdown.instance);a.dialog.talker.request.countdown.seconds=a.data.talker_request_countdown_seconds};a.dialog.talker.request.countdown.instance=null;a.dialog.talker.request.countdown.interval=1E3;a.dialog.talker.request.countdown.tick=function(b){a.dialog.talker.request.countdown.seconds--;c(a.dialog.talker.request.countdown.element).html(a.dialog.talker.request.countdown.seconds);
2==e.user.type_id&&a.noise();if(0>=a.dialog.talker.request.countdown.seconds){if(a.dialog.talker.request.countdown.callback)return a.dialog.talker.request.countdown.callback("no_answer"),!1;1==e.user.type_id?(e.dialog.alert("The Chat has been missed due to the "+e.data_get("word_talker")+" not answering in time."),ServiceWindow.chat.hide(!0,!0)):(a.dialog.talker.request.missed(b.chat_id),e.dialog.alert("The Chat has been missed due to you not answering in time."))}};a.dialog.talker.request.countdown.seconds=
a.data.talker_request_countdown_seconds;a.dialog.talker.request.decline=function(b){e.request("ajax/chat/",{action:"decline",chat_id:b});a.dialog.talker.request.countdown.destroy();a.dialog.talker.request.hide()};a.dialog.talker.request.missed=function(b){e.request("ajax/chat/",{action:"missed",chat_id:b});a.dialog.talker.request.countdown.destroy();a.dialog.talker.request.hide()};a.dialog.talker.request.hide=function(a){e.window.fade.hide();if(c(".chat-dialog-talker-request").length)return c(".chat-dialog-talker-request").hide("drop",
{direction:"down"},function(){c(this).remove();d.isFunction(a)?a():void 0});d.isFunction(a)?a():void 0};a.dialog.talker.request.html=function(b){return'\t\t\t<section class="chat-dialog-talker-request" class="hide">\t\t\t\t<i class="sprite_public sprite_public icon_16_chat"></i>\t\t\t\t<div>\t\t\t\t\t<h2><span>'+unescape(b.other_chat_profile_profile_title)+"</span> wants to Chat with...</h2>\t\t\t\t\t<h3>"+unescape(b.chat_profile_profile_title)+"</h3>\t\t\t\t\t<h4>..."+(17==b.rate_type_id?"for $"+
f.format.money(b.profile_rate_price_caller)+"/min":"up to "+b.rate_minutes+" minutes for $"+f.format.money(b.profile_rate_price_caller))+"</h4>\t\t\t\t\t<p>You have <strong>"+a.dialog.talker.request.countdown.seconds+'</strong> seconds to respond to this request ...</p>\t\t\t\t\t<button onclick="return site.chat.dialog.talker.request.accept('+b.chat_id+')">Accept</button>\t\t\t\t\t<button onclick="return site.chat.dialog.talker.request.decline('+b.chat_id+')">Decline</button>\t\t\t\t</div>\t\t\t</section>'};
a.dialog.talker.request.render=function(b){c(".chat-dialog-talker-request").length&&c(".chat-dialog-talker-request").remove();return c("body").prepend(a.dialog.talker.request.html(b))};a.dialog.talker.request.show=function(){c("#window_fade").fadeIn();c(".chat-dialog-talker-request").show("drop",{direction:"down"})};a.active=!1;c("body").removeClass("chat_in_progress");a.init=function(){c(document).on("websockets:chat",a.websockets.chat);c(document).on("websockets:chat_message",a.websockets.chat_message);
c(document).on("websockets:chat_typing",a.websockets.chat_typing);c(g).on("load focus",a.noise.cookie);c(g).on("beforeunload unload",function(){a.data.chat_browser_tab_id==f.cookie.get("chat_browser_tab_id")&&f.cookie.remove("chat_browser_tab_id")});c(document).on("websockets:disconnect",function(){var b=d.first(d.get(e,"chat.data.cache.chat"));d.isObject(b)&&(b.chat_status_id=4,a.websockets.chat(null,{listing:[b]}))});a.data.chat_price_per_message=parseFloat(e.data_get("chat_price_per_message"));
a.ping=d.noop;a.fakewindow();c(document).on("websockets:profile",a.fakewindow.profileevent);e.chat.assistant&&c(".chat_assistant .title_extra").html('<span class="big">is ready to </span>chat for $'+parseFloat(e.chat.assistant.rate_chat_price).toFixed(2)+"/minute")};a.fakewindow=function(){2!=e.user.type_id&&(d.get(g,"$_CACHE_INPUT.profile.is_chatable")||0<c(".chat_assistant").length)&&(e.chat.data.cache.chat.fakeid=a.fakewindow.load_profile(),e.chat.window.boot({chat_id:"fakeid"}))};a.fakewindow.load_profile=
function(){var a=c("div.profile-page-content[data-profile]").data("profile")||{};a={chat_profile_headline:null,chat_profile_rating:null,chat_profile_rating_count:null,chat_profile_profile_id:a.profile_id,chat_profile_profile_avatar_https:a.avatar_https,chat_profile_profile_title:a.title};a.chat_profile_profile_id||(a.chat_profile_profile_id=c(".profile-page").data("profile_id"),a.chat_profile_profile_avatar_https=c("._profile_image").attr("src"),a.chat_profile_profile_title=c("._profile_full").text());
return a};a.fakewindow.profileevent=function(b,c){if(d.get(g,"$_CACHE_INPUT.profile.profile_id")==d.get(c,"profile_id")){if(d.get(c,"is_chatable")&&!d.keys(e.chat.data.cache.chat).length)return a.fakewindow();d.get(c,"is_chatable")||(a.window.destroy("fakeid"),delete e.chat.data.cache.chat.fakeid)}};a.noise=function(){f.cookie.get("chat_browser_tab_id")||a.noise.cookie();if(a.data.chat_browser_tab_id!=f.cookie.get("chat_browser_tab_id"))return!1;if(c("#chat-noise").length)return c("#chat-noise")[0].src=
e.url.current+a.data.audio.ding,c("#chat-noise")[0].play();player.initialize({container:"#javascript",id:"chat-noise",type:"audio",width:0,autoplay:!0,files:[{type:"audio/mp3",src:e.url.current+a.data.audio.ding}]});c("#chat-noise").hide(0)};a.noise.cookie=function(){a.data.chat_browser_tab_id=+new Date+(new Date).getMilliseconds();f.cookie.set("chat_browser_tab_id",a.data.chat_browser_tab_id,1)};a.websockets={};a.websockets.chat=function(b,h){if(d.get(h,"listing")){a.websockets.chat.acd(h);var l=
null;d.each(h.listing,function(h){if(h.chat_id==l)return!1;l=h.chat_id;d.set(a.data.cache,"chat",{});d.set(a.data.cache,"chat["+h.chat_id+"]",h);if(2==h.chat_status_id&&h.chat_id==a.chat_id)a.active=!0,c("body").addClass("chat_in_progress"),a.window.boot(h);else if(4==h.chat_status_id&&h.chat_id==a.chat_id){a.active=!1;c("body").removeClass("chat_in_progress");a.idle.destroy();c(".profile-page-content .profile-connect > article").html("Sorry, I am unable to take your call.");var f=a.window.get(h.chat_id);
c("footer input",f).attr("disabled","disabled");a.window.message({listing:[{chat_id:h.chat_id,chat_message_id:"chat_ended",message:"The Chat has ended.",profile_id:null}]});e.chat.use_assistant=!1}if(2==e.user.type_id)1==h.chat_status_id?(c(".chat-window").each(function(){var b=c(this).data("chat_id");b&&a.window.close(b,!0,!1,!0)}),a.dialog.talker.request.boot(h),b&&Push.create("Webchat Message",{body:unescape(h.other_chat_profile_profile_title)+" wants to Chat with you!",icon:"/favicon.ico",timeout:5E3,
onClick:function(){g.focus();this.close()}})):2==h.chat_status_id?(a.dialog.talker.request.countdown.destroy(),a.dialog.talker.request.hide()):5==h.chat_status_id&&(a.dialog.talker.request.countdown.destroy(),a.dialog.talker.request.hide(function(){e.dialog.alert("The Chat has been cancelled by the Caller.")}));else if(h.chat_id==a.chat_id)if(2==h.chat_status_id)c(".profile-page-content .profile-connect > article").html("Chatting with you..."),a.dialog.talker.request.countdown.destroy(),a.dialog.caller.request.hide(null,
!0),3==h.chat_type_id&&1==h.chat_profile_profile_type_id&&a.startaudio(h);else if(3==h.chat_status_id||7==h.chat_status_id)a.dialog.talker.request.countdown.destroy(),a.dialog.caller.request.hide(function(){if(a.dialog.talker.request.countdown.callback)return a.dialog.talker.request.countdown.callback("unavailable"),!1;7!==h.chat_status_id&&e.dialog.alert("We're sorry, but the Talker is unavailable to accept your request.")})})}};a.websockets.chat.acd=function(a){d.each(a.listing,function(b,c){a.listing[c].call_start_ts=
b.date_start_ts;a.listing[c].call_end_ts=b.date_completed_ts;a.listing[c].date_end=b.date_completed;a.listing[c].profile_rate_price=b.profile_rate_price_caller;a.listing[c].phone_call_id=b.chat_id;a.listing[c].profile_id=b.chat_profile_profile_id;a.listing[c].profile_title=b.chat_profile_profile_title;a.listing[c].profile_title_rewrite=b.chat_profile_profile_title_rewrite;a.listing[c].user_id=b.chat_profile_profile_user_id;a.listing[c].phone_call_status_id=-1==[1,2].indexOf(parseInt(b.chat_status_id))?
5:b.chat_status_id;7==b.chat_status_id&&(a.listing[c].phone_call_status_id=3)});e.demand.bundle("site.clicktocall","library/clicktocall",function(){e.clicktocall.websockets(a)},!1)};a.websockets.chat_typing=function(){clearTimeout(a.websockets.chat_typing.timeout);c(".chat-window .typing").fadeIn();a.websockets.chat_typing.timeout=setTimeout(function(){c(".chat-window .typing").fadeOut()},3E3)};a.websockets.chat_typing.timeout=null;a.websockets.chat_message=function(b,c,l){a.idle();c=d.get(c,"listing")?
c:{listing:[c]};if(b&&(b=d.first(d.get(c,"listing")),b.chat_id&&b.profile_id)){var h=d.get(a.data.cache,"chat["+b.chat_id+"]");b.profile_id==h.chat_profile_profile_id&&e.user.id==h.chat_profile_profile_user_id||b.profile_id==h.other_chat_profile_profile_id&&e.user.id==h.other_chat_profile_profile_user_id||(h=h[(h.other_chat_profile_profile_id==b.profile_id?"other_":"")+"chat_profile_profile_title"]+": ",h+=b.message,Push.create("Webchat Message",{body:h,icon:"/favicon.ico",timeout:5E3,onClick:function(){g.focus();
this.close()}}))}a.window.message(c,l)};a.idle=function(){a.active&&0!=a.data.idle_timeout&&(a.idle.destroy(),a.idle.timeout=setTimeout(function(){a.idle.dialog=e.dialog.confirm("Are you still here to Chat?",function(b){clearTimeout(a.idle.confirm_timeout);b?a.idle():a.window.close(d.get(d.first(d.get(e,"chat.data.cache.chat")),"chat_id"),!0,!0)});a.idle.confirm_timeout=setTimeout(function(){a.window.close(d.get(d.first(d.get(e,"chat.data.cache.chat")),"chat_id"),!0,!0);a.idle.destroy()},2E4)},a.data.idle_timeout))};
a.idle.confirm_timeout=null;a.idle.dialog=null;a.idle.destroy=function(){clearTimeout(a.idle.timeout);clearTimeout(a.idle.confirm_timeout);d.get(a.idle.dialog,"destroy")&&a.idle.dialog.destroy()};a.idle.timeout=null;a.window={};a.window.boot=function(b){if(1==e.user.type_id&&!c("#m_contact_options").length&&!g.RESPONSIVE){var d=1==b.chat_profile_profile_type_id?"other_":"";return browse.t_modal_launch(b[d+"chat_profile_profile_id"],b[d+"chat_profile_profile_title_rewrite"],function(){a.window.boot(b)})}!1!==
a.window.render(b)&&a.window.events(b);c(g).resize();a.window.show(b);a.chat_autosend_msg&&(a.chat_autosend_msg.chat_id=b.chat_id,a.window.send(a.chat_autosend_msg),a.chat_autosend_msg=null);a.dialog.talker.request.countdown.callback&&a.dialog.talker.request.countdown.callback("success")};a.window.close=function(b,h,l,f){h=d.isUndefined(h)&&!a.active?!0:h;if(!h&&!confirm("Are you sure you want to end this Chat?"))return!1;a.idle.destroy();b=d.isNumber(b)?b:c(this).parent().parent().parent().data("chat_id");
!f&&a.active&&(e.request("ajax/chat/",{action:"close",chat_id:b}),a.endaudio());l||a.window.destroy(b);chat_assistant&&chat_assistant.remove()};a.window.destroy=function(b){a.window.get(b).remove();return!0};a.endaudio=function(a){1==e.user.type_id&&d.get(e,"chat.active")&&(e.webrtc.stopAudioSession(),e.webrtc.runHandlers("audio_ended",{}))};a.startaudio=function(b){b={action:"startaudio",chat_id:b.chat_id};e.chat.send_auth&&(b.auth=e.chat.send_auth);e.request("ajax/chat/",b,function(a){a.success&&
(c(".is_chatable_phone_boot").hide(),e.demand.js("site.webrtc","members/webrtc",function(){e.webrtc.init(!0);e.webrtc.addHandler("webrtc_connected",function(a){console.log("connected addhandler");e.webrtc.startAudioSession()});e.webrtc.addHandler("audio_started",function(a){console.log("audio_started add_handler");document.getElementById("XMPPAudio").srcObject=a.audio.streams[0];XMPPAudio.play()});e.webrtc.addHandler("audio_ended",function(){1==e.user.type_id&&d.get(e,"chat.active")&&(console.log("audio_ended addhandler"),
XMPPAudio.stop(),XMPPAudio.hide(),c(".chat-window .is_chatable_phone_boot").show())})}))},function(b){a.window.send.error(b)})};a.window.events=function(b){var d=a.window.get(b.chat_id);c(g).unbind("resize").on("resize",function(){800>c(g).outerWidth()?c("body").addClass("narrow"):c("body").removeClass("narrow");a.window.reposition()});c(".chat-window-close",d).unbind("click").on("click",a.window.close);c(".chat-window-expand",d).unbind("click").on("click",a.window.expand);c(".chat-window-resize",
d).unbind("click").on("click",a.window.resize);c("#chat_text_to_speech",d).unbind("change").on("change",function(){e.request("ajax/chat/",{action:"chat_text_to_speech",chat_id:b.chat_id,enabled:c(this).is(":checked")?1:0},function(a){},function(b){a.window.send.error(b)})});c(".is_chatable_phone_boot",d).unbind("click").on("click",function(){a.is_chatable_phone_boot_running||(a.is_chatable_phone_boot_running=!0,XMPPAudio.allowAutoPlay(),a.window.send({chat_id:b.chat_id,message:"System: Attempting to call talker for audio chat."}),
a.startaudio(b),a.is_chatable_phone_boot_running=!1)});c(".chat-window-input",d).unbind("keypress keyup keydown").on("keypress",function(d){c(this).focus();c(this).click();13==d.keyCode&&a.window.send({chat_id:b.chat_id,message:c(this).val()});c(this).val()&&a.window.typing()});c(".chat-window-send",d).unbind("click").on("click",function(){a.window.send({chat_id:b.chat_id,message:c(this).parents("footer").find(".chat-window-input").val()})})};a.window.typing=function(){if(!a.window.typing.requested)return a.window.typing.request();
clearTimeout(a.window.typing.timeout);a.window.typing.timeout=setTimeout(a.window.typing.request,1E3)};a.window.typing.requested=!1;a.window.typing.timeout=null;a.window.typing.request=function(){a.window.typing.requested=!0;e.request("ajax/chat/",{action:"typing",chat_id:d.get(d.first(d.get(e,"chat.data.cache.chat")),"chat_id")})};a.window.get=function(a,d){"undefined"==typeof d&&(d="");return c(d+" .chat-window[data-chat_id="+a+"]")};a.window.hide=function(b,e){if(a.window.get(b.chat_id).length)return a.window.get(b.chat_id).hide("drop",
{direction:"down"},function(){c(this).remove();a.window.reposition();d.isFunction(e)?e():void 0});d.isFunction(e)?e():void 0};a.window.highlight=function(b){b=a.window.get(b);c("header",b).effect("highlight")};a.window.html=function(b){if("undefined"==typeof e.user.type_id&&!e.chat.assistant)return!1;var c=a.cache_get_profile(b.chat_id,!0);a.cache_get_profile(b.chat_id,!1);var l="";c.headline&&(l+='<br/><span class="headline">'+unescape(c.headline)+"</span>");c.rating&&(c.rating_count=c.rating_count||
0,l+='<br/><span class="profile-rating" data-rating="'+c.rating+'" data-rating_count='+c.rating_count+"></span>");var k=d.get(d.where(d.get(g,"$_CACHE_INPUT.rates"),{rate_type_id:17}),"[0].price_caller");c.price_chat&&(k=c.price_chat);k&&(k=k.formatMoney(2,".",","));var n=1==e.user.type_id||e.chat.assistant?1:2,m='\t\t\t<section class="chat-window'+(1==n?" caller":" talker")+(d.parseInt(f.cookie.get("chat_minimized_"+b.chat_id))?" minimized":"")+'" data-chat_id="'+b.chat_id+'">\t\t\t\t<header>\t\t\t\t';
m+='\t\t\t\t\t<span>\t\t\t\t\t\t<a class="chat-window-close"><i class="fas fa-times"></i></a>\t\t\t\t\t\t'+(1==n?'<a class="chat-window-expand" data-html="Full Screen"><i class="fas fa-expand"></i></a>':"")+'\t\t\t\t\t\t<a class="chat-window-resize"><i class="fas fa-arrow-'+(d.parseInt(f.cookie.get("chat_minimized_"+b.chat_id))?"up":"down")+'"></i></a>\t\t\t\t\t\t'+(2==e.user.type_id?'<span class="switch small" style="display: none; position: absolute;margin-left: 6px; left: 108px; bottom: 0px">\t\t\t\t\t\t\t\t\t\t\t<input class="switch-input" id="chat_text_to_speech" type="checkbox" name="chat_text_to_speech" />\t\t\t\t\t\t\t\t\t\t\t<label class="switch-paddle" for="chat_text_to_speech" style="display: inline-block;">\t\t\t\t\t\t\t\t\t\t\t\t<span class="switch-active" aria-hidden="true">Yes</span>\t\t\t\t\t\t\t\t\t\t\t\t<span class="switch-inactive" aria-hidden="true" style="color: #000;">No</span>\t\t\t\t\t\t\t\t\t\t\t</label>\t\t\t\t\t\t\t\t\t\t\t<p style="display: inline-block;font-size: 17px;position: relative;top: -8px;margin-left: 7px;">Listen to what this Caller is typing over the Phone?</p>\t\t\t\t\t\t\t\t\t\t</span>':
"")+"\t\t\t\t\t</span> \t\t\t\t";e.chat.use_assistant&&(m+='<a profile-id="'+c.profile_id+'" href="'+c.url_https+'" class="_profile">');m+='<img class="avatar" src="'+c.avatar_https+'" />\t\t\t\t\t';for(var p=0,q=0,r=0;p<c.title.length;p++)q+=c.title.charAt(p)==c.title.charAt(p).toLowerCase()?1:2,20<q&&0==r&&(r=q);24<q&&(c.title=c.title.substr(0,r)+"...");m+="<strong>"+unescape(c.title)+l+'\t\t\t\t\t</strong>\t\t\t\t\t<span class="title_extra"></span>\t\t\t\t';e.chat.use_assistant&&(m+="</a>");c=
"You and your Chat partner are now connected!";if("fakeid"==b.chat_id){if(e.chat.use_assistant)switch(c="Hey baby, lets chat.",Math.floor(3*Math.random())){case 1:c="Hi, I am here to chat about your fantasies!";break;case 2:c="Hey there, how is your day going?  Lets talk."}else c="Type below and click send to begin a Chat.";c+=k?"<br />$"+k+"/min":""}return m=m+' \t\t\t\t\t<div class="profile-page-content"></div>\t\t\t\t</header>\t\t\t<div>\t\t\t\t\t<ul>\t\t\t\t\t\t<li class="chat-window-message-system">'+
(c+'</li>\t\t\t\t\t</ul>\t\t\t\t\t<ul class="typing chat-window-message-system"></ul>\t\t\t\t</div>\t\t\t\t<footer>\t\t\t\t'+(1!=n||3!=b.chat_type_id&&4!=b.chat_type_id?"":'<button id="is_chatable_phone_boot" class="is_chatable_phone_boot" data-html="Listen Live through your speakers while you webchat"><i class="sprite_public icon_16_phone"></i>Click Here To Listen</button>')+'\t\t\t\t\t<input class="chat-window-input" type="text" placeholder="Enter a message and hit enter." maxlength="500" />\t\t\t\t\t<button class="chat-window-send">Send</button>\t\t\t\t</footer>\t\t\t\t'+
(1!=n||3!=b.chat_type_id&&4!=b.chat_type_id?"":'<div id="XMPPAudio-player"><button class="button disabled"><i id="XMPPAudio-play" class="fas fa-play"></i></button><button id="XMPPAudio-voldown-btn" class="button"><i id="XMPPAudio-voldown" class="fas fa-volume-down"></i></button><button id="XMPPAudio-volpercent" class="button disabled">100%</button><button id="XMPPAudio-volup-btn" class="button"><i id="XMPPAudio-volup" class="fas fa-volume-up"></i></button></div>')+"\t\t\t</section>")};a.window.message=
function(b,h){if(!d.get(b,"listing"))return!1;d.each(b.listing,function(b){if(b.chat_message_id&&b.chat_id&&!d.isUndefined(b.message)&&(b.message=String(b.message),a.window.get(b.chat_id).length&&!c("li[data-chat_message_id="+b.chat_message_id+"]").length)){var f=d.get(a.data.cache,"chat["+b.chat_id+"]"),g=c('<li data-chat_message_id="'+b.chat_message_id+'">');g.html(String(b.message).replace(/  /g," &nbsp;"));b.profile_id?(c("<strong>").text(f[(f.other_chat_profile_profile_id==b.profile_id?"other_":
"")+"chat_profile_profile_title"]+": ").prependTo(g),(b.profile_id==f.chat_profile_profile_id&&e.user.id==f.chat_profile_profile_user_id||b.profile_id==f.other_chat_profile_profile_id&&e.user.id==f.other_chat_profile_profile_user_id)&&g.addClass("me")):g.addClass("chat-window-message-system");g.appendTo(a.window.get(b.chat_id).find("> div > ul:not(.typing)"));clearTimeout(a.window.message.timeout);c(".chat-window .typing").fadeOut();a.window.message.timeout=setTimeout(function(){a.window.scroll_to_bottom(b.chat_id)},
250);!1===h||b.profile_id==f.chat_profile_profile_id&&e.user.id==f.chat_profile_profile_user_id||b.profile_id==f.other_chat_profile_profile_id&&e.user.id==f.other_chat_profile_profile_user_id||(a.noise(),a.window.highlight(b.chat_id));a.message_callback&&a.message_callback(b)}})};a.window.message.timeout=null;a.window.render=function(b){if(a.window.get(b.chat_id).length&&!e.chat.use_assistant)return!1;var d="body";c("#m_contact_options").filter(":visible").length&&(d="#m_contact_options",c(".chat-window",
d).remove());c(".profile-connect").filter(":visible").length&&(d=".profile-connect",c(".chat-window",d).remove());e.chat.use_assistant&&(d=".chat_assistant",c(".chat-window",d).remove());b=a.window.html(b);a.chatLocation=d;rs=c(d).prepend(b);1==e.user.type_id&&c(".chat-window header .profile-page-content").append(c(".profile-page .profile-more-photos").clone());e.profile_rating&&e.profile_rating.update&&e.profile_rating.update();return rs};a.window.reposition=function(){return!1};a.window.expand=
function(){if(1==e.user.type_id||"undefined"==typeof e.user||"undefined"==typeof e.user.type_id){var b=c(".chat-window").data("chat_id"),d=a.window.get(b);e.chat.use_assistant?c(".chat_assistant").addClass("large"):d.hasClass("caller")?(d.removeClass("caller"),d.addClass("talker"),c("body").append(d)):(d.removeClass("talker"),d.addClass("caller"),c(a.chatLocation).prepend(d));setTimeout(function(){a.window.scroll_to_bottom(b)},500)}};a.window.resize=function(b){b=d.isNumber(b)?b:c(this).parent().parent().parent().data("chat_id");
if(e.chat.use_assistant)return c(".chat_assistant").removeClass("large"),!1;var h=a.window.get(b),g=d.parseInt(f.cookie.get("chat_minimized_"+b));g=d.isNaN(g)&&!c(".chat-window").hasClass("minimized")?0:g;g=d.isNaN(g)&&c(".chat-window").hasClass("minimized")?1:g;g=0==g?1:0;c(h)[g?"addClass":"removeClass"]("minimized");c(".chat-window-resize .fa",h)[g?"removeClass":"addClass"]("fa-arrow-down");c(".chat-window-resize .fa",h)[g?"addClass":"removeClass"]("fa-arrow-up");f.cookie.set("chat_minimized_"+
b,g,1)};a.window.scroll_to_bottom=function(b){b=a.window.get(b).find("div");b.scrollTo(b.find("ul").outerHeight()+100,100)};a.window.send=function(b){if(""===b.message){if(a.dialog.talker.request.countdown.callback)return a.dialog.talker.request.countdown.callback("empty_message"),!1;e.dialog.alert("Your Chat message cannot be empty.");return!1}if("fakeid"===b.chat_id){var d=a.cache_get_profile(b.chat_id,!0);if(d){ServiceWindow.chat.show(d.profile_id);a.chat_autosend_msg=b;c('section[data-chat_id="fakeid"] .chat-window-input, section[data-chat_id="fakeid"] .chat-window-send').attr("disabled",
"disabled");return}}var f=a.window.get(b.chat_id);c("footer input",f).val("");a.window.typing.requested=!1;d={action:"send",chat_id:b.chat_id,message:b.message};e.chat.send_auth&&(d.auth=e.chat.send_auth);e.request("ajax/chat/",d,function(d){d.error&&(a.window.send.error(d.error),c("footer input",f).val(b.message))},function(d){a.window.send.error(d);c("footer input",f).val(b.message)})};a.window.send.error=function(b){var c="Sorry, we were unable to send your Chat message.";d.isString(b)&&b&&(c=
"low_balance"==b?"Please add money to your Wallet to send this message.":"no_message"==b?"Your Chat message cannot be empty.":c+(" (Error: "+b+")"));if(a.dialog.talker.request.countdown.callback)return a.dialog.talker.request.countdown.callback(c),!1;e.dialog.alert(c)};a.window.show=function(b){a.idle();a.window.reposition();a.window.get(b.chat_id).show("drop",{direction:"down"})};c(document).ready(a.init);return e.chat=a})(_,$,site,utility,window);
var chat_assistant={bin:function(){!chat_assistant.bin_run&&chat_assistant.valid()&&(chat_assistant.bin_run=!0,site.vars.chat_assistant.delay<site.vars.chat_assistant.min_delay&&(site.vars.chat_assistant.delay=site.vars.chat_assistant.min_delay),chat_assistant.set_assistant(site.vars.chat_assistant.delay),chat_assistant.debug_to_screen&&$(document.body).append('<div class="chat_debug" style="position:fixed; bottom:0; left:0; border:solid red 1px; height:auto; font-size:10px; background:white; z-index:5;">Chat Debug:<br/><div id="timeout"></div>'),
chat_assistant.debug_to_screen&&chat_assistant.countdown(site.vars.chat_assistant.delay));chat_assistant.debug_to_screen="sandbox"==site.vars.environment||"development"==site.vars.environment},init:function(){site.request("ajax/chat.php",{action:"assistant"},function(d){chat_assistant.debug_to_screen&&console.log("ajax chat",d.delay,d);chat_assistant.debug_to_screen&&$("div.chat_debug").html($("div.chat_debug").html()+"d:"+d.delay+"; p:"+d.profile_id+"<br/>");d.profile_id&&chat_assistant.valid()&&
(site.chat.assistant=d,0==$(".chat_assistant").length&&$(document.body).append('<div class="chat_assistant"></div>'),$(".chat_assistant").hasClass("large")||(site.chat.use_assistant=!0,site.chat.chat_autosend_msg=null,$(".chat-window li[data-chat_message_id=chat_ended]").remove(),site.chat.init()));d.delay&&chat_assistant.set_assistant(d.delay)})},countdown:function(d){chat_assistant.countdown_id&&clearTimeout(chat_assistant.countdown_id);"undefined"!=typeof d&&(chat_assistant.delay=d);$("div.chat_debug div#timeout").html("countdown: "+
chat_assistant.delay);0<=chat_assistant.delay&&(chat_assistant.countdown_id=setTimeout("chat_assistant.countdown()",1E3));--chat_assistant.delay},set_assistant:function(d){"undefined"==typeof d&&(d=site.vars.chat_assistant.delay);chat_assistant.assistant_id&&clearTimeout(chat_assistant.assistant_id);chat_assistant.assistant_id=setTimeout("chat_assistant.init()",1E3*d);chat_assistant.countdown(d)},remove:function(){$(".chat_assistant").remove()},valid:function(d){return 0<$("div.profile-page").filter(":visible").length?
!1:site.vars.chat_assistant&&!site.chat.no_assistant&&0>document.location.href.indexOf("/admin/")}};InitObject.queue("chat_assistant");

/*
 yepnope2.0.0|New BSD*/
window.yepnope=function(b,c){function d(){}function g(){q&&q.parentNode||(q=c.getElementsByTagName("script")[0])}function h(a,m){var n,l,f;"string"==typeof a?n=a:Object(a)===a&&(n=a._url||a.src,l=a.attrs,f=a.timeout);m=m||d;l=l||{};var k,h,e=c.createElement("script");f=f||p.errorTimeout;e.src=n;t&&(e.event="onclick",e.id=e.htmlFor=l.id||"yn_"+v++);for(h in l)e.setAttribute(h,l[h]);e.onreadystatechange=e.onload=function(){var a;if(a=!k)a=e.readyState,a=!a||"loaded"==a||"complete"==a||"uninitialized"==
a;if(a){if(k=1,t)try{e.onclick()}catch(x){}m.call(b)}e.onload=e.onreadystatechange=e.onerror=null};e.onerror=function(){k=1;m(Error("Script Error: "+n))};r(function(){k||(k=1,m(Error("Timeout: "+n)),e.parentNode.removeChild(e))},f);g();q.parentNode.insertBefore(e,q)}function u(a,m){var n,l,f={};Object(a)===a?(n=a._url||a.href,f=a.attrs||{}):"string"==typeof a&&(n=a);var k=c.createElement("link");m=m||d;k.href=n;k.rel="stylesheet";k.media="only x";k.type="text/css";r(function(){k.media=f.media||"all"});
for(l in f)k.setAttribute(l,f[l]);g();q.parentNode.appendChild(k);r(function(){m.call(b)})}function p(a,b,d){var c;Object(a)===a&&(c=a,a=c.src||c.href);a=p.urlFormatter(a,b);c?c._url=a:c={_url:a};a=a.split("?")[0];a=a.substr(a.lastIndexOf(".")+1);if("js"===a)h(c,d);else{if("css"!==a)throw Error("Unable to determine filetype.");u(c,d)}}var q,r=b.setTimeout,v=0,w={}.toString,t=!(!c.attachEvent||b.opera&&"[object Opera]"==w.call(b.opera));return p.errorTimeout=1E4,p.injectJs=h,p.injectCss=u,p.urlFormatter=
function(a,b){var c=[],d=[],f;for(f in b)b.hasOwnProperty(f)&&(b[f]?c.push(encodeURIComponent(f)):d.push(encodeURIComponent(f)));return(c.length||d.length)&&(a+="?"),c.length&&(a+="yep="+c.join(",")),d.length&&(a+=(c.length?"&":"")+"nope="+d.join(",")),a},p}(window,document);
var demand={bundle:function(b,c,d,g){var h=this;d=site.callback(d);!1!==g&&site.window.fade.show();return h.css(b,c,function(){h.js(b,c,d)})},check:function(b,c){var d=this;return d.valid(b)?c(!0):setTimeout(function(){return d.check(b,c)},50)},css:function(b,c,d){d=site.callback(d);return this.valid(b)?d(!0):(b=site.url.current+"page.css?v="+site.minify.hash(c,"css")+"&i="+c+"&.css",yepnope(b,{},d))},js:function(b,c,d){var g=this;d=site.callback(d);return g.valid(b)?d(!0):(c=site.url.current+"page.js?v="+
site.minify.hash(c,"js")+"&i="+c+"&.js",yepnope(c,{},function(){return g.check(b,d)}))},template:function(b,c,d){var g=this;c=c||{};d=site.callback(d);if(!$("#mustache-"+b).length){var h="minify.php?v="+site.minify.hash(b,"js")+"&i="+b+"&type=mustache";return site.request(h,function(h){$("body").append(h);return g.mustache(b,c,d)})}return g.mustache(b,c,d)},mustache:function(b,c,d){if(!$("#mustache-"+b).length)return!1;$("#_tlreveal_"+b).length||$("body").append('<div class="reveal" id="_tlreveal_'+
b+'" data-reveal></div>');var g=$("#mustache-"+b).html();g=Mustache.render(g,c);$("#_tlreveal_"+b).html(g).foundation().foundation("open");SiteNav.floating_form();return d(!0)},valid:function(b){if(!_.isString(b))return!1;b=_.get(window,b);return!_.isObject(b)&&!_.isFunction(b)||_.isEmpty(b)?!1:!0}};site.demand=demand;

var dialog=function(){};dialog.entities={};dialog.zindex=999999999;dialog.defaults=function(){return{id:null,classes:"",container:null,type:"alert",autocenter:!0,html:null,height:null,width:null,callback:null,precallback:null,loaded:null,title:"Alert!",message:"Unknown error.",content_class:"dialog-content"}};
dialog.input=function(a){var b=this.defaults();_.isString(a)?a={message:a}:_.isObject(a)||(a={});a=$.extend(!0,b,a);a.id||(a.id="dialog-"+(new Date).getTime());a.classes+=(a.classes?" ":"")+"dialog";a.callback=site.callback(a.callback);a.precallback=site.callback(a.precallback);a.loaded=site.callback(a.loaded);this.zindex++;a.zindex=this.zindex;return a};
dialog.alert=function(a,b,c,d){var e=site.dialog;a=a||{};_.isString(a)&&(a={message:a});_.isFunction(b)&&(a.callback=site.callback(b));_.isFunction(c)&&(a.precallback=site.callback(c));_.isFunction(d)&&(a.oninit=site.callback(d));a=e.input(a);"dialog"==a.classes&&(a.classes+=" dialog-red");a.type="alert";b=new site.dialog;b.initialize(a);return e.entities[a.id]=b};
dialog.confirm=function(a,b,c,d){var e=site.dialog;a=a||{};_.isString(a)&&(a={message:a});_.isFunction(b)&&(a.callback=site.callback(b));_.isFunction(c)&&(a.precallback=site.callback(c));_.isFunction(d)&&(a.oninit=site.callback(d));a=e.input(a);"dialog"==a.classes&&(a.classes+=" dialog-orange");a.type="confirm";b=new site.dialog;b.initialize(a);return e.entities[a.id]=b};
dialog.custom=function(a,b,c,d){var e=site.dialog;a=a||{};_.isFunction(b)&&(a.callback=site.callback(b));_.isFunction(c)&&(a.precallback=site.callback(c));_.isFunction(d)&&(a.oninit=site.callback(d));a=e.input(a);a.type="custom";b=new site.dialog;b.initialize(a);if(a.oninit)a.oninit();return e.entities[a.id]=b};
dialog.success=function(a,b,c,d){c=site.dialog;a=a||{};_.isString(a)&&(a={message:a});a.callback=site.callback(b);_.isSet(a.title)||(a.title="Success!");_.isSet(a.header_class)||(a.header_class="hide_warning");a=c.input(a);"dialog"==a.classes&&(a.classes+=" dialog-green");a.type="alert";b=new site.dialog;b.initialize(a);return c.entities[a.id]=b};
dialog.prototype.initialize=function(a){this.id=a.id;this.callback=a.callback;this.precallback=a.precallback;this.loaded=a.loaded;this.render(a);this.events(a);this.show();return this.initialized=!0};
dialog.prototype.render=function(a){var b='\t\t<div id="'+this.id+'-window-fade" class="window-fade"></div>\t\t<section id="'+this.id+'" class="'+a.classes+'">\t\t\t<header'+(a.header_class?' class="'+a.header_class+'"':"")+">\t\t\t\t"+(a.skip_icon?"":'<i class="sprite_public icon_24_warning_white">')+'</i>\t\t\t\t<i class="sprite_public icon_24_close_white" data-html="Close this dialog!" data-top-nudge="-12"></i>\t\t\t\t<h1>'+a.title+'</h1>\t\t\t</header>\t\t\t<div class="'+a.content_class+'">';
switch(a.type){case "alert":b+="<p>"+a.message+'</p><div class="dialog-buttons"><button class="dialog-button-yes" data-action="yes">OKAY!</button></div>';break;case "confirm":b+="<p>"+a.message+'</p><div class="dialog-buttons"><button class="dialog-button-no" data-action="no">NO</button><button class="dialog-button-yes" data-action="yes">YES</button></div>';break;default:b+=a.html}b+="\t\t\t</div>\t\t</section>";$("body").append(b);this.window_fade=$("#"+this.id+"-window-fade");this.element=$("#"+
this.id);b={zIndex:a.zindex};this.window_fade.css(b);a.height&&(b.height=a.height);a.width&&(b.width=a.width);a.autocenter&&(b.marginTop=-this.element.height()/2,b.marginLeft=-this.element.width()/2);this.element.css(b);return this.loaded(!0)};
dialog.prototype.events=function(a){var b=this;$("#"+a.id).click();$("#"+a.id+" .dialog-button-yes").focus();$("#"+a.id).on("click",".dialog-button-no, header .icon_24_close_white",function(a){b.trigger(a,!1)});$("#"+a.id).on("click",".dialog-button-yes",function(a){b.trigger(a,!0)});$("#"+a.id).on("click",".dialog-button-action",function(a){b.trigger(a,!0)});$("#"+a.id).on("click",".js_link",function(a){b.destroy()});$("body").on("keydown.dialog",function(a){27==a.which?(a=b.precallback(!1),b.destroy(),
b.callback(!1,a)):13!=a.which||"TEXTAREA"==a.target.nodeName&&a.shiftKey||(a=b.precallback(!0),b.destroy(),b.callback(!0,a))})};dialog.prototype.trigger=function(a,b){a=this.precallback(a);this.destroy();this.callback(b,a)};dialog.prototype.destroy=function(){var a=this;$(".tooltip").remove();$("body").off("keydown.dialog");a.hide(function(){a.element.remove();a.window_fade.remove();delete site.dialog.entities[a.id]});return!1};
dialog.prototype.hide=function(a){this.element.fadeOut(250);this.window_fade.fadeOut(250);a=site.callback(a);return a(!0)};dialog.prototype.show=function(a){this.element.fadeIn(250);this.window_fade.fadeIn(250);a=site.callback(a);return a(!0)};$(document).ready(function(){site.dialog=dialog;window.alert=site.dialog.alert});

var form={initialize:function(){if(this.initialized)return!0;this.events();return this.initialized=!0},events:function(){window.$form_errors&&Form_Errors&&Form_Errors.init($form_errors)}};site.form=form;

var header={v:3,initialize:function(a){if(this.initialized)return!1;this.events();return this.initialized=!0},events:function(){$("#header_login").on("click touchstart",site.user.login);$("hdr_ctc_chat").on("click touchstart",header.ctc_chat);$("#status_menu a[data-type=phone], #status_menu a[data-type=webcam], #status_menu a[data-type=chat], #status_menu a[data-type=sms], #status_menu a[data-type=skype], #status_menu a[data-type=recordings], #status_menu a[data-type=ghost], #status_menu a[data-type=movie]").on("click touchstart",
this.status);$("#balance_menu .menu_close, #settings_menu .menu_close").on("click touchstart",User_Menu.close);$("#settings_menu .my_profiles").on("touchstart click",site.header.toggle_profiles);$("#header form#search > input[name=q],form.search input[name=q]").bind("keyup keydown keypress change",header.search.initialize)},popup:function(a,b,d,c){return window.open(a,b,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+d+", height="+
c+", top="+(screen.height/2-c/2)+", left="+(screen.width/2-d/2))},ctc_chat:function(){if(1!=site.vars.callactive){var a=$(this).data("options");if(!site.user.id)return site.utility.cookie.set("abandoned","ctc",1),site.utility.cookie.set("abandoned_id",JSON.stringify(a),1),site.user.login(a);site.demand.bundle("site.clicktocall","library/clicktocall",function(){site.clicktocall.connect.initialize(a)})}return!1},status:function(){var a=this,b=$(a).data("type"),d=$(a).hasClass("online")?0:1;if($('#status_menu [data-type="ghost"]').hasClass("offline")&&
"chat"===b)return alert("To make yourself available for Web Chat, please toggle your availability under Show in Contacts to visible."),!1;var c=null;switch(b){case "chat":c="is_chatable";break;case "sms":c="is_textable";break;case "skype":c="is_skypeable";break;case "recordings":c="is_recording";break;case "ghost":c="is_ghost";d=!d+0;break;case "movie":c="is_hmavailable";break;default:c="is_callable"}$(a).hide();$(a).after('<strong style="color: #ccc">...........</strong>');site.request("ajax/status/",
{method:"set",key:c,value:d},function(b){$("strong",$(a).parent()).remove();$(a).show();if(!b.success){var e=site.url.https+"members/";return e!==site.url.page&&"You must have an active profile to update your status.<br /><br />Select your profile and click Enable."===b.error?site.dialog.confirm({title:"No Active Profiles!",message:b.error+"<br /><br />Do you want to go to your Dashboard now to activate one of your profiles?"},function(a){if(a)return window.location=e}):alert(b.error)}site.header.update_status(c,
d)});return!1},update_status:function(a,b){b=1==b?1:0==b?0:parseInt(b)||0;if(_.isFunction(_.get(window,"TalkerMenu.status"))){var d=$('#dropdown-status a[service="'+a+'"] span.'+(b?"on":"off"));TalkerMenu.status(d,!0)}switch(a){case "is_callable":switch(b){case 1:$("#status_menu [data-type=phone]").removeClass("offline").addClass("online").html("Available");$("#header nav a.status i.sprite_public.icon_16_phone").removeClass("hide");break;case 0:$("#status_menu [data-type=phone]").removeClass("online").addClass("offline").html("Unavailable"),
$("#header nav a.status i.sprite_public.icon_16_phone").addClass("hide")}break;case "is_chatable":switch(b){case 1:$("#status_menu [data-type=chat]").removeClass("offline").addClass("online").html("Available");$("#header nav a.status i.icon_16_chat").removeClass("hide");break;case 0:$("#status_menu [data-type=chat]").removeClass("online").addClass("offline").html("Unavailable"),$("#header nav a.status i.icon_16_chat").addClass("hide")}break;case "is_ghost":switch(b){case 1:$("#status_menu [data-type=ghost]").removeClass("online").addClass("offline").html("Hidden");
$("#status_menu [data-type=chat] a#chat").addClass("disabled");break;case 0:$("#status_menu [data-type=ghost]").removeClass("offline").addClass("online").html("Visible"),$("#status_menu [data-type=chat] a#chat").removeClass("disabled")}break;case "is_hmavailable":switch(b){case 1:$("#status_menu [data-type=movie]").removeClass("offline").addClass("online").html("Available");break;case 0:$("#status_menu [data-type=movie]").removeClass("online").addClass("offline").html("Unavailable")}break;case "is_recording":switch(b){case 1:$("#status_menu [data-type=recordings]").removeClass("offline").addClass("online").html("On");
break;case 0:$("#status_menu [data-type=recordings]").removeClass("online").addClass("offline").html("Off")}break;case "is_skypeable":switch(b){case 1:$("#status_menu [data-type=skype]").removeClass("offline").addClass("online").html("Available");$("#header nav a.status i.icon_16_skype").removeClass("hide");break;case 0:$("#status_menu [data-type=skype]").removeClass("online").addClass("offline").html("Unavailable"),$("#header nav a.status i.icon_16_skype").addClass("hide")}break;case "is_textable":switch(b){case 1:$("#status_menu [data-type=sms]").removeClass("offline").addClass("online").html("Available");
$("#header nav a.status i.sprite_public.icon_16_sms").removeClass("hide");$("#header nav a.status_widget i.icon_16_sms").removeClass("icon_16_sms_disabled");break;case 0:$("#status_menu [data-type=sms]").removeClass("online").addClass("offline").html("Unavailable"),$("#header nav a.status i.sprite_public.icon_16_sms").addClass("hide"),$("#header nav a.status_widget i.icon_16_sms").addClass("icon_16_sms_disabled")}}a=$("#status_menu a.online").length;b=$("#status_menu a.offline").length;var c=d="red";
a&&!b?(d="online",c="green"):a&&b&&(d="partial",c="yellow");c="icon_10_orb_"+c;$("#header .status i.sprite_members.orb").removeClass("icon_10_orb_green icon_10_orb_red icon_10_orb_yellow").addClass(c);$("#header [data-menu=status_menu]").removeClass("offline online partial").addClass(d)},balance:function(a){a=parseFloat(a)||0;return $("#header nav a.status span").html("$"+a.formatMoney(2,".",","))},toggle_profiles:function(){$("#settings_menu li.my_profile:eq(0)").is(":hidden")?$("#settings_menu li.my_profile").show():
$("#settings_menu li.my_profile").hide();return!1},search:{version:1,delay:500,limit:5}};header.search.initialize=function(){var a=header.search,b=$(this).val();header.search.launcher=$(this);b!==a.keywords&&(a.keywords=b,clearTimeout(a.timeout),2<a.keywords.length&&(a.timeout=setTimeout(function(){a.query(a.keywords)},a.delay)))};
header.search.render=function(a){var b='<nav id="search-autocomplete">'+(3==site.theater.id?'<i class="fas fa-fw fa-times closer"></i>':'<i class="closer sprite_public icon_24_close_white"></i>')+"<h1>"+(a.count?a.count:"No")+" profiles found"+(a.count?":":".")+"</h1>";if(a&&!_.isUndefined(a.listing)){var d=0,c;for(c in a.listing){d++;if(c==this.limit)break;var e=a.listing[c];b+='<a href="'+site.url.current+"p/"+e.profile_id+'/"><img src="'+e["avatar_"+site.protocol]+'" /><span><strong>'+e.title+
"</strong><small>"+e.headline+"</small></span></a>"}b+='<a class="results" href="'+site.url.current+"browse/?q="+this.keywords+'">Click here to see all search results.</a>'}b+="</nav>";$("#search-autocomplete").remove();$("body").append(b);3==site.theater.id&&$("#search-autocomplete").css({top:$(header.search.launcher).offset().top+$(header.search.launcher).outerHeight(),left:$(header.search.launcher).offset().left,width:$(header.search.launcher).innerWidth()})};
header.search.events=function(){site.vars.GDPR_statistics&&site.track.search({search_term:this.keywords});$("#search-autocomplete .closer").click(this.destroy)};header.search.destroy=function(){$("#search-autocomplete").remove()};header.search.query=function(a){var b=this;b.request({query:a},function(a){a.success&&a.data||(a.data=!1);b.render(a.data);b.events()})};header.search.request=function(a,b){a=$.extend(!0,{ajax:!0,action:"autocomplete"},a);site.request("ajax/search/",a,b)};site.header=header;
var StatusWidget={bin:function(){$(document).on("click","a.status_widget",function(a){a.preventDefault();StatusWidget.show($(this))}).on("click","div.status_widget_underlay",function(){StatusWidget.hide()});StatusWidget.bin=null},show:function(a){WalletWidget.hide();if($("div.status_widget").is(":visible"))return StatusWidget.hide();$("div.status_widget_underlay").fadeIn(200);$("div.status_widget").show().css({top:a.position().top+a.outerHeight()+15,left:a.offset().left+a.outerWidth()/2-$("div.status_widget").outerWidth()/
2})},hide:function(){$("div.status_widget").hide();$("div.status_widget_underlay").hide()},ini:function(){"function"==typeof StatusWidget.bin&&StatusWidget.bin()}};$(document).ready(StatusWidget.ini);
var WalletWidget={bin:function(){$(document).on("click",".wallet-extra .fa-times",function(){$(".wallet-extra[active]").removeAttr("active")}).on("click",".wallet-window .credits [details]",function(){var a=$(".wallet-extra[extra-info='"+$(this).attr("details")+"']");a.length&&a.attr("active",!0)}).on("click",".wallet-extra .HM_minute",function(a){a.preventDefault();site.hm_widget.auth=$(this).data("auth");site.vars.user.data.hotmovies_user_id?site.hm_widget.show_login():site.hm_widget.show_signup();
WalletWidget.hide();$(".wallet-extra[active]").removeAttr("active")}).on("click",".wallet-window [goto-url]",function(a){a.preventDefault();window.location=$(this).attr("goto-url")}).on("click",".wallet-window .add_money",function(a){a.preventDefault();"object"==typeof AMW&&AMW.launch();WalletWidget.hide()}).on("click",".wallet-widget",function(a){a.preventDefault();WalletWidget.show($(this))}).on("click",".wallet-underlay",function(){WalletWidget.hide()}).on("click",".wallet-window .options .more",
function(){WalletWidget.more.show()}).on("mouseenter",".wallet-window .credits .header span",function(){WalletWidget.info.show($(this))}).on("mouseleave",".wallet-window .credits .header span",function(){WalletWidget.info.hide()}).on("click",".wallet-window .credits .header span",function(a){a.preventDefault()});WalletWidget.bin=null},ini:function(){"function"==typeof WalletWidget.bin&&WalletWidget.bin()},show:function(a){StatusWidget.hide();if($(".wallet-underlay").is(":visible"))return WalletWidget.hide();
$(".wallet-underlay").fadeIn(200);$(".wallet-window").css({left:a.offset().left+a.outerWidth()/2-$(".wallet-window").outerWidth()/2}).delay(250).show()},hide:function(){$(".wallet-underlay").hide();$(".wallet-window").hide();WalletWidget.more.hide();WalletWidget.more.hide_extra()},info:{show:function(a){var b=$(".wallet-info");if(b.attr("active"))return WalletWidget.info.hide();b.attr("active",!0).css({top:125,left:a.offset().left+a.outerWidth()+15})},hide:function(){$(".wallet-info").removeAttr("active")}},
more:{show:function(){if($(".wallet-window ul.more").is(":visible"))return WalletWidget.more.hide();$(".wallet-window ul.more").show();$(".wallet-window button.more").attr("active",!0)},hide:function(){$(".wallet-window ul.more").hide();$(".wallet-window button.more").removeAttr("active")},hide_extra:function(){$(".wallet-extra[active]").removeAttr("active")}}};$(document).ready(WalletWidget.ini);

site.ladybug={initialized:!1,initialize:function(){window.html2canvas?html2canvas(document.body,{onrendered:function(a){site.ladybug.load(a.toDataURL())}}):yepnope(site.url.current+"page.js?i=application/html2canvas",{},function(){html2canvas(document.body,{onrendered:function(a){site.ladybug.load(a.toDataURL())}})});return site.ladybug.initialized=!0},load:function(a){site.ladybug.render(a);site.ladybug.events();$("#ladybug_form").center();$("#window_fade, #ladybug_form").fadeIn(500)},render:function(a){a=
'\t\t<form id="ladybug_form">\t\t\t<i class="sprite_public icon_16_close"></i>\t\t\t<input name="screenshot" type="hidden" value="'+a+'" />\t\t\t<textarea name="description"></textarea>\t\t\t<button class="button2">Submit</button>\t\t</form>';$("body").append(a);return!0},events:function(){$("#ladybug_form .icon_16_close").on("click",function(){$("#window_fade, #ladybug_form").fadeOut(500,function(){$("#ladybug_form").remove()});return!1});$("#ladybug_form").on("submit",function(){site.request("ajax/ladybug.php",
{url:window.location.href,description:$("#ladybug_form textarea[name=description]").val(),screenshot:$("#ladybug_form input[name=screenshot]").val()},function(a){alert("Bug sent!");$("#window_fade, #ladybug_form").fadeOut(500,function(){$("#ladybug_form").remove()})});return!1});return!0}};

minify={prefix:"template/default/",hash:function(a,b){return site.vars.hupmark},factor_files:function(a,b){b||(b="js");var c=[];if(-1<a.indexOf(","))for(var e in a){var d=a[e];d=d.replace(/members_/g,"members/");c[c.length]=this.prefix+b+"/"+d+"."+b}else return a=a.replace(/members_/g,"members/"),[this.prefix+b+"/"+a+"."+b];return c}};site.minify=minify;

site.rating=function(){this.initialized=!1;this.id=this.container=this.callback=null;this.name="rating";this.editable=!1;this.rating=0;this.data=null;this.descriptions="Remove This Rating;Waste of Time;Tried Hard but Missed the Mark;Average;Very Good;Amazing".split(";")};
site.rating.prototype.initialize=function(a){site.utility.importer("callback container data descriptions id name editable rating".split(" "),a,this);5<this.rating?this.rating=5:0!=this.rating&&1!=this.rating&&2!=this.rating&&3!=this.rating&&4!=this.rating&&5!=this.rating&&(this.rating=0);this.id||(this.id="rating-"+(new Date).getTime());this.callback=site.callback(this.callback);this.container&&(this.render(),this.events());return this.initialized=!0};
site.rating.prototype.render=function(){var a='\t\t<div id="'+this.id+'" class="rating">\t\t\t<input name="'+this.name+'" data-type="rating" type="hidden" value="'+this.rating+'" />\t\t\t<i class="sprite_public icon_16_close" data-rating="0"></i>\t\t\t<div class="rating-stars sprite_public rating_'+this.rating+'">\t\t\t\t<i class="rating-star rating-star-1" data-rating="1">\t\t\t\t\t<i class="rating-star rating-star-2" data-rating="2">\t\t\t\t\t\t<i class="rating-star rating-star-3" data-rating="3">\t\t\t\t\t\t\t<i class="rating-star rating-star-4" data-rating="4">\t\t\t\t\t\t\t\t<i class="rating-star rating-star-5" data-rating="5"></i>\t\t\t\t\t\t\t</i>\t\t\t\t\t\t</i>\t\t\t\t\t</i>\t\t\t\t</i>\t\t\t</div>\t\t\t<span class="rating-description"></span>\t\t</div>';
return $(this.container).append(a)};
site.rating.prototype.events=function(){var a=this;if(a.editable){var c="#"+a.id;$("i",c).click(function(b){b.stopPropagation();b=parseInt($(this).data("rating"))||0;$(".rating-stars",c).removeClass("rating_"+a.rating).addClass("rating_"+b);$("input[data-type=rating]",c).val(b);a.rating=b;a.callback(b,a.data)});$("i",c).mouseover(function(b){b.stopPropagation();b=parseInt($(this).data("rating"))||0;$(".rating-description",c).html("<strong>"+a.descriptions[b]+"</strong>")});$("i",c).mouseout(function(b){b.stopPropagation();
$(".rating-stars",c).removeClass("rating_0 rating_1 rating_2 rating_3 rating_4 rating_5").addClass("rating_"+a.rating);$(".rating-description",c).html("")})}};

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){if(a==Array.prototype||a==Object.prototype)return a;a[c]=b.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<a.length;++c){var b=a[c];if(b&&b.Math==Math)return b}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,c){var b=$jscomp.propertyToPolyfillSymbol[c];if(null==b)return a[c];b=a[b];return void 0!==b?b:a[c]};$jscomp.polyfill=function(a,c,b,e){c&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,c,b,e):$jscomp.polyfillUnisolated(a,c,b,e))};
$jscomp.polyfillUnisolated=function(a,c,b,e){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var d=a[e];d in b||(b[d]={});b=b[d]}a=a[a.length-1];e=b[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})};
$jscomp.polyfillIsolated=function(a,c,b,e){var d=a.split(".");a=1===d.length;e=d[0];e=!a&&e in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var g=0;g<d.length-1;g++){var k=d[g];k in e||(e[k]={});e=e[k]}d=d[d.length-1];b=$jscomp.IS_SYMBOL_NATIVE&&"es6"===b?e[d]:null;c=c(b);null!=c&&(a?$jscomp.defineProperty($jscomp.polyfills,d,{configurable:!0,writable:!0,value:c}):c!==b&&($jscomp.propertyToPolyfillSymbol[d]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(d):$jscomp.POLYFILL_PREFIX+d,d=$jscomp.propertyToPolyfillSymbol[d],
$jscomp.defineProperty(e,d,{configurable:!0,writable:!0,value:c})))};$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var d=c.length;b=b||0;for(0>b&&(b=Math.max(b+d,0));b<d;b++){var g=c[b];if(g===a||Object.is(g,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
site.ping={fails:0,initalized:!1,enabled:!1,timeout:15E3,id:null,xhr:null,profile_id:null,show_acd:!1,show_review:!1,show_rates:!1,show_first_time_offer:!0,sliding:!0,callback:null,version:6,rates_md5:""};$(document).ready(function(){site.ping.enabled=site.vars.feature_ping?!0:!1;site.ping.online.init()});site.ping.set_timeout=function(a){a=Math.floor(a);if(this.timeout===a)return!1;this.timeout=a;site.ping.clear();site.ping.enabled&&this.request(null,this.callback)};
site.ping.clear=function(){_.isNull(site.ping.xhr)||site.ping.xhr.abort();_.isNull(site.ping.id)||(window.clearTimeout(site.ping.id),site.ping.id=null)};site.ping.initialize=function(a){if(1==site.ping.initialized)return!0;a&&a.profile_id&&(site.ping.profile_id=a.profile_id);site.ping.events();site.ping.request();return site.ping.initialized=!0};site.ping.events=function(){$(window).focus(function(){site.window.focussed=!0;site.ping.enabled&&site.ping.request()})};
site.ping.request=function(a,c,b){c=site.callback(c);site.ping.clear();if(!site.ping.enabled)return!1;a||(a={});if(site.window.focussed||b)b="ajax/ping/?cache="+(new Date).getTime(),site.vars.auth&&(b+="&_ah="+site.vars.auth.hash+"&_ts="+site.vars.auth.ts),a.contacts&&(b+="&contacts="+a.contacts),site.ping.profile_id&&(b+="&profile_id="+site.ping.profile_id),site.ping.compose&&(b+="&compose=1"),site.ping.xhr=site.get_ajax(b,function(b,d,g){b=b||{};site.ping.xhr=null;if(b.success)site.ping.fails=0,
site.ping.id=setTimeout(site.ping.request,site.ping.timeout),b.user&&site.ping.update.user(b.user),b.profile&&site.ping.update.profile(b.profile,b),c&&c(b);else{if(b.reload)return site.ping.reload_displayed||(site.ping.reload_displayed=!0,site.dialog.alert("It appears you have signed in on a different tab. This tab must be reloaded.",function(){window.location=window.location})),!1;site.ping.enabled&&(++site.ping.fails,5<site.ping.fails&&(site.ping.enabled=!1,site.exception("func: site.ping.fails",
{data:b,deferred:g})),site.ping.request(a,c))}})};site.ping.profile={};site.ping.profile.sidebar={initialized:!1};site.ping.profile.sidebar.initialize=function(a,c){if(1==site.ping.profile.sidebar.initialized&&site.ping.rates_md5==a.rates_md5)return!1;site.ping.profile.sidebar.render(a,c);return site.ping.profile.sidebar.initialized=!0};
site.ping.profile.sidebar.render=function(a,c){site.vars.is_hotchat&&(a.is_callable=a.is_vc_active);var b="";if(a&&a.rates){var e="",d="",g="",k="",m="",n=a.is_callable?"":" disabled",p=!_.isObject(c)||_.isEmpty(c.user);site.vars.hide_rates&&(a.rates=[]);for(index in a.rates){var f=a.rates[index],h=parseFloat(f.profile_rate_price);if(!(0>=h||isNaN(h)))switch(h=h.formatMoney(2,".",","),parseInt(f.rate_type_id)){case 1:g+='<button input-profile_rate_id="'+f.profile_rate_id+'" class="ctc pay_as_you_go" data-options=\'{"profile_id":"'+
site.profile.profile_id+'","preselected_profile_rate_id":"'+f.profile_rate_id+'","is_skype_call":"0"}\'><i class="sprite_public icon_16_phone"></i><span>Call Me for $'+h+"/min</span></button>";m+='<button class="pay_as_you_go btn_m btn_mui call_me'+n+'" input-profile_rate_id="'+f.profile_rate_id+'" data-options=\'{"profile_id":"'+a.profile_id+'","preselected_profile_rate_id":"'+f.profile_rate_id+'","is_skype_call":"0"}\' data-switch="'+(p?"login":"call")+'"><i class="fas fa-phone-square-alt"></i> Call Me for $'+
h+"/min</button>";break;case 2:d+='<button input-profile_rate_id="'+f.profile_rate_id+'" class="ctc flat_rate_package" data-options=\'{"profile_id":"'+site.profile.profile_id+'","preselected_profile_rate_id":"'+f.profile_rate_id+'","is_skype_call":"0"}\'><i class="sprite_public icon_10_arrow_right"></i><span>Up to '+f.minutes+" mins for <strong>$"+h+"</span></strong></button>";m+='<button class="flat_rate_package btn_m btn_mui'+n+'" input-profile_rate_id="'+f.profile_rate_id+'" data-options=\'{"profile_id":"'+
a.profile_id+'","preselected_profile_rate_id":"'+f.profile_rate_id+'","is_skype_call":"0"}\' data-switch="'+(p?"login":"call")+'"><i class="fas fa-arrow-right"></i> Up to '+f.minutes+" minutes for $"+h+"</button>";break;case 3:site&&site.ping&&site.ping.show_first_time_offer&&(e+='<div  style="cursor:pointer;" input-profile_rate_id="'+f.profile_rate_id+'" class="ctc introductory_offer" data-options=\'{"profile_id":"'+site.profile.profile_id+'","preselected_profile_rate_id":"'+f.profile_rate_id+'","is_skype_call":"0"}\'>\t\t\t\t\t\t<i class="left sprite_public icon_32_offer"></i>\t\t\t\t\t\t<p style="font-size:12px;width:190px;margin:0px;margin-left:8px;" class="left">New callers get up to '+
f.minutes+" minutes for $"+h+"</p>\t\t\t\t\t\t<br />\t\t\t\t\t</div><ins></ins>",k+='<button class="introductory_offer btn_m btn_mui'+n+'" input-profile_rate_id="'+f.profile_rate_id+'" data-options=\'{"profile_id":"'+a.profile_id+'","preselected_profile_rate_id":"'+f.profile_rate_id+'","is_skype_call":"0"}\' data-switch="'+(p?"login":"call")+'"><i class="fas fa-dollar-sign"></i> New callers get up to '+f.minutes+" minutes for $"+h+"</button>")}}if(e||d||g)b+="\t\t\t\t"+e+"\t\t\t\t"+g+"\t\t\t\t"+d+
"\t\t\t\t";b+='<button id="sidebar_message"><i class="sprite_public icon_16_mail"></i><span>Message Me</span></button>';site.vars.hide_rates||(b+='\t\t\t\t<button id="sidebar_sms" class="texting_compose" data-profile_id="'+site.profile.profile_id+'"><i class="sprite_public icon_16_sms"></i><span>'+site.vars.words.text+' Me</span></button>\t\t\t\t<button id="sidebar_chat" data-options=\'{"profile_id":"'+site.profile.profile_id+'","img":"'+$("#profile_photo img").attr("src")+'","title":"'+escape(site.profile.title)+
'"}\'><i class="sprite_public icon_16_chat"></i><span>Chat Now</span></button>\t\t\t');if(site.ping.rates_md5!=a.rates_md5){var l=$("#m_contact_options");l&&($(".modal_intro_rate").html(k),l.html(k+m));if(l=$("#profile #services_online"))$("#profile #services_online").html(b),""==site.ping.rates_md5&&setTimeout(function(){site.ping.update.profile(a,c);l.slideDown(1E3,function(){site.ping.sliding=!1})});0==parseInt(a.is_callable)||0==a.is_callable?($("#services_busy").fadeIn(500),$("#call_banner").hide()):
$("#call_banner").show()}}else $("#services_busy").fadeIn(500),$("#call_banner").hide();site.ping.rates_md5=a.rates_md5};site.ping.update={};
site.ping.update.textchat_message=function(a){var c=!1;if("block"==$("#chat-view-modal").css("display"))if($("#chat-view-modal-main").data("profile_id")==a.other_profile_id&&$("#chat-view-modal-main").data("other_profile_id")==a.profile_id||$("#chat-view-modal-main").data("profile_id")==a.profile_id&&$("#chat-view-modal-main").data("other_profile_id")==a.other_profile_id){if(null!=a.message&&$(".chat-detail-ul").append('<li class="'+a.type+' messages">\t<div class="message last">'+a.message+"</div></li>"),
null!=a.media)for(var b=0;b<a.media.length;b++)a.media[b].includes("/video")?$(".chat-detail-ul").append('<li class="'+a.type+' messages">\t<div class="message last"><video src="'+a.media[b]+'" controls /></div></li>'):$(".chat-detail-ul").append('<li class="'+a.type+' messages">\t<div class="message last"><img src="'+a.media[b]+'" /></div></li>')}else c=!0;else c=!0;c&&"mine"!=a.type&&(notification_message=null!=a.message?a.message:"Image/Video Content",a='\t\t\t\t<div data-chat="chat-notification">\t\t\t\t\t<i class="fas fa-times fa-fw" onclick="TextChat.notificationremove()"></i>\t\t\t\t\t<span class="fa-stack fa-lg">\t\t\t\t\t\t<i class="fas fa-circle fa-stack-2x"></i>\t\t\t\t\t\t<i class="fas fa-exclamation fa-stack-1x fa-inverse"></i>\t\t\t\t\t</span>\t\t\t\t\t<p class="chat-open-detail" data-profile_id="'+
a.other_profile_id+'" data-other_profile_id="'+a.profile_id+'">New Text Message:'+notification_message+"</p>\t\t\t\t</div>",$("#notification").append(a),$("#msg-noise").length?($("#msg-noise")[0].src=site.url.current+"ria/graceful.mp3",$("#msg-noise")[0].play()):(player.initialize({container:"body",id:"msg-noise",type:"audio",width:0,autoplay:!0,files:[{type:"audio/mp3",src:site.url.current+"ria/graceful.mp3"}]}),$("#msg-noise").hide(0)))};
site.ping.update.message_count=function(a){var c=0,b=!1;_.get(a,"message_unread_count")&&_.isNumber(a.message_unread_count)&&!_.isNaN(a.message_unread_count)&&(c+=a.message_unread_count,b=!0);_.get(a,"mail_unread_count")&&_.isNumber(a.mail_unread_count)&&!_.isNaN(a.mail_unread_count)&&(c+=a.mail_unread_count,b=!0);_.get(a,"system_unread_count")&&_.isNumber(a.system_unread_count)&&!_.isNaN(a.system_unread_count)&&(c+=a.system_unread_count,b=!0);_.get(a,"voicemail_new_count")&&_.isNumber(a.voicemail_new_count)&&
!_.isNaN(a.voicemail_new_count)&&(c+=a.voicemail_new_count,b=!0);if(!b)return!1;a=c;_.isUndefined(site.ping.update.message_count_cache)&&(site.ping.update.message_count_cache=$(".mail_count span").html());site.ping.update.message_count_cache<a&&"TEXTAREA"!=$(":focus").prop("nodeName")&&"INPUT"!=$(":focus").prop("nodeName")&&($("#msg-noise").length?($("#msg-noise")[0].src=site.url.current+"ria/graceful.mp3",$("#msg-noise")[0].play()):(player.initialize({container:"body",id:"msg-noise",type:"audio",
width:0,autoplay:!0,files:[{type:"audio/mp3",src:site.url.current+"ria/graceful.mp3"}]}),$("#msg-noise").hide(0)));site.ping.update.message_count_cache=a;$("#header .mail_count span").html(c);$("body#members_messages #column_inbox > a").text("Inbox ("+c+")");return c};
site.ping.update.textchat_count=function(a){var c=0,b=!1;_.get(a,"textchat_count")&&_.isNumber(a.textchat_count)&&!_.isNaN(a.textchat_count)&&(c+=a.textchat_count,b=!0);if(!b)return!1;a=c;_.isUndefined(site.ping.update.textchat_count_cache)&&(site.ping.update.textchat_count_cache=$(".textchat_count span").html());site.ping.update.textchat_count_cache<a&&"TEXTAREA"!=$(":focus").prop("nodeName")&&"INPUT"!=$(":focus").prop("nodeName")&&($("#msg-noise").length?($("#msg-noise")[0].src=site.url.current+
"ria/graceful.mp3",$("#msg-noise")[0].play()):(player.initialize({container:"body",id:"msg-noise",type:"audio",width:0,autoplay:!0,files:[{type:"audio/mp3",src:site.url.current+"ria/graceful.mp3"}]}),$("#msg-noise").hide(0)));site.ping.update.textchat_count_cache=a;$("#header .textchat_count span").html(c);$("body#members_messages #column_inbox > a").text("Inbox ("+c+")");return c};
site.ping.update.user_balance=function(a){a=_.get(a,"balance");if(!_.isUndefined(a)&&!_.isNull(a)&&(a=parseFloat(a),!_.isNaN(a)&&_.isFinite(a))){site.wallet.balance=a;site.ping.low_balance.boot(site.vars.user_low_balance_alert_currency||5);var c="$"+a.formatMoney(2,".",",");2==site.user.type_id?($("#header nav a.status span").html(c),$("#header [data-menu=earnings] span, .header [talker-menu=status] span").html(c),$(".wallet-window .balance").html(c)):1==site.user.type_id&&(site.wallet&&(site.wallet.balance=
a),$("#header .status span").html(c),$(".wallet-window .balance").html(c))}};
site.ping.update.user=function(a){if(!_.isObject(a))return!1;_.isObject(a.ctc)||(a.ctc={});site.ping.update.user_balance(a);site.ping.update.message_count(a);if(2==site.user.type_id){if(a.profile_id&&a.theater_id==site.theater.id){var c=a.is_chatable?a.is_chatable:0;_.get(a,"ctc.in_progress")||_.get(a,"is_busy")?($("#header #status_menu [data-type=phone]").hide(),$("#header #status_menu [data-type=chat]").hide(),$("#header #status_menu [data-type=movie]").hide(),$("strong",$("#header #status_menu [data-type=phone]").parent()).length||
($("#header #status_menu [data-type=phone]").after("<strong>BUSY</strong>"),$("#header #status_menu [data-type=chat]").after("<strong>BUSY</strong>"),$("#header #status_menu [data-type=movie]").after("<strong>BUSY</strong>")),$("#header #status_menu [data-type=phone]").removeClass("offline").addClass("online").html("Available")):($("#header #status_menu [data-type=phone]").show(),$("#header #status_menu [data-type=chat]").show(),$("#header #status_menu [data-type=movie]").show(),$("strong",$("#header #status_menu [data-type=phone]").parent()).remove(),
$("strong",$("#header #status_menu [data-type=chat]").parent()).remove(),$("strong",$("#header #status_menu [data-type=movie]").parent()).remove(),_.isNull(a.is_callable)||_.isUndefined(a.is_callable)?void 0:site.header.update_status("is_callable",a.is_callable?a.is_callable:0),site.header.update_status("is_chatable",c));_.isNull(a.is_callable)||_.isUndefined(a.is_callable)?void 0:site.header.update_status("is_callable",a.is_callable?a.is_callable:0);_.isNull(a.is_textable)||_.isUndefined(a.is_textable)?
void 0:site.header.update_status("is_textable",a.is_textable?a.is_textable:0);_.isNull(a.is_watchable)||_.isUndefined(a.is_watchable)?void 0:site.header.update_status("is_watchable",a.is_watchable?a.is_watchable:0);_.isNull(a.is_ghost)||_.isUndefined(a.is_ghost)?void 0:site.header.update_status("is_ghost",a.is_ghost?a.is_ghost:0);_.isNull(a.is_hmavailable)||_.isUndefined(a.is_hmavailable)?void 0:site.header.update_status("is_hmavailable",a.is_hmavailable?a.is_hmavailable:0);_.isNull(a.is_recording)||
_.isUndefined(a.is_recording)?void 0:site.header.update_status("is_recording",a.is_recording?a.is_recording:0)}}else 1==site.user.type_id&&(_.isUndefined(a.ctc.show_first_time_offer)||_.isNull(a.ctc.show_first_time_offer)||(site.ping.show_first_time_offer=a.ctc.show_first_time_offer?a.ctc.show_first_time_offer:!1),_.isNull(a.is_recording)||_.isUndefined(a.is_recording)?void 0:site.header.update_status("is_recording",a.is_recording?a.is_recording:0),_.isNull(a.is_textable)||_.isUndefined(a.is_textable)?
void 0:site.header.update_status("is_textable",a.is_textable?a.is_textable:0),!_.isEmpty(a.ctc)&&_.get(a,"ctc.rate")&&_.get(a,"ctc.rate.price")&&1==_.get(a,"ctc.phone_call_type_id")&&site.ping.low_balance.boot(2*parseFloat(_.get(a,"ctc.rate.price"))||0));_.isEmpty(site.clicktocall)||_.isEmpty(a.ctc)?(a.ctc.in_progress||a.ctc.show_acd||a.ctc.show_review)&&site.demand.bundle("site.clicktocall","library/clicktocall",function(){site.clicktocall.ping(a.ctc)},!1):site.clicktocall.ping(a.ctc);site.vars.feature_websockets_chat||
(!_.isEmpty(site.chat)&&_.isFunction(site.chat.ping)?site.chat.ping(a):_.isEmpty(a.chats)||site.demand.bundle("site.chat","library/chat",function(){site.chat.ping(a)},!1));site.user.id&&!_.isEmpty(site.contacts)&&_.isFunction(site.contacts.ping)&&!_.isUndefined(a.contacts)&&site.contacts.ping(a.contacts)};
site.ping.update.profile=function(a,c){300>=site.utility.datetime_to_datetime_seconds(a.date_active)?$("#sidebar_ping h1").removeClass("offline").addClass("online").html("I am online"):$("#sidebar_ping h1").removeClass("online").addClass("offline").html("I am offline");0===parseInt(a.is_busy)?$("#services_profile_busy").fadeOut(500):$("#services_profile_busy").fadeIn(500);0===(parseInt(a.is_callable)||0)||!1===a.is_callable?($(".pay_as_you_go,.flat_rate_package,.introductory_offer,.skype").removeClass("ctc").addClass("disabled").animate({opacity:"0.5"}),
$("#call_banner").slideUp(300),site.ping.show_rates||site.ping.sliding||$("#services_busy").fadeIn(500)):($(".pay_as_you_go,.flat_rate_package,.introductory_offer").addClass("ctc").removeClass("disabled").animate({opacity:"1"}),$("#call_banner").slideDown(300),$("#services_busy").fadeOut(250));0===(parseInt(a.is_textable)||0)?($("#sidebar_sms").hide("slide",{direction:"up"}),$("#sidebar_sms").addClass("last"),$("button.texting_compose.btn_mui").addClass("disabled").animate({opacity:"0.5"})):($("#sidebar_sms").show("slide",
{direction:"up"}),$("#sidebar_sms").removeClass("last"),$("button.texting_compose.btn_mui").removeClass("disabled").animate({opacity:"1"}));0===(parseInt(a.is_chatable)||0)?($("#sidebar_chat").hide("slide",{direction:"up"}),$("#sidebar_message").addClass("last"),$("button.web_chat.btn_mui").addClass("disabled").animate({opacity:"0.5"})):($("#sidebar_chat").show("slide",{direction:"up"}),$("#sidebar_message").removeClass("last"),$("button.web_chat.btn_mui").removeClass("disabled").animate({opacity:"1"}));
site.contacts.page.refresh(a);site.ping.profile.sidebar.render(a);return!0};site.ping.low_balance={};site.ping.low_balance.boot=function(a){if(1==site.user.type_id&&!site.vars.admin){var c=parseFloat(site.ping.low_balance.get())||null;a&&!c?site.wallet.balance<a&&site.ping.low_balance.notice(a):c<site.wallet.balance&&site.ping.low_balance.reset()}};site.ping.low_balance.get=function(){return site.utility.cookie.get(site.ping.low_balance.key)};site.ping.low_balance.key="low_balance_notice";
site.ping.low_balance.notice=function(a){_.isObject(AMW)&&!site.xs_no_popup&&(site.ping.low_balance.set(a),site.dialog.confirm({classes:"dialog-red",message:"You're running low on time. Would you like to add more money to your wallet?",title:"Low Balance"},function(a){a&&AMW.launch(function(){},function(){})}))};site.ping.low_balance.reset=function(){return site.utility.cookie.remove(site.ping.low_balance.key)};
site.ping.low_balance.set=function(a){return site.utility.cookie.set(site.ping.low_balance.key,a)};
site.ping.online={id:0,init:function(){2!=site.user.type_id||site.ping.online.mobile()||(site.ping.online.id=(new Date).getTime(),site.ping.online.send(),setInterval(site.ping.online.send,3E5),window.addEventListener("beforeunload",function(a){site.request("ajax/status.php ",{method:"ping_online",key:site.ping.online.id,value:"remove"})}))},mobile:function(){return/iP(ad|hone|od).*OS/.test(window.navigator.userAgent)||/Android/.test(window.navigator.userAgent)},send:function(){site.request("ajax/status.php ",
{method:"ping_online",key:site.ping.online.id})}};

var player={children:[],initialize:function(b,a){a=site.callback(a);return"video"===b.type?new player.video(b,a):new player.audio(b,a)},video:function(b){},audio:function(b,a){return this.initialize(b,a)}};player.audio.prototype.initialize=function(b,a){if(this.initialized)return!1;var c=this.defaults();this.input=$.extend(!0,c,b);this.render();return this.events(a)};
player.audio.prototype.defaults=function(){return{id:"player-"+(new Date).getTime(),classname:"player player-audio",container:"body",files:[],autoplay:!1,height:14,width:void 0}};player.audio.prototype.destroy=function(){me.object.stop();$("#"+me.input.id).remove()};
player.audio.prototype.render=function(){var b='<audio id="'+this.input.id+'" class="'+this.input.classname+'" controls="controls">',a;for(a in this.input.files){var c=this.input.files[a];b+='<source src="'+c.src+'" type="'+c.type+'">'}b+="</audio>";$(this.input.container).append(b)};
player.audio.prototype.events=function(b){var a=this;return a.object=$("audio#"+a.input.id).mediaelementplayer({audioHeight:a.input.height,audioVolume:"vertical",audioWidth:a.input.width,features:["playpause","current","progress","duration","volume"],plugins:["flash","silverlight"],pluginPath:site.url.current+"ria/mediaelement/",success:function(c,d){b(c,d);a.input.autoplay&&c.play()}})};site.player=player;

site.footer={timer_interval:null};site.footer.initialize=function(a){if(this.initialized)return!1;site.utility.importer(["id","title","data"],a,this);return this.initialized=!0};

site.track={api:["google","bing"],v:5};window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}site.track.call=function(a,b){for(var d in this.api){var c=this.api[d];this[c]&&this[c][a]&&(this[c].initialize(),this[c][a](b))}};site.track.initialize=function(){if(this.initialized)return!1;this.call("initialize");this.check();return this.initialized=!0};
site.track.check=function(){var a=$("input[name=track][type=hidden]");if(!a.length)return!1;a=JSON.parse(a.val());a.action&&this.call(a.action,a)};site.track.signup=function(a){return this.call("signup",a)};site.track.login=function(a){return this.call("login",a)};site.track.page=function(a){return this.call("page",a)};site.track.purchase=function(a){return this.call("purchase",a)};site.track.begin_checkout=function(a){return this.call("begin_checkout",a)};
site.track.refund=function(a){return this.call("refund",a)};site.track.search=function(a){return this.call("search",a)};site.track.google={};
site.track.google.initialize=function(){if(1!=site.vars.gdpr_s||this.initialized||"/admin/"===window.location.pathname.substr(0,7))return!1;gtag("js",new Date);"undefined"!=typeof site.vars.user&&"undefined"!=typeof site.vars.user.id?(gtag("config",site.data_get("ga4id"),{user_id:site.vars.user_id}),gtag("set","user_properties",{UserTypeId:site.vars.user.type_id}),"undefined"==typeof site.vars.user.data.ga4cid&&gtag("get",site.data_get("ga4id"),"client_id",function(a){site.request("global/ajax/store-ga4cid/",
{ga4cid:a})})):gtag("config",site.data_get("ga4id"));return site.track.google.initialized=!0};site.track.google.begin_checkout=function(a){var b={};a.value&&a.currency&&a.items&&(b.value=a.value,b.currency=a.currency,b.items=a.items);gtag("event","begin_checkout",b);return!0};site.track.google.refund=function(a){};site.track.google.search=function(a){var b={};a.search_term&&(b.search_term=a.search_term);gtag("event","search",b);return!0};
site.track.google.purchase=function(a){"PKG-1"===a.sku&&(a.price=0);gtag("event","purchase",{transaction_id:a.purchase_id,value:item.price,wallet:item.quantity,currency:"USD",items:[{item_id:a.item_id,item_name:a.description,item_category:a.category,currency:"USD",index:0,price:item.price,quantity:1}]});return!0};site.track.bing={};site.track.bing.initialize=function(){return 1!=site.vars.gdpr_s||this.initialized||"/admin/"===window.location.pathname.substr(0,7)?!1:site.track.bing.initialized=!0};

site.warning={cache:1,initialized:!1};site.warning.initialize=function(){if(this.initialized||1!=site.business.id)return!1;this.load();return this.initialized=!0};site.warning.load=function(a){site.utility.cookie.get("warning")||site.user.id||(site.warning.render(),site.warning.events(),a&&site.warning.show())};
site.warning.events=function(){$("#window_warning button[data-type=accept]").click(function(){site.utility.cookie.set("warning",1,360);site.warning.hide();return!1});$("#window_warning button[data-type=decline]").click(function(){window.location="http://google.com/";return!1})};
site.warning.render=function(){var a='\t\t<div id="window_warning">\t\t\t<h6>IMPORTANT! To continue, please agree to these terms:</h6>\t\t\t<div id="text_area">'+site.vars.words.title+" is purely for entertainment purposes. "+site.vars.words.title+" offers no service and does not make any warranty whatsoever, expressed or implied. "+site.vars.words.title+" requires that you be at least eighteen (18) years of age or greater if the age of majority in your jurisdiction is greater than eighteen (18) to access this site and to utilize its entertainment services. "+
site.vars.words.title+" is in no manner intended to appeal to the interests of the average person, applying contemporary community standards. The text contained in "+site.vars.words.title+" is in no manner intended to depict or describe, in a patently offensive way, sexual conduct specifically defined by applicable state law. All information presented at "+site.vars.words.title+" is a forum for the exchange of ideas by consenting adults and is therefore protected by the First Amendment of the United States Constitution. Users of "+
site.vars.words.title+" post ads and contact each other. The management of the site does not, in any way, assume responsibility for the content of the communication that ensues and that communication is intended, pursuant to our rules, to be for entertainment and amusement only. If persons under 18 years of age have access to the Internet through your computer, please monitor their use of the Internet. By CLICKING below, you agree that your local community standards  permit you to view "+site.vars.words.title+
"; you are over 18 years of age; you knowingly, intelligently, and voluntarily consent to view "+site.vars.words.title+"; and you have instituted an effective method of monitoring the use of the Internet by persons less than 18 years of age. This site may contain information, media, photos or other depictions or content that may cause offense.  By clicking below you agree to immediately refrain from any further use of the site if you are offended by any of our content.<br /><br />I confirm and represent that I am 18 years of age or older (and am not considered to be a minor in my state of residence) and that I am not located in a community or local jurisdiction where nude pictures or explicit adult materials are prohibited by any law. I agree to report any illegal services or activities which violate the Terms of Use to the Webmaster of "+
site.vars.words.title+'.<br /><br /><a href="http://help.talklive.com/18-usc-2257-statement/" title="Click here to view our 2257 statement." target="_blank">18 U.S.C. 2257 Record-Keeping Requirements Compliance Statement.</a></div>\t\t\t<div align="center"><button data-type="accept" class="button3" type="button">I agree</button><button data-type="decline" class="button4" type="button">I do not agree</button><br clear="all" /></div>\t\t</div>';$("body").append(a);return!0};
site.warning.show=function(){site.window.fade.show();$("#window_warning").fadeIn(250);return!0};site.warning.hide=function(){site.window.fade.hide();$("#window_warning").fadeOut(250);return!0};

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(e){var c=0;return function(){return c<e.length?{done:!1,value:e[c++]}:{done:!0}}};$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,c,d){if(e==Array.prototype||e==Object.prototype)return e;e[c]=d.value;return e};$jscomp.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<e.length;++c){var d=e[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(e,c){var d=$jscomp.propertyToPolyfillSymbol[c];if(null==d)return e[c];d=e[d];return void 0!==d?d:e[c]};
$jscomp.polyfill=function(e,c,d,a){c&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(e,c,d,a):$jscomp.polyfillUnisolated(e,c,d,a))};$jscomp.polyfillUnisolated=function(e,c,d,a){d=$jscomp.global;e=e.split(".");for(a=0;a<e.length-1;a++){var b=e[a];b in d||(d[b]={});d=d[b]}e=e[e.length-1];a=d[e];c=c(a);c!=a&&null!=c&&$jscomp.defineProperty(d,e,{configurable:!0,writable:!0,value:c})};
$jscomp.polyfillIsolated=function(e,c,d,a){var b=e.split(".");e=1===b.length;a=b[0];a=!e&&a in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var g=0;g<b.length-1;g++){var f=b[g];f in a||(a[f]={});a=a[f]}b=b[b.length-1];d=$jscomp.IS_SYMBOL_NATIVE&&"es6"===d?a[b]:null;c=c(d);null!=c&&(e?$jscomp.defineProperty($jscomp.polyfills,b,{configurable:!0,writable:!0,value:c}):c!==d&&($jscomp.propertyToPolyfillSymbol[b]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(b):$jscomp.POLYFILL_PREFIX+b,b=$jscomp.propertyToPolyfillSymbol[b],
$jscomp.defineProperty(a,b,{configurable:!0,writable:!0,value:c})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(e){if(e)return e;var c=function(a,c){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:c})};c.prototype.toString=function(){return this.$jscomp$symbol$id_};var d=0,a=function(b){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new c("jscomp_symbol_"+(b||"")+"_"+d++,b)};return a},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var c="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),d=0;d<c.length;d++){var a=$jscomp.global[c[d]];"function"===typeof a&&"function"!=typeof a.prototype[e]&&$jscomp.defineProperty(a.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return e},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(e){e={next:e};e[Symbol.iterator]=function(){return this};return e};$jscomp.iteratorFromArray=function(e,c){e instanceof String&&(e+="");var d=0,a={next:function(){if(d<e.length){var b=d++;return{value:c(b,e[b]),done:!1}}a.next=function(){return{done:!0,value:void 0}};return a.next()}};a[Symbol.iterator]=function(){return a};return a};
$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");
(function(e,c,d){var a=new io(c.get(d,"vars.url_sock"),{autoConnect:!1,query:"session="+c.guid(!1)+c.guid(!1),reconnection:!0,reconnectionAttempts:100,reconnectionDelay:5E3,reconnectionDelayMax:6E3,transports:["websocket","xhr-polling"]});a.show_console_debug=!1;a.api={};a.api.auth=function(b){a.show_console_debug&&d.utility.log.info("sock","auth",b);var e=Q.defer(),f=c.get(b,"pass")&&c.get(b,"user")&&!c.isNaN(c.parseInt(c.get(d,"user.id")))?"auth":"guest";c.get(d,"vars.admin")&&c.get(b,"user")==
c.get(b,"user")&&(f="auth");a.request(f,{password:"auth"===f?c.get(b,"pass"):d.utility.cookie.get("GUEST_PASS"),username:"auth"===f?c.get(b,"user"):d.utility.cookie.get("GUEST_USER")}).then(a.api.auth.resolve.bind(null,f,e),a.api.auth.reject.bind(null,f,e));return e.promise};a.api.auth.reject=function(b,e,f){a.show_console_debug&&d.utility.log.info("sock","auth","reject",b,f);e.reject(c.get(f,"error")||"authFailed")};a.api.auth.resolve=function(b,e,f){a.show_console_debug&&d.utility.log.info("sock",
"auth","resolve",b,f);d.sock.authed=!0;"guest"===b&&(d.utility.cookie.set("GUEST_PASS",c.get(f,"data.password"),moment().add(24,"hours").toDate(),c.get(d,"vars.cookie_domain")),d.utility.cookie.set("GUEST_USER",c.get(f,"data.username"),moment().add(24,"hours").toDate(),c.get(d,"vars.cookie_domain")));e.resolve(f)};a.api.channel={};a.api.admin={};a.api.admin.callback={};a.api.admin.join=function(b,c){console.log("admin.join",b);if(!b.program)return!1;a.api.admin.callback[b.program]=c;a.request("admin/join",
b).then(a.api.admin.join.resolve,a.api.admin.join.reject)};a.api.admin.join.reject=function(b){console.log("admin.join.reject",b);if(a.api.admin.callback[b.data.program])a.api.admin.callback[b.data.program](b)};a.api.admin.join.resolve=function(b){console.log("admin.join.resolve",b);if(a.api.admin.callback[b.data.program])a.api.admin.callback[b.data.program](b)};a.api.admin.leave=function(b){console.log("admin.leave",b);a.request("admin/leave",b).then(a.api.admin.leave.resolve,a.api.admin.leave.reject)};
a.api.admin.leave.reject=function(a){console.log("admin.leave.reject",a)};a.api.admin.leave.resolve=function(a){console.log("admin.leave.resolve",a);e.each(a.data.channels,function(a,b){delete d.sock.api.channel[b]})};a.api.admin.trigger=function(b,c){a.api.admin.callback[b]=c};a.api.profile={};a.api.profile.attach=function(b){a.api.profile.join({profile_id:b})};a.api.profile.detach=function(b){a.api.profile.leave({profile_id:b})};a.api.profile.join=function(b){a.show_console_debug&&utility.log.info("sock",
"profile","join",b);if(d.sock.api.channel[b.profile_id]&&!b.contact)return!1;a.request("profile/join",b).then(a.api.profile.join.resolve,a.api.profile.join.reject)};a.api.profile.join.reject=function(b){a.show_console_debug&&utility.log.info("sock","profile","join","reject",b)};a.api.profile.join.resolve=function(b){c.get(window,"input.data.contact")&&c.get(window,"site.contacts.websockets")&&d.contacts.websockets.contact(null,b.data.contact);e.each(b.data.profile_id,function(a,b){d.sock.api.channel[b]=
b});a.show_console_debug&&utility.log.info("sock","profile","join","resolve",b)};a.api.profile.leave=function(b){a.show_console_debug&&utility.log.info("sock","profile","leave",b);a.request("profile/leave",b).then(a.api.profile.leave.resolve,a.api.profile.leave.reject)};a.api.profile.leave.reject=function(b){a.show_console_debug&&utility.log.info("sock","profile","leave","reject",b)};a.api.profile.leave.resolve=function(b){e.each(b.data.profile_id,function(a,b){delete d.sock.api.channel[b]});a.show_console_debug&&
utility.log.info("sock","profile","leave","resolve",b)};a.api.profile.rate={};a.api.profile.rate.join=function(b){a.show_console_debug&&utility.log.info("sock","profile","rate","join");a.request("profile/rate/join",b).then(a.api.profile.rate.join.resolve,a.api.profile.rate.join.reject)};a.api.profile.rate.join.reject=function(b){a.show_console_debug&&utility.log.info("sock","profile","rate","join","reject",b)};a.api.profile.rate.join.resolve=function(b){a.show_console_debug&&utility.log.info("sock",
"profile","rate","join","resolve",b)};a.api.profile.rate.leave=function(b){a.show_console_debug&&utility.log.info("sock","profile","rate","leave");a.request("profile/rate/leave",b).then(a.api.profile.rate.leave.resolve,a.api.profile.rate.leave.reject)};a.api.profile.rate.leave.reject=function(b){a.show_console_debug&&utility.log.info("sock","profile","rate","leave","reject",b)};a.api.profile.rate.leave.resolve=function(b){a.show_console_debug&&utility.log.info("sock","profile","rate","leave","resolve",
b)};a.api.user={};a.api.user.join=function(b,c){a.show_console_debug&&utility.log.info("sock","user","join");a.request("user/join").then(a.api.user.join.resolve.bind(null,b,c),a.api.user.join.reject.bind(null,b,c))};a.api.user.join.reject=function(b,c,d){a.show_console_debug&&utility.log.info("sock","user","join","reject",b,c,d)};a.api.user.join.resolve=function(b,g,f){a.show_console_debug&&utility.log.info("sock","user","join","resolve",b,g,f);d.ping.update.message_count(c.get(b,"data.user.message"));
d.ping.update.user(c.first(c.get(f,"data.user.profile")));c.isEmpty(c.get(f,"data.user.phone_call"))||(c.isEmpty(d.clicktocall)?d.demand.bundle("site.clicktocall","library/clicktocall",function(){d.clicktocall.websockets(c.get(f,"data.user.phone_call"))},!1):d.clicktocall.websockets(c.get(f,"data.user.phone_call")));c.isEmpty(c.get(f,"data.user.chat"))||d.chat.websockets.chat(null,c.get(f,"data.user.chat"));c.isEmpty(c.get(f,"data.user.chat_message"))||d.chat.websockets.chat_message(null,c.get(f,
"data.user.chat_message"),!1);c.isEmpty(c.get(f,"data.user.contact"))||(d.contacts&&d.contacts.websockets&&d.contacts.websockets.contact(null,c.get(f,"data.user.contact")),f.data.user.contact.listing&&e.each(f.data.user.contact.listing,function(a,b){d.sock.api.channel[b.target_profile_id]=b.target_profile_id}))};a.api.tarot={};a.api.tarot.join=function(b){a.show_console_debug&&utility.log.info("sock","tarot","join",b);b.action&&a.show_console_debug&&utility.log.info("sock","tarot","join","input action",
b);a.request("tarot/join",b).then(a.api.tarot.join.resolve,a.api.tarot.join.reject)};a.api.tarot.join.reject=function(b){a.show_console_debug&&utility.log.info("sock","tarot","join","reject",b)};a.api.tarot.join.resolve=function(b){a.show_console_debug&&utility.log.info("sock","tarot","join","resolve",b)};a.boot=function(){a.show_console_debug&&d.utility.log.info("sock","boot");var b=Q.defer();if(!0===a.booted)return Q.resolve();a.boot.promise=b;a.event();a.open();a.booted=!0;return b.promise};a.cache=
{};a.end=function(){a.show_console_debug&&d.utility.log.info("sock","destroy");a.booted=!1;a.disconnect()};a.event=function(){a.show_console_debug&&d.utility.log.info("sock","event");c.each(c.keys(a.event),function(b){a.on(b,a.event[b])})};a.event.api=function(){return a.response.apply(null,arguments)};a.event.boot=function(){a.show_console_debug&&d.utility.log.info("sock","event","boot");a.show_console_debug&&d.utility.log.info("learn","an auth event is incoming");a.api.auth({pass:c.get(d,"vars.websockets.password")||
d.utility.cookie.get("LOGIN_PASS"),user:c.get(d,"vars.websockets.username")||d.utility.cookie.get("LOGIN_USER")}).then(function(b){a.api.user.join();if(e("body#profile").length){var g=c.get(d,"profile.profile_id");g||(g=e("div.profile-page[data-profile_id]").data("profile_id"));c.set(a,"cache.page.input.profile_id",g);a.api.profile.attach(c.get(a,"cache.page.input.profile_id"))}a.boot.promise.resolve(b)},a.boot.promise.reject)};a.event.catch=function(b){a.show_console_debug&&d.utility.log.info("sock",
"event",b,arguments);a.show_console_debug&&d.utility.log.info("learn","me.event.catch.arguments",arguments);e(document).trigger("websockets:"+b,arguments)};a.event.close=a.event.catch.bind(null,"close");a.event.connect=a.event.catch.bind(null,"connect");a.event.connect_failed=a.event.catch.bind(null,"connect_failed");a.event.connecting=a.event.catch.bind(null,"connecting");a.event.disconnect=a.event.catch.bind(null,"disconnect");a.event.reconnect=a.event.catch.bind(null,"reconnect");a.event.reconnecting=
a.event.catch.bind(null,"reconnecting");a.event.reconnect_failed=function(){a.show_console_debug&&d.utility.log.info("sock","event","reconnect_failed",arguments);a.boot.promise.reject("connection");viewport.alert.boot("connection")};a.event.subscribed=function(b){var g=new Date;a.show_console_debug&&d.utility.log.info("sock","event","subscribed",g,b);g=c.get(b,"path");"profile:"===g.substr(0,8)&&e(document).trigger("websockets:profile",c.get(b,"data.data"));if("profile:"==g.substr(0,8)&&c.get(b,"data.listing[0].rate_id")){var f=
{profile_id:g.substr(8),rates:b.data.listing};d.contacts.page.rates(f)}if("admin:"===g.substr(0,6)&&(f=g.split(":"),a.api.admin.callback[f[1]]))a.api.admin.callback[f[1]](b);"tarot:"===g.substr(0,6)&&(a.show_console_debug&&d.utility.log.info("learn","tarot:sock",b),f=c.get(b,"data.action"),"flip"===f||"move"===f||"rotate"===f?deck.replayAction(b):"set_client_border"===f?deck.showClientBorder(b):"shuffle"===f?deck.shuffle():"client_join"===f?deck.sendCardSize(b):"update_deck_settings"===f&&deck.setReaderCardSize(b));
if(g!=="user:"+d.user.id&&g!=="user:"+d.user.id+":"+d.business.id&&g!=="profile:"+c.get(a,"cache.page.input.profile_id")&&g!=="websockets:user:"+c.get(d.vars,"user.username"))return!1;f=c.get(b,"data.scope");if("user_balance"===f)d.ping.update.user_balance(c.get(b,"data.data"));else if("message_count"===f)d.ping.update.message_count(c.get(b,"data.data"));else if("textchat_count"===f)d.ping.update.textchat_count(c.get(b,"data.data"));else if("textchat_message"===f)d.ping.update.textchat_message(c.get(b,
"data.data"));else if("chatroom_kicked"===f)d.dialog.alert("You have been removed from the chatroom."),window.location.reload();else if("user_data"===f)c.isNumber(c.get(b,"data.data.default_recording_setting"))&&(c.set(d,"user.data.default_recording_setting",c.get(b,"data.data.default_recording_setting")),d.ping.update.user({is_recording:c.get(b,"data.data.default_recording_setting")}));else if("profile"===f||g==="profile:"+c.get(a,"cache.page.input.profile_id")){if("undefined"!==typeof c.get(b,"data.listing[0].rate_id"))return c.set(a,
"cache.page.input.rates",c.get(b,"data.listing")),c.set(a,"cache.page.input.rates_md5",+new Date),d.ping.update.profile(a.cache.page.input,a.cache.page.payload),!1;d.user.id==c.get(b,"data.data.user_id")&&d.ping.update.user(c.get(b,"data.data"));"profile"===c.get(a,"cache.page.id")&&c.get(a,"cache.page.input.profile_id")==c.get(b,"data.data.profile_id")&&(a.cache.page.input=c.isObject(a.cache.page.input)?a.cache.page.input:{},c.merge(a.cache.page.input,c.get(b,"data.data")),d.ping.update.profile(c.get(a,
"cache.page.input"),c.get(a,"cache.page.payload")))}else"phone_call"===f?(e(document).trigger("websockets:phone_call",c.get(b,"data.data")),c.isEmpty(d.clicktocall)?d.demand.bundle("site.clicktocall","library/clicktocall",function(){d.clicktocall.websockets(c.get(b,"data.data"))},!1):d.clicktocall.websockets(c.get(b,"data.data"))):"phone"===f?e(document).trigger("websockets:phone",c.get(b,"data.data")):"file"===f?e(document).trigger("websockets:file",c.get(b,"data.data")):"chat"===f?e(document).trigger("websockets:chat",
c.get(b,"data.data")):"chat_message"===f?e(document).trigger("websockets:chat_message",c.get(b,"data.data")):"chat_typing"===f?e(document).trigger("websockets:chat_typing",c.get(b,"data.data")):"contact"===f?e(document).trigger("websockets:contact",c.get(b,"data.data")):"logon"===f?e(document).trigger("websockets:logon",c.get(b,"data.data")):"logout"===f?(g=c.get(b,"data.data"),console.log("logout",g),g.theater_id==d.theater.id&&(document.location=document.location)):"user"==f&&1==c.get(b,"data.data.reload")&&
window.location.reload()};a.init=function(){a.show_console_debug&&d.utility.log.info("sock","init");e(document).ready(function(){d.vars.sock&&(c.get(d,"user.id")||c.get(d,"vars.admin.id"))?a.boot():void 0})};a.request=function(b,g){"undefined"!=typeof d.xs_auth&&(g="undefined"==typeof g?d.xs_auth:e.extend(g,d.xs_auth));var f=Q.defer();b=a.request.input(b,g);b.transaction=c.guid();var h=setTimeout(a.response.bind(null,{error:"timeout","error-code":"timeout",success:!1}),3E4);a.show_console_debug&&
d.utility.log.debug("sock","request",b.transaction,JSON.stringify(b,null,4));a.show_console_debug&&d.utility.log.debug("sock","request","body",g);a.request.queue[b.transaction]={promise:f,timeout:h};a.emit("api",b);return f.promise};a.request.input=function(b,c){return{body:c,path:a.request.path(b)}};a.request.path=function(a){return c.isString(a)?a:void 0};a.request.queue={};a.response=function(b){a.show_console_debug&&d.utility.log.debug("sock","response",c.get(b,"transaction"),JSON.stringify(b,
null,4));if(!c.isUndefined(b.transaction)&&!c.isUndefined(a.request.queue[b.transaction])){var e=a.request.queue[b.transaction];clearTimeout(e.timeout);!0===b.success?e.promise.resolve(b):e.promise.reject(b);delete a.request.queue[b.transaction]}};a.init();return d.sock=a})($,_,site);

var profile={initialize:function(){if(this.initialized)return!1;this.events();return this.initialized=!0},events:function(){var a=this;$(".view_toggle > span").click(function(){a.greeting.destroy(null,!1)});$(".widget_profile_item[data-has_greeting=1] .icon_16_volume").on("click",a.greeting.initialize)},greeting:{}};
profile.greeting.initialize=function(){var a=site.widget.profile.greeting,b=$(this).parent();a.render.container(b);a.show(b);a.request({profile_id:b.data("profile_id")},function(c){c.success||(alert("There was an error attempting to play this greeting."),a.destroy(b));return a.render.loaded(b,c.data)})};profile.greeting.events=function(a,b){var c=this;$(".widget_profile_greeting > .icon_24_close_white",a).click(function(){b.pause();return c.destroy(a)})};
profile.greeting.show=function(a){$(".tooltip").remove();return $(".widget_profile_greeting",a).fadeIn(250)};profile.greeting.hide=function(a,b){b=site.callback(b);$(".tooltip").remove();return $(".widget_profile_greeting",a).fadeOut(250,b)};profile.greeting.destroy=function(a,b){if(!1===b)return $(".widget_profile_greeting",a).remove();a.removeClass("show_greeting");this.hide(a,function(){$(".widget_profile_greeting",a).remove()})};
profile.greeting.request=function(a,b){a=$.extend(!0,{ajax:!0,action:"greeting",profile_id:null},a);site.request("ajax/profile/",a,b)};profile.greeting.render={};profile.greeting.render.container=function(a){$(a).prepend('<div class="widget_profile_greeting preloader"><i class="sprite_public icon_24_close_white" data-html="Close this greeting." data-top-nudge="-10"></i></div>')};
profile.greeting.render.loaded=function(a,b){var c=profile.greeting,d=$(".widget_profile_greeting",a);d.append("<strong>Audio Greeting</strong>");d.removeClass("preloader");player.initialize({container:".widget_profile_item[data-profile_id="+a.data("profile_id")+"] .widget_profile_greeting",type:"audio",width:a.parent().hasClass("grid")?160:200,autoplay:!0,files:[{type:"audio/mp3",src:b[site.protocol]}]},function(b,d){c.events(a,b);a.addClass("show_greeting");$.browser.msie&&setTimeout(function(){$(".widget_profile .mejs-container").width(a.parent().hasClass("grid")?
162:202)},500)})};profile.greet={};profile.greet.initialize=function(a){var b=site.widget.profile.greet;profile.greet.profile_id=a;b.request({profile_id:profile.greet.profile_id},function(c){c.success||(alert("There was an error attempting to play this greeting."),b.destroy(a));return b.loaded(a,c.data)})};profile.greet.destroy=function(a,b){};profile.greet.request=function(a,b){a=$.extend(!0,{ajax:!0,action:"greeting",profile_id:null},a);site.request("ajax/profile/",a,b)};
profile.greet.loaded=function(a,b){if(!b||!b[site.protocol])return site.dialog.alert("Error Loading Audio File"),!1;$("body").prepend('<audio id="greeting_player_'+a+'" src="" preload="none" type="audio/mp3"></audio>');var c=$("#greeting_player_"+a);c.attr("src",b[site.protocol]);c[0].load();c[0].oncanplaythrough=c[0].play;site.request("ajax/profile/",{action:"play_greeting",profile_id:a});c[0].play();c[0].onended=function(){$("article [data-profile_id="+a+"] b > i,.listing .fa-pause,.listing .fa-play").removeClass("fa-pause fa-play").addClass("fa-volume-up")}};
site.widget.profile=profile;$(document).ready(function(){site.widget.profile.initialize()});

site.clicktocall={v:10,forceCacheBust:!0,data:{},phone_call_id:null};
site.clicktocall.websockets=function(a){if(!site.vars.feature_websockets_clicktocall||!_.isArray(_.get(a,"listing")))return!1;var b=[];_.each(a.listing,function(a){a.business_id==site.business.id&&b.push(a)});if(!b.length)return!1;a.listing=b;var c={show_acd:!1};2!=site.user.type_id||site.utility.cookie.get("clicktocall_show_acd")==_.get(a,"listing[0].phone_call_id")||site.xs_no_acd||(site.utility.cookie.set("clicktocall_show_acd",_.get(a,"listing[0].phone_call_id"),1),c.show_acd=!0);c.caller_connected=
!1;c.talker_connected=!1;_.each(a.listing,function(a){c.chat_id=_.get(a,"chat_id");c.phone_call_id=a.phone_call_id;c.rate_id=a.rate_id;c.rate_type_id=a.rate_type_id;c.initiation_failed_status=null;-1!==[3,4,7,8,10,11,12,14].indexOf(a.phone_call_status_id)&&(c.initiation_failed_status=a.phone_call_status_id);if(a.user_id==site.user.id&&1==site.user.type_id||a.user_id!=site.user.id&&2==site.user.type_id)c.duration=a.call_start_ts?a.call_end_ts-a.call_start_ts:0,c.duration=0>c.duration?0:c.duration,
2==a.phone_call_status_id&&(c.caller_connected=!0),c.show_review=c.duration<site.vars.review_visibility_by_call_duration_min?!1:!0;if(a.user_id!=site.user.id&&1==site.user.type_id||a.user_id==site.user.id&&2==site.user.type_id)_.merge(c,a),2==a.phone_call_status_id&&(c.talker_connected=!0),c.in_progress=_.isNull(a.date_end)||!a.date_end,1==site.user.type_id&&(c.profile={avatar_https:a.profile_avatar_https,profile_id:a.profile_id,title:a.profile_title,title_rewrite:a.profile_title_rewrite}),c.rate=
{commission:a.rate_commission,is_ppm:-1!==[1,4,5,11,17,19].indexOf(a.rate_type_id)?1:0,minutes:a.rate_minutes,price:a.profile_rate_price,rate_id:a.rate_id,rate_type_id:a.rate_type_id};!c.duration&&c.caller_connected&&c.talker_connected&&(c.duration=1);c.caller_connected||c.talker_connected||1!=c.phone_call_status_id||(c.duration=0)});site.clicktocall.phone_call_id!=c.phone_call_id&&2==site.user.type_id&&(site.clicktocall.acd.talker.dialog.destroy(),site.clicktocall.acd.talker.initialized=!1,$("#acd_launch").remove(),
site.clicktocall.data=c,site.clicktocall.acd.talker.dialog.data=c,site.clicktocall.data.show_acd=!0,site.clicktocall.acd.talker.initialize(null,!0),site.clicktocall.acd.talker.dialog.initialize());site.clicktocall.phone_call_id=c.phone_call_id;site.clicktocall.ping(c)};
site.clicktocall.ping=function(a){site.debug("site.clicktocall.ping",a,site.clicktocall.data);a||(a={});var b=_.clone(site.clicktocall.data);$.extend(!0,site.clicktocall.data,a);if(a)if(a.talker_connected?site.clicktocall.connect.animate.section(3):a.caller_connected&&site.clicktocall.connect.animate.section(1),0==a.in_progress&&$("div#acd_menu span#wamwm").addClass("hide"),1==a.in_progress)1==site.user.type_id&&2==a.phone_call_status_id?(site.clicktocall.acd.caller.initialize(),a.caller_connected&&
site.clicktocall.acd.caller.timer.start()):2==site.user.type_id&&site.clicktocall.acd.talker.initialize();else if(a.show_review)1!=site.user.type_id||site.xs_no_popup||(site.clicktocall.acd.caller.timer.stop(),site.clicktocall.acd.caller.destroy(),3==_.get(a,"rate_type_id")&&$('button[call-me].offer[rate-id="'+_.get(a,"rate_id")+'"]').remove(),(b.debit_id||_.get(site,"clicktocall.acd.talker.dialog.data.debit_id"))&&site.demand.bundle("site.widget_review","widget/review",function(){return site.widget_review.boot({debit_id:b.debit_id||
_.get(site,"clicktocall.acd.talker.dialog.data.debit_id"),attribute_group_type_id:_.get(b,"chat_id")?7:null})}));else if(1==site.user.type_id){if(a.initiation_failed_status&&1==site.clicktocall.connect.initialized){var c="The connection failed.";switch(parseInt(a.initiation_failed_status)){case 3:case 4:case 14:c="We're sorry, this "+site.data_get("word_talker")+" could not accept your call.<br /><br/>Please message them or try again at another time.";c+='<br /><a id="clicktocall-leavevoicemail" class="button3">LEAVE A VOICEMAIL</a>';
break;case 7:c="You did not answer, please check Phone Settings."}site.clicktocall.connect.error(c);site.ping.set_timeout(15E3)}else 3==_.get(a,"rate_type_id")&&(_.set(site,"ping.show_first_time_offer",!1),$('button[call-me].offer[rate-id="'+_.get(a,"profile_rate_id")+'"]').hide());site.clicktocall.acd.caller.timer.stop();site.clicktocall.acd.caller.initialized&&site.clicktocall.acd.caller.destroy()}};
site.clicktocall.AMW_launch=function(a){a&&($("#window_fade.open_window_fade").addClass("locked"),AMW.launch());site.clicktocall.AMW_launch_dialog=!1};site.clicktocall.review={initialized:!1};
site.clicktocall.review.initialize=function(a){var b=site.clicktocall.review;if(b.initialized)return!1;b.data=a||site.clicktocall.acd.caller.data;if(!b.data)return b.reload_attempts||(b.reload_attempts=0),5>b.reload_attempts?(b.reload_attempts++,window.setTimeout(b.initialize,300)):site.exception("func: site.clicktocall.review.initialize",{data:a,"acd.caller":site.clicktocall.acd.caller.data}),!1;_.isUndefined(b.data.profile)||_.isUndefined(b.data.profile.debit_id)||(b.data.debit_id=b.data.profile.debit_id);
site.clicktocall.review.render();site.clicktocall.review.events();window.setTimeout(site.clicktocall.review.show,500);return this.initialized=!0};
site.clicktocall.review.events=function(){var a=this;$("#clicktocall-review-submit").on("click",function(){a.save($("#clicktocall-review-rating input[data-type=rating]").val(),$("#clicktocall-review-textarea").val())});$("#clicktocall-review .icon_24_close_white").on("click",function(){return a.destroy()});$("#clicktocall-review-right .button2").on("click",function(){var b=site.product.static_listing({product_static_id:$(this).data("product_static_id")});if(!b)return!1;b=b.listing[0];var c=parseFloat(b.price);
if(10==b.product_static_id){c=window.prompt("Please enter the "+site.vars.words.tip+" amount (between $1.00 - $999.99):","100.00");c=parseFloat(c);if(!c)return!1;if(isNaN(c)||1>c||999.99<c)return alert("Invalid "+site.vars.words.tip+" amount. Please try again."),!1;c=parseFloat(c)}b={debit_id:_.isUndefined(a.data.debit_id)?null:a.data.debit_id,profile_id:a.data.profile.profile_id,product_static_id:b.product_static_id,title:site.vars.words.tip,price:c,description:null,icon:"sprite_members icon_32_cash"};
return site.wallet.initialize(b)})};
site.clicktocall.review.render=function(){if($("#clicktocall-review").length)return!1;var a=_.get(this,"data.profile.avatar_https")||_.get(FlowMaster,"data.talker.avatar")||site.url.current+"images/_default_avatar.png",b=[];b.status=!0;b.disabled="";b.placeholder="Leave your review here...";b.review=this.data.profile.review||"";b.duration=this.data.duration;b.limit=site.data_get("review_visibility_by_call_duration_min");b.button='<a id="clicktocall-review-submit">Submit Review</a>';b.example='<em><strong>Example:</strong> "The best call I ever had. I can\'t wait to talk to them again!!!"</em>';
b.duration<b.limit&&(b.status=!1,b.disabled="disabled",b.placeholder="Your Phone Call has to be longer than "+b.limit+" seconds in order to submit a review!",b.button=b.example="");a='\t\t<section id="clicktocall-review">\t\t\t<header>\t\t\t\t<i class="icon_24_phone_white"></i>\t\t\t\t<i class="icon_24_close_white" data-html="Cancel leaving this review!" data-top-nudge="-12"></i>\t\t\t\t<h1><strong>Review '+this.data.profile.title+'</strong></h1>\t\t\t</header>\t\t\t<section id="clicktocall-review-left">\t\t\t\t<div class="clicktocall_avatar" data-image="'+
a+'" style="background: transparent url('+a+') no-repeat 0px 0px"></div>\t\t\t</section>\t\t\t<section id="clicktocall-review-middle">\t\t\t\t<div id="clicktocall-review-rating"></div>\t\t\t\t<strong>Your Review</strong>\t\t\t\t<textarea '+b.disabled+' id="clicktocall-review-textarea" placeholder="'+b.placeholder+'">'+b.review+"</textarea>\t\t\t\t"+b.example+'\t\t\t</section>\t\t\t<section id="clicktocall-review-right">';var c=site.product.static_listing({product_static_type_id:1});if(c){a+="<strong>Leave A "+
site.vars.words.tip+"</strong>";for(var d in c.listing){var e=c.listing[d];if("undefined"!==e.product_static_id&&e.product_static_id){var f=parseInt(e.price)||0,g=e.title;f&&(g="$"+e.price);a+='<a class="button2" data-product_static_id="'+e.product_static_id+'">'+g+"</a>"}}}a+="\t\t\t\t"+b.button+"\t\t\t</section>\t\t</section>";$("body").append(a);b.status&&(this.rating=new site.rating,this.rating.initialize({container:"#clicktocall-review-rating",editable:!0}));return!0};
site.clicktocall.review.save=function(a,b){if(!b&&!a)return alert("Your review cannot be blank!");site.request("ajax/ctc-review.php",{debit_id:this.data.debit_id,rating:a,review:b},function(a){site.clicktocall.review.destroy(function(){if(!a.success)return alert(a.error);alert({classes:"dialog-green",title:"Thank You!",message:"Your review has been sent successfully."})})})};
site.clicktocall.review.show=function(a){a=_.isFunction(a)?site.callback(a):function(){};site.window.fade.show();$("#clicktocall-review").show("drop",{direction:"left"},300,function(){a()})};site.clicktocall.review.hide=function(a){a=_.isFunction(a)?site.callback(a):function(){};site.window.fade.hide();$("#clicktocall-review").hide("drop",{direction:"right"},300,function(){a()})};
site.clicktocall.review.destroy=function(a){a=_.isFunction(a)?site.callback(a):function(){};site.window.fade.hide();$(".tooltip").remove();this.hide(function(){$("#clicktocall-review").remove();a(!0)});return this.initialized=!1};site.clicktocall.connect={initialized:!1,data:null,phone_id:null,profile_id:null,is_skype_call:0,talkerhandle:null,profile_rate_id:null,phone_call_type_id:1,rate_type_id:1,phone_display:null};site.clicktocall.connect.gender=function(a){return"Profile"};
site.clicktocall.connect.initialize=function(a){"Begin initialize connect.";site.clicktocall.connect.initialize.input=a;if(!site.user.id)return site.user.login();if(site.clicktocall.connect.initialized)return site.clicktocall.connect.show();if(!a.profile_id)return!1;a.preselected_profile_rate_id&&(site.clicktocall.connect.profile_rate_id=a.preselected_profile_rate_id);a.rate_type_id&&(site.clicktocall.connect.rate_type_id=a.rate_type_id);site.clicktocall.connect.profile_id=a.profile_id;site.clicktocall.connect.is_skype_call=
a.is_skype_call;site.clicktocall.connect.render_wamwm=!1;a.wamwm&&(site.clicktocall.connect.render_wamwm=!0);"initialize connect step 2.";site.request("ajax/ctc-initialize.php",{profile_id:site.clicktocall.connect.profile_id,is_skype_call:site.clicktocall.connect.is_skype_call,rate_type_id:site.clicktocall.connect.rate_type_id},function(a){if(0==a.success)return a.error?site.dialog.alert({title:"Oops!",message:a.error}):site.dialog.alert({title:"Oops!",message:"We could not place your call. Please try again or contact support."}),
site.clicktocall.connect.destroy();site.clicktocall.connect.data=a;site.clicktocall.connect.talkerhandle=a.talkerhandle;site.clicktocall.connect.render(a);site.clicktocall.connect.events(a);site.clicktocall.connect.initialized=!0;site.clicktocall.connect.show()})};
site.clicktocall.connect.validate=function(){var a=!0,b=parseInt($("#clicktocall select[name=profile_rate_id]").val());if(1!=site.clicktocall.connect.is_skype_call)var c=parseInt($("#clicktocall #clicktocall_phone").data("phone_id")),d=parseInt($("#clicktocall select[name=phone_call_type_id]").val()),e=parseInt($("#clicktocall select[name=user_credit_card_id]").val());else c=0,d=1,e=0;2!=d&&3!=d||site.utility.is_number(e)&&!(0>=e)||(a="Please select the credit card you wish to use with this call!");
if(!site.utility.is_number(d)||0>=d)a="Please select how you want to fund this call!";(!site.utility.is_number(c)||0>=c)&&1!=site.clicktocall.connect.is_skype_call&&(a="Please select a phone number for us to connect you!");if(!site.utility.is_number(b)||0>=b)a="Please select a rate for this "+site.data_get("word_talker")+"!";return a};site.clicktocall.amw_callback={hide:function(){},launch:function(){site.clicktocall.connect.destroy()},done:function(){}};
site.clicktocall.connect.error=function(a){var b=site.clicktocall.connect.data;$("#clicktocall-connecting_error strong").html(a);-1<a.indexOf("not enough funds")&&($("#clicktocall-connecting_add_money").length||$("#clicktocall-connecting_close").before('<a id="clicktocall-connecting_add_money" class="button3" href="javascript:;" onclick="AMW.launch(site.clicktocall.amw_callback.done,site.clicktocall.amw_callback.hide);site.clicktocall.amw_callback.launch();" data-html="Add money to your account">ADD MONEY</a>'),
b.user.credit_cards?$("#clicktocall-connecting_use_cc").length||($("#clicktocall-connecting_close").before('<a id="clicktocall-connecting_use_cc" class="button3" data-html="Use a saved Credit Card.">USE A CREDIT CARD</a>'),$("#clicktocall-connecting_use_cc").on("click",function(){$('.clicktocall_select[data-name="phone_call_type_id"]').click();$('.clicktocall_select[data-name="phone_call_type_id"] li[data-value="3"]').click();site.clicktocall.connect.show()})):$("#clicktocall-connecting_use_cc").remove());
$("#clicktocall-connecting, #clicktocall-connecting_error").css("display","block")};
site.clicktocall.connect.events=function(a){$("#clicktocall .icon_24_close_white, #clicktocall-connecting_close").on("click",function(){return site.clicktocall.connect.destroy()});$("#clicktocall-leavevoicemail").live("click",function(){site.request("ajax/leave-voicemail.php",{action:"call",user_id:site.user.id,profile_id:site.clicktocall.connect.profile_id});return site.clicktocall.connect.destroy()});$("#clicktocall_show_pin").on("click",function(){$(".tooltip").remove();return $(this).parent().html($(this).data("pin"))});
$("#clicktocall_phone").bind("click",function(){site.phone_widget.load(site.clicktocall.connect.initialize.bind(null,site.clicktocall.connect.initialize.input));return site.clicktocall.connect.destroy(void 0,!0)});$("#connect_now").on("click",function(){var a=site.clicktocall.connect.validate();if(!0!==a)return alert(a);$("#connect_now").unbind("click");a=parseInt($("#clicktocall select[name=profile_rate_id]").val());var c=parseInt($("#clicktocall select[name=phone_call_type_id]").val()),d=parseInt($("#clicktocall select[name=user_credit_card_id]").val()),
e="FALSE";var f=$(".voice_phone_display").html().replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3");var g=parseInt($("#clicktocall #clicktocall_phone").data("phone_id"));1==$("#clicktocall input[name=TL_PHONE_CALL_RECORD]").is(":checked")&&(e="TRUE");site.ping.clear();site.clicktocall.connect.request(a,g,c,d,e,f);site.clicktocall.connect.animate.initialize();$(".tooltip").remove()});$("#skype_now").on("click",function(){var a=site.clicktocall.connect.validate();if(!0!==a)return alert(a);a=$("#clicktocall input[name=caller_handle]").val();
if("--Enter your Skype Handle--"==a||""==a)return alert("A valid Skype handle is required.");site.clicktocall.connect.update(site.user.id,a,function(a){if(0==a.success)return a.error?site.dialog.alert({title:"Oops!",message:a.error}):site.dialog.alert({title:"Oops!",message:"We could not place your call. Please try again or contact support."}),site.clicktocall.connect.destroy()});a=parseInt($("#clicktocall select[name=profile_rate_id]").val());site.ping.clear();site.clicktocall.connect.request(a,
0,1,0,"FALSE","");site.clicktocall.connect.animate.initialize();$(".tooltip").remove()});$("#skype_update").on("click",function(){var a=$("#clicktocall input[name=caller_handle]").val();if(""==a)return alert("A valid Skype handle is required.");site.clicktocall.connect.update(site.user.id,a,function(a){if(0==a.success)return a.error&&site.dialog.alert({title:"Oops!",message:a.error}),site.clicktocall.connect.destroy();site.utility.cookie.set("abandoned","ctc",1);site.utility.cookie.set("abandoned_id",
JSON.stringify({profile_id:site.clicktocall.connect.profile_id,is_skype_call:site.clicktocall.connect.is_skype_call}),1);window.location.reload()});return!1});$("#clicktocall select").each(function(){var a="",c=$(":selected",this).val()||null;c=c?c:"";$("option",this).each(function(){var b=0,e=0;c==$(this).val()&&(b=1);$(this).attr("disabled")&&(e=1);a+='<li data-value="'+$(this).val()+'" data-disabled="'+e+'" data-selected="'+b+'">'+$(this).text()+'<i class="sprite_public icon_10_check"></i></li>'});
$(this).before('<div class="clicktocall_select" data-disabled="'+($(this).attr("disabled")?1:0)+'" data-name="'+$(this).attr("name")+'" data-value="'+$(":selected",this).val()+'"><i class="'+$(this).data("icon")+'"></i><i class="sprite_public icon_16_dropdown"></i><div>'+($(":selected",this).html()||$("option",this).html())+"</div><ul>"+a+"</ul></div>");$(this).hide()});$(".clicktocall_select[data-disabled=0] li[data-disabled=0]").live("click",function(){$("li",$(this).parent()).attr("data-selected",
0);$(this).attr("data-selected",1);$("div",$(this).parent().parent()).html($(this).text());$("#clicktocall select[name="+$(this).parent().parent().data("name")+"]").val($(this).data("value"));$("#clicktocall select[name="+$(this).parent().parent().data("name")+"]").change()});$("#clicktocall select[name=profile_rate_id]").bind("change",function(){var b=!0,c=parseInt($("#clicktocall select[name=phone_call_type_id]").val()),d=parseInt($("#clicktocall select[name=profile_rate_id]").val());if(_.get(a,
"profile.rates"))for(var e in a.profile.rates){var f=a.profile.rates[e];if(f.profile_rate_id==d){1!=f.rate_type_id&&(b=!1);break}}b?$('#clicktocall .clicktocall_select[data-name=phone_call_type_id] ul li[data-value="3"]').attr("data-disabled","0"):(3===c&&$('#clicktocall .clicktocall_select[data-name=phone_call_type_id] ul li[data-value="1"]').click(),$('#clicktocall .clicktocall_select[data-name=phone_call_type_id] ul li[data-value="3"]').attr("data-disabled","1"))});$("#clicktocall select[name=phone_call_type_id]").bind("change",
function(){1!=$(this).val()?$(".clicktocall_auth").show():$(".clicktocall_auth").hide();1==$(this).val()?$("#clicktocall .clicktocall_select[data-name=user_credit_card_id]").attr("data-disabled",1):$("#clicktocall .clicktocall_select[data-name=user_credit_card_id]").attr("data-disabled",0)});$(".clicktocall_select[data-disabled=0]").live("click",function(){if(1==parseInt($(this).data("disabled")))return!1;if($(this).hasClass("open"))return $(this).removeClass("open"),!0;$(this).addClass("open")});
$(".clicktocall_select").mouseleave(function(){$(this).removeClass("open")});$(".clicktocall_select, .clicktocall_select li, #clicktocall_phone").disableSelection();$("#clicktocall select[name=profile_rate_id]").trigger("change")};
site.clicktocall.connect.render=function(a){site.debug("site.clicktocall.connect.render",a);if($("#clicktocall").length)return!1;var b=_.get(a,"caller.avatar_https")||site.url.current+"images/_default_avatar.png",c=_.get(a,"profile.avatar_https")||_.get(FlowMaster,"data.talker.avatar")||site.url.current+"images/_default_avatar.png";if(1==a.profile.is_skype_call){var d=a.callerhandle;b="--Enter your Skype Handle--"==d||""==d?' \t\t\t\t<section id="clicktocall">\t\t\t\t\t<header>\t\t\t\t\t\t<i class="icon_24_skype_white"></i>\t\t\t\t\t\t<i class="icon_24_close_white" data-html="Cancel making this call!" data-top-nudge="-12"></i>\t\t\t\t\t\t<h1>Skype&nbsp&nbsp<strong>'+
a.profile.title+'</strong></h1>\t\t\t\t\t</header>\t\t\t\t\t<section id="clicktocall_left">\t\t\t\t\t\t<div class="clicktocall_avatar" data-image="'+c+'" style="background: transparent url('+c+') no-repeat 0px 0px"></div>\t\t\t\t\t\t<div id="clicktocall_options">\t\t\t\t\t\t\t<h1>Your Skype Handle is required.</h1>\t\t\t\t\t\t\t<p><h3>Use Skype handle:</h3><div id="skype_input"><input type="text" id="caller_handle" name="caller_handle" value="'+d+'" placeholder="--Enter a Valid Skype Handle--"></div></p>\t\t\t\t\t\t\t<br/><br/><br/><button id="skype_update" data-top-nudge="12">Update</button>\t\t\t\t\t\t</div>\t\t\t\t\t</section>\t\t\t\t\t<section id="clicktocall_right">\t\t\t\t\t\t<br /><br /><medium>\t\t\t\t\t\t\tThe Skype handle you enter must match the identity that you use to place the call in your Skype software or you will not get connected.\t\t\t\t\t\t</medium>\t\t\t\t\t</section>\t\t\t\t</section>':
' \t\t\t\t<section id="clicktocall">\t\t\t\t\t<header>\t\t\t\t\t\t<i class="icon_24_skype_white"></i>\t\t\t\t\t\t<i class="icon_24_close_white" data-html="Cancel making this call!" data-top-nudge="-12"></i>\t\t\t\t\t\t<h1>Skype&nbsp&nbsp<strong>'+a.profile.title+'</strong></h1>\t\t\t\t\t</header>\t\t\t\t\t<section id="clicktocall_left">\t\t\t\t\t\t<div class="clicktocall_avatar" data-image="'+c+'" style="background: transparent url('+c+') no-repeat 0px 0px"></div>\t\t\t\t\t\t<div id="clicktocall_options">\t\t\t\t\t\t\t<h1>LET US CONNECT YOU</h1>\t\t\t\t\t\t\t'+
site.clicktocall.connect.render_rate_select(a)+'\t\t\t\t\t\t\t<p><h3>Use Skype handle:</h3><div id="skype_input"><input type="text" id="caller_handle" name="caller_handle" value="'+a.callerhandle+'"></div>\t\t\t\t\t\t\t<br/><br/><br/><button id="skype_now" data-html="CLICK HERE TO START!" data-top-nudge="12">CONNECT NOW</button>\t\t\t\t\t\t\t<p><h3>Or, you can manually connect with<br /><b>'+a.talkerhandle+'</b><br />via your Skype software.</H3></p>\t\t\t\t\t\t</div>\t\t\t\t\t</section>\t\t\t\t\t<section id="clicktocall_right">\t\t\t\t\t\t<medium>You must have <a href="https://login.skype.com/account/signup-form?application=download&return_url=http%3A%2F%2Fwww.skype.com%2Fgo%2Fdownloading-page" target="_blank"><font color="#ff0000">Skype</font></a> installed.</medium>\t\t\t\t\t\t<medium>Click "CONNECT NOW" to launch Skype.</medium>\t\t\t\t\t\t<medium>If prompted, select "Launch Application" to connect.</medium>\t\t\t\t\t\t<medium>The Skype handle, shown to the left, must match the username that you logged into Skype with or your call will not connect.<br /></medium>\t\t\t\t\t\t<medium>We advise a new Skype handle for use with TalkToMe.com.<br /></medium>\t\t\t\t\t</section>\t\t\t\t</section>\t\t\t\t<section id="clicktocall-connecting">\t\t\t\t\t<header>\t\t\t\t\t\t<i class="icon_24_skype_connect"></i>\t\t\t\t\t\t<h1>Connecting To <strong>'+
a.profile.title+'</strong></h1>\t\t\t\t\t</header>\t\t\t\t\t<span id="clicktocall-connecting_error">\t\t\t\t\t\t<strong>This '+site.data_get("word_talker")+' is currently busy. Try again later!</strong>\t\t\t\t\t\t<a id="clicktocall-connecting_close" class="button2">CLOSE THIS WINDOW</a>\t\t\t\t\t</span>\t\t\t\t\t<span id="clicktocall_timeline"></span>\t\t\t\t\t<div id="clicktocall-connecting_wallet">\t\t\t\t\t\t<i class="ball"></i>\t\t\t\t\t\t<img src="'+site.url.current+'images/icon_64_check_green.png" />\t\t\t\t\t\t<div class="clicktocall_avatar"><img id="clicktocall-connecting_wallet_img" src="'+
site.url.current+'images/icon_64_wallet.png" /></div>\t\t\t\t\t</div>\t\t\t\t\t<div>\t\t\t\t\t\t<i class="ball"></i>\t\t\t\t\t\t<img src="'+site.url.current+'images/icon_64_check_green.png" />\t\t\t\t\t\t<div class="clicktocall_avatar"><img src="'+c+'" /></div>\t\t\t\t\t</div>\t\t\t\t\t<div>\t\t\t\t\t\t<img src="'+site.url.current+'images/icon_64_check_green.png" />\t\t\t\t\t\t<div class="clicktocall_avatar"><img src="'+b+'" /></div>\t\t\t\t\t</div>\t\t\t\t\t<footer>\t\t\t\t\t\t<div id="clicktocall_statusbar">\t\t\t\t\t\t\t<span><img src="'+
site.url.current+'images/loading_small.gif" /> Verifying Your Funds...</span>\t\t\t\t\t\t\t<span><img src="'+site.url.current+'images/loading_small.gif" /> Establishing Skype connection...</span>\t\t\t\t\t\t</div>\t\t\t\t\t</footer>\t\t\t\t</section>'}else{var e="",f="";d=!1;var g=a.profile.title,h=site.data_get("phone"),k=site.vars.phone_international;"system"==g&&(g="Chat Line",d=!0,h=site.data_get("vchat_number"));3==site.theater.id&&(e="<br/>Psychics.com is for entertainment purposes only.<br><br>Advisors are not employees of Psychics.com<br><br>Psychics.com does not make available and is not liable for any content or information that you obtain through Psychics.com.<br>",
f="<br>Psychics.com is for entertainment purposes only.<br><br>Advisors are not employees of Psychics.com.<br><br>Psychics.com does not make available and is not liable for any content or information that you obtain through Psychics.com.");b='\t\t\t<section id="clicktocall">\t\t\t\t<header>\t\t\t\t\t<i class="icon_24_phone_white"></i>\t\t\t\t\t<i class="icon_24_close_white" data-html="Cancel making this call!" data-top-nudge="-12"></i>\t\t\t\t\t<h1>Call <strong>'+g+'</strong></h1>\t\t\t\t</header>\t\t\t\t<section id="clicktocall_left">\t\t\t\t\t<div class="clicktocall_avatar" data-image="'+
c+'" style="background: transparent url('+c+') no-repeat 0px 0px"></div>\t\t\t\t\t<div id="clicktocall_options">\t\t\t\t\t\t<h1>LET US CONNECT YOU</h1>\t\t\t\t\t\t'+site.clicktocall.connect.render_rate_select(a)+"\t\t\t\t\t\t"+site.clicktocall.connect.render_phone_select(a)+"\t\t\t\t\t\t"+site.clicktocall.connect.render_method_select(a)+"\t\t\t\t\t\t"+site.clicktocall.connect.render_payment_select(a)+'\t\t\t\t\t\t<small class="clicktocall_auth">You will see a $20.00 authorization hold on your credit card when placing the call. This is an authorization hold only, the final settled amount will be for the total of the completed call.</small>\t\t\t\t\t\t'+
e+'\t\t\t\t\t\t<button id="connect_now" data-html="CLICK HERE TO START THE CALL!" data-top-nudge="-12"><i class="icon_24_phone_connect"></i>CONNECT NOW</button>\t\t\t\t\t\t'+site.clicktocall.connect.render_record_checkbox(a)+'\t\t\t\t\t</div>\t\t\t\t</section>\t\t\t\t<section id="clicktocall_right">\t\t\t\t\t<h1>OR CALL <strong>'+h+"</strong></h1>\t\t\t\t\t<small>Outside the USA call: "+k+'</small>\t\t\t\t\t<dl id="clicktocall_credentials">\t\t\t\t\t\t<dt>Your Account Number:</dt>\t\t\t\t\t\t<dd>'+
a.user.user_id+'</dd>\t\t\t\t\t\t<dt>Your PIN Number:</dt>\t\t\t\t\t\t<dd><a id="clicktocall_show_pin" data-pin="'+a.user.pin+'" data-html="Click here to see your PIN number." data-top-nudge="-12">CLICK HERE</a></dd>\t\t\t\t\t\t<dt>'+site.clicktocall.connect.gender(a.profile.attribute_class_id)+" Number:</dt>\t\t\t\t\t\t<dd>"+a.profile.profile_id+"</dd>\t\t\t\t\t</dl>\t\t\t\t\t<span>You will be prompted to enter the information above when calling in. Please have it ready prior to your call.<br><br>"+
f+'</span>\t\t\t\t</section>\t\t\t\t\t\t</section>\t\t\t<section id="clicktocall-connecting">\t\t\t\t<header>\t\t\t\t\t<i class="icon_24_phone_white"></i>\t\t\t\t\t<h1>Connecting To <strong>'+g+'</strong></h1>\t\t\t\t</header>\t\t\t\t<span id="clicktocall-connecting_error">\t\t\t\t\t<strong>This '+site.data_get("word_talker")+' is currently busy. Try again later!</strong>\t\t\t\t\t<a id="clicktocall-connecting_close" class="button2">CLOSE THIS WINDOW</a>\t\t\t\t</span>\t\t\t\t<span id="clicktocall_timeline"></span>\t\t\t\t<div id="clicktocall-connecting_wallet">\t\t\t\t\t<i class="ball"></i>\t\t\t\t\t<img src="'+
site.url.current+'images/icon_64_check_green.png" />\t\t\t\t\t<div class="clicktocall_avatar"><img id="clicktocall-connecting_wallet_img" src="'+site.url.current+'images/icon_64_wallet.png" /></div>\t\t\t\t</div>\t\t\t\t<div>\t\t\t\t\t<i class="ball"></i>\t\t\t\t\t<img src="'+site.url.current+'images/icon_64_check_green.png" />\t\t\t\t\t<div class="clicktocall_avatar"><img src="'+c+'" /></div>\t\t\t\t</div>\t\t\t\t<div>\t\t\t\t\t<img src="'+site.url.current+'images/icon_64_check_green.png" />\t\t\t\t\t<div class="clicktocall_avatar"><img src="'+
b+'" /></div>\t\t\t\t</div>\t\t\t\t<footer>\t\t\t\t\t<div id="clicktocall_statusbar">\t\t\t\t\t\t';b=d?b+('<span></span>\t\t\t\t\t\t<span><img src="'+site.url.current+"images/loading_small.gif\" /> We're Calling "+g+'...</span>\t\t\t\t\t\t<span><img src="'+site.url.current+"images/loading_small.gif\" /> We're Calling You at </span>"):b+('<span><img src="'+site.url.current+'images/loading_small.gif" /> Verifying Your Funds...</span>\t\t\t\t \t\t<span><img src="'+site.url.current+"images/loading_small.gif\" /> We're Calling "+
site.clicktocall.connect.gender(a.profile.attribute_class_id)+" #"+a.profile.profile_id+'...</span>\t\t\t\t \t\t<span><img src="'+site.url.current+"images/loading_small.gif\" /> We're Calling You at </span>");b+="\t\t</div>\t\t\t\t</footer>\t\t\t</section>"}$("body").append(b)};
site.clicktocall.connect.render_rate_select=function(a){var b="",c;for(c in a.profile.rates){var d=a.profile.rates[c],e="";if(d.profile_rate_price)if(1==a.profile.is_skype_call)11==d.rate_type_id&&(e+='<option value="'+d.profile_rate_id+'" selected>Skype: $'+d.profile_rate_price+"/min</option>");else if(1==d.rate_type_id||2==d.rate_type_id||3==d.rate_type_id)e+='<option value="'+d.profile_rate_id+'"',site.clicktocall.connect.profile_rate_id==d.profile_rate_id&&(e+=" selected"),e+=">",1==d.rate_type_id||
19==d.rate_type_id?e+="Pay Per Minute: $"+d.profile_rate_price+"/min":3==d.rate_type_id?e+="Special: "+d.minutes+" minutes for $"+d.profile_rate_price:2==d.rate_type_id&&(e+="Up to "+d.minutes+" minutes for $"+d.profile_rate_price),e+="</option>";b=3==d.rate_type_id?e+b:b+e}return'<select name="profile_rate_id" data-icon="sprite_public icon_16_money">'+b+"</select>"};
site.clicktocall.connect.render_phone_select=function(a){var b=null,c;for(c in a.user.phones.listing){var d=a.user.phones.listing[c];0==c&&(b=d);1==d.is_default&&(b=d)}a='<a id="clicktocall_phone" class="change_phone" data-html="Click here to add/change your phone number!" data-top-nudge="-12"><i class="sprite_members icon_16_phone"></i>Add Your Phone Number!</a>';b&&b.phone_id&&(a='<a id="clicktocall_phone" data-phone_id="'+b.phone_id+'" class="sel_phone"><i class="sprite_members icon_16_phone"></i><span class="voice_phone_display">'+
site.utility.format.phone(b.number)+'</span><strong class="change_phone" data-html="Click here to add/change your phone number!" data-top-nudge="-12">CHANGE</strong></a>');return a};
site.clicktocall.connect.render_method_select=function(a){site.debug("site.clicktocall.connect.render_method_select",site.user.data.phone_call_type_id,a.user.credit_cards,a.phone_call_type_id);var b=a.user.credit_cards&&site.user.data.phone_call_type_id?site.user.data.phone_call_type_id:1,c='<select name="phone_call_type_id" data-icon="icon_16_wallet">\t<option value="1"'+(1==b?" selected":"")+">Use funds in my wallet</option>";_.isEmpty(a.user.credit_cards)||(c+='\t<option value="3"'+(a.user.credit_cards?
"":" disabled")+(a.user.credit_cards&&3==b?" selected":"")+'>Use my wallet, then my credit card</option>\t<option value="2"'+(a.user.credit_cards?"":" disabled")+(a.user.credit_cards&&2==b?" selected":"")+">Use my credit card</option>");return c+"</select>"};
site.clicktocall.connect.render_payment_select=function(a){if(_.isEmpty(a.user.credit_cards))return"";var b='\t\t<select name="user_credit_card_id" data-icon="icon_16_card"'+(a.user.credit_cards&&1!=site.user.data.phone_call_type_id?"":" disabled")+'>\t\t\t<option value="" disabled>Select a credit card</a>',c;for(c in a.user.credit_cards){var d=a.user.credit_cards[c];b+='<option value="'+d.user_credit_card_id+'"'+(1==site.user.data?" selected":"")+">"+d.number_partial+"</option>"}return b+"</select>"};
site.clicktocall.connect.render_record_checkbox=function(a){return 1==a.profile.default_recording_setting?'<br/><div align="center" data-html="Record this phone call so you can purchase and listen to it later"><input type="checkbox" name="TL_PHONE_CALL_RECORD" value="TRUE"'+(0==site.user.data.default_recording_setting?"":'checked="checked"')+"> Record this session</div>":'<br /><div align="center" data-html="This '+site.vars.words.talker+' does NOT allow recordings">This talker does not allow recordings</div>'};
site.clicktocall.connect.request=function(a,b,c,d,e,f){site.clicktocall.connect.profile_rate_id=a;site.clicktocall.connect.phone_id=b;site.clicktocall.connect.phone_call_type_id=c;site.clicktocall.connect.user_credit_card_id=d;site.clicktocall.connect.TL_PHONE_CALL_RECORD=e;site.clicktocall.connect.phone_display=f;site.request("ajax/ctc-initiate/",{profile_id:site.clicktocall.connect.profile_id,is_skype_call:site.clicktocall.connect.is_skype_call,profile_rate_id:a,phone_id:b,phone_call_type_id:c,
user_credit_card_id:d,TL_PHONE_CALL_RECORD:e},function(a){site.vars.feature_websockets_clicktocall?void 0:site.ping.set_timeout(800);if(0==a.success)return site.clicktocall.connect.error(a.error);site.clicktocall.connect.talkerhandle=a.talkerhandle;setTimeout(function(){site.clicktocall.connect.animate.section(1)},3E3)})};
site.clicktocall.connect.update=function(a,b,c){c=_.isFunction(c)?site.callback(c):function(){};site.request("ajax/ctc-skype-update.php",{user_id:a,callerhandle:b},function(a){_.isFunction(c)&&c(a)})};
site.clicktocall.connect.destroy=function(a,b){a=_.isFunction(a)?site.callback(a):function(){};!0!==b&&site.window.fade.hide();$(".tooltip").remove();$("#phones:visible").length&&$("#phones").hide();$(".clicktocall_select[data-disabled=0]").die();$("#clicktocall, #clicktocall-connecting").hide("drop",{direction:"down"},function(){site.clicktocall.connect.initialized=!1;$("#clicktocall, #clicktocall-connecting, .ui-effects-wrapper").remove();a()})};
site.clicktocall.connect.show=function(a){1!=site.user.data.phone_call_type_id?$(".clicktocall_auth").show():$(".clicktocall_auth").hide();if("none"!=$("#clicktocall").css("display"))return!1;$("#clicktocall-connecting, #clicktocall-connecting_error").hide();$("#clicktocall").show("drop",{direction:"up"});return!0};site.clicktocall.connect.animate={};
site.clicktocall.connect.animate.initialize=function(){if(1==site.clicktocall.connect.is_skype_call)return site.clicktocall.connect.destroy(),window.open("skype:"+site.clicktocall.connect.talkerhandle+"?call");$("#clicktocall_timeline, .ball, #clicktocall_statusbar span").hide();$("#clicktocall-connecting > div > div, #clicktocall-connecting small, .clicktocall-connecting_loading").css("opacity",0);$("#clicktocall-connecting > div > div > img").css("opacity",.25);$("#clicktocall-connecting > div:eq(0) > div > img, #clicktocall-connecting > div:eq(0) .clicktocall-connecting_loading").css("opacity",
1);$("#clicktocall-connecting > div:eq(0)").addClass("in_progress");$("#clicktocall_statusbar span:eq(2)").append(site.clicktocall.connect.phone_display+"...");$("#clicktocall").hide("drop",{direction:"down"},function(){$("#clicktocall-connecting").show("drop",{direction:"up"},function(){$("#clicktocall_timeline").show(250,function(){$(".ball:eq(0)").show(250,function(){$(".ball:eq(1)").show(250,function(){$("#clicktocall-connecting > div:eq(0) > div, #clicktocall-connecting > div:eq(0) small").animate({opacity:1},
500,function(){$("#clicktocall_statusbar span:eq(0)").show(500,function(){$("#clicktocall-connecting > div:eq(1) small").animate({opacity:.25},500);$("#clicktocall-connecting > div:eq(1) > div").animate({opacity:1},500,function(){$(".tooltip").remove();$("#clicktocall-connecting > div:eq(2) small").animate({opacity:.25},500);$("#clicktocall-connecting > div:eq(2) > div").animate({opacity:1},500)})})})})})})})})};
site.clicktocall.connect.animate.section=function(a){var b=a-1;$("#clicktocall-connecting > div:eq("+b+")").removeClass("in_progress").addClass("completed");$("#clicktocall-connecting > div:eq("+b+") .clicktocall-connecting_loading, #clicktocall-connecting > div:eq("+b+") .clicktocall_avatar img, #clicktocall-connecting > div:eq("+b+") small").animate({opacity:.25},500);$("#clicktocall-connecting > div:eq("+a+")").addClass("in_progress");$("#clicktocall_statusbar span:not("+a+")").hide();$("#clicktocall_statusbar span:eq("+
a+")").show();$("#clicktocall-connecting > div:eq("+a+") .clicktocall-connecting_loading, #clicktocall-connecting > div:eq("+a+") .clicktocall_avatar img, #clicktocall-connecting > div:eq("+a+") small").animate({opacity:1},500)};site.clicktocall.acd={data:null};site.clicktocall.acd.caller={initialized:!1,data:null};
site.clicktocall.acd.caller.initialize=function(a){if(site.xs_no_acd)return!1;a=site.clicktocall.acd.caller.data;var b=site.clicktocall.data;if(!site.clicktocall.acd.caller.initialized&&!$("#ctc_connected").length){var c=site.clicktocall.acd.caller.data=site.clicktocall.data;site.clicktocall.acd.caller.initialized=!0;var d=site.utility.datetime_to_datetime_seconds(c.date_start),e='<section id="ctc_connected"',f=c.profile.title;"system"==f?(f="Chat Line",e+=">"):e+=" onclick=\"window.location = site.url.current + 'p/"+
c.profile.profile_id+"/';\">";var g=_.get(c,"profile.avatar_https")||_.get(FlowMaster,"data.talker.avatar")||site.url.current+"images/_default_avatar.png";site.debug("site.clicktocall.acd.caller.initialize",g,c,a,b);e+=" <header>\tYou are on the phone with <span>"+f+'</span> ...</header><article>\t<img class="avatar" src="'+g+'" />\t<h2 class="title"><i class="sprite_public icon_16_phone"></i><ins>'+f+'</ins></h2>\t<div id="ctc_connected_timer">\t\t<i class="sprite_public icon_16_clock"></i>\t\t<span class="timer" ';
1==c.rate.rate_type_id||4==c.rate.rate_type_id||11==c.rate.rate_type_id?e+='data-dir="up" data-secs="'+d+'"':2==c.rate.rate_type_id&&(e+='data-dir="down" data-secs="'+(60*c.rate.minutes-d)+'"');e+="></span>\t</div></article></section>";$("body").append(e);site.clicktocall.acd.caller.timer.render()}site.clicktocall.connect.initialized&&site.clicktocall.connect.destroy();site.clicktocall.acd.caller.show();return!0};
site.clicktocall.acd.caller.show=function(a){a=_.isFunction(a)?site.callback(a):function(){};"none"==$("#ctc_connected").css("display")?$("#ctc_connected").show("drop",{direction:"left"},300,function(){a&&a()}):a&&a();return!0};site.clicktocall.acd.caller.destroy=function(a){a=_.isFunction(a)?site.callback(a):function(){};site.clicktocall.acd.caller.initialized=!1;$("#ctc_connected").hide("drop",{direction:"right"},300,function(){$("#ctc_connected").remove();a&&a()})};
site.clicktocall.acd.caller.timer={interval:null};
site.clicktocall.acd.caller.timer.render=function(){var a=$("#ctc_connected > article span.timer");site.ping.set_timeout(3E3);a.data("offset")==site.clicktocall.data.duration?a.data("elapsed",a.data("elapsed")+1):(a.data("offset",site.clicktocall.data.duration),a.data("elapsed",0));var b=Math.floor(site.clicktocall.data.duration)+Math.floor(a.data("elapsed"));if(2==site.clicktocall.data.rate.rate_type_id||3==site.clicktocall.data.rate.rate_type_id)b=60*site.clicktocall.data.rate.minutes-b;b=0>b?0:
b;var c=Math.floor(b/3600),d=Math.floor(b%3600/60);b%=60;d=(10>d?"0"+d:d)+":"+(10>b?"0"+b:b);0<c&&(d=c+":"+d);a.html(d)};site.clicktocall.acd.caller.timer.start=function(){site.clicktocall.acd.caller.timer.stop();site.clicktocall.acd.caller.timer.interval=setInterval(site.clicktocall.acd.caller.timer.render,1E3)};site.clicktocall.acd.caller.timer.stop=function(){var a=$("#ctc_connected > article span.timer");a.data("offset",0);a.data("elapsed",0);clearInterval(site.clicktocall.acd.caller.timer.interval)};
site.clicktocall.acd.talker={initialized:!1,data:null,timer:null};
site.clicktocall.acd.talker.timer_callback=function(){var a=site.clicktocall.data;this.target||(this.target=$("#acd_launch span ins"));this.target=$("ins.acd_time");a.duration="undefined"===typeof a.duration?0:Math.floor(a.duration);if(0===a.duration&&a.in_progress)return site.ping.set_timeout(800),!1;site.ping.set_timeout(3E3);site.clicktocall.acd.talker.timer.set_offset(a.duration);var b=_.get(a,"chat_id")?"Chat":"Call";a.in_progress?2==a.phone_call_status_id&&($("#acd_call_status span").replaceWith('<span class="green">'+
b+" In Progress</span>"),$("#acd_call_started").html(moment().utc(a.date_start).local().calendar())):(site.ping.set_timeout(15E3),3==a.phone_call_status_id||4==a.phone_call_status_id?$("#acd_call_status span").replaceWith('<span class="red">Missed '+b+"</span>"):$("#acd_call_status span").replaceWith('<span class="red">'+b+" Ended</span>"),site.clicktocall.acd.talker.timer.stop());b=site.clicktocall.acd.talker.timer.get_count();!_.isNumber(b)&&_.isNumber(_.get(site,"clicktocall.data.call_start_ts"))&&
_.isNumber(_.get(site,"clicktocall.data.call_end_ts"))&&(b=site.clicktocall.data.call_end_ts-site.clicktocall.data.call_start_ts);a.rate&&this.target.data("rate_type_id",a.rate.rate_type_id);var c=this.target.data("rate_type_id");if(2==c||3==c)b=60*a.rate.minutes-b;b=0>b?0:b;c=Math.floor(b/3600);var d=Math.floor(b/60)%60,e=b%60,f=(10>d?"0"+d:d)+":"+(10>e?"0"+e:e);0<c&&(f=(10>c?"0"+c:c)+":"+f);this.target.html(f);d=d+(1==d?" min":" mins")+" "+e+(1==e?" sec":" secs");0<c&&(d=c+(1==c?" hr":" hrs")+" "+
d);$(".acd_time_elapse").html(d);a.rate.is_ppm&&(a=Math.round(a.rate.price*a.rate.commission*100)/100*(30<b?Math.ceil(b/60):0),$(".acd_price").html("$"+a.formatMoney(2,".",",")))};
site.clicktocall.acd.talker.initialize=function(a,b){b&&(site.clicktocall.acd.talker.initialized=!1,$("#acd_launch").remove());if(!site.clicktocall.acd.talker.initialized&&!$("#acd_launch").length){a=site.clicktocall.acd.talker.data=site.clicktocall.data;site.clicktocall.acd.talker.initialized=!0;b='\t\t<a id="acd_launch" data-menu="acd_menu" data-menu-align="center" title="You are on the phone! Click for details." class="acd header-button">\t\t\t<span><ins class="acd_time">.........</ins></span> \t\t\t<i class="sprite_public icon_16_'+(_.get(a,
"chat_id")?"chat":"phone")+'"></i>\t\t</a>';$(".mail_count").before(b);$("#acd_launch").css("opacity",0);$("#acd_launch").css("display","block");site.clicktocall.acd.talker.events();site.clicktocall.acd.talker.timer=new site.timer({target:$("#acd_launch span ins"),callback:this.timer_callback});if(a.show_acd)var c=setInterval(function(){if(!$("#acd_menu").length)return $("#acd_launch").click();clearInterval(c)},1E3);site.clicktocall.acd.talker.timer.acontinue()}site.clicktocall.acd.talker.show(site.clicktocall.data.show_acd?
!0:!1);1==site.ping.show_acd&&site.clicktocall.acd.talker.dialog.refresh()};site.clicktocall.acd.visible=!1;site.clicktocall.acd.talker.events=function(){$("#acd_launch").off("click.acd");$("#acd_launch").on("click.acd",site.clicktocall.acd.talker.dialog.toggle);$("#acd").off("click.acd");$("#acd").on("click.acd",".menu_close",site.clicktocall.acd.talker.dialog.destroy);return!0};
site.clicktocall.acd.talker.show=function(a,b){$("#acd_launch").animate({opacity:1},500);a?site.clicktocall.acd.talker.dialog.refresh():b&&b()};site.clicktocall.acd.talker.dialog={initialized:!1,data:null};site.clicktocall.acd.talker.dialog.toggle=function(){return site.clicktocall.acd.visible?site.clicktocall.acd.talker.dialog.destroy():site.clicktocall.acd.talker.dialog.initialize()};
site.clicktocall.acd.talker.dialog.refresh=function(){var a=_.get(site,"clicktocall.acd.talker.dialog.data");if(!_.get(a,"profile_source"))return!1;var b=eval("("+a.profile_source.caller_profile+")"),c="<h1>About <span>"+a.profile_source.title+"</span></h1>";if(b){if(b.iama){c+="<p><b>I am a:</b> ";switch(b.iama){case "ms":c+="Straight Male";break;case "fs":c+="Straight Female";break;case "mb":c+="Bisexual Male";break;case "fb":c+="Bisexual Female";break;case "mg":c+="Gay Male";break;case "fg":c+=
"Gay Female";break;case "t":c+="Shemale"}c+="</p>"}b.about&&(c+="<p><b>About me:</b> "+b.about+"</p>");b.turnons&&(c+="<p><b>Turn ons:</b> "+b.turnons+"</p>");b.turnoffs&&(c+="<p><b>Turn offs:</b> "+b.turnoffs+"</p>");b.fantasy&&(c+="<p><b>Fantasies:</b> "+b.fantasy+"</p>");b.interest&&(c+="<p><b>Interests:</b> "+b.interest+"</p>")}else c+='<p class="empty">There is no profile information for this user.</p>';a.video_url&&(site.clicktocall.wamwm_video_url=a.video_url);$("#acd_menu article[data-guts=profile] section").html()!=
c&&$("#acd_menu article[data-guts=profile] section").html(c);b="";if(a.debits){b+="<h1>Most recent activity with <span>"+a.profile_source.title+"</span></h1>";for(var d in a.debits){c=a.debits[d];var e="",f="",g=c.date_created;switch(parseInt(c.debit_type_id)){case 1:e="sprite_public icon_16_phone";f+="<b>";f=2==c.rate_type_id?f+"Flat Rate":3==c.rate_type_id?f+"Introductory Rate":11==c.rate_type_id?f+"Skype":f+"Pay Per Minute";var h=parseFloat(c.price_commission);c.minutes||(c.minutes=0);c.phone_call_date_end&&
(g=c.phone_call_date_end);f+="</b> call for <b>"+parseInt(c.minutes)+' minutes</b> earning you <span class="green">$'+h.formatMoney(2,".",",")+"</span>";break;case 2:f+="<b>"+c.product_title+"</b> ";c.product_type_id=parseInt(c.product_type_id);2==c.product_type_id?(e="sprite_public icon_16_book",f+="story"):3==c.product_type_id?(e="sprite_public icon_16_document",f+="document"):4==c.product_type_id?(e="sprite_public icon_16_document",f+="gallery"):(e="sprite_public icon_16_bag",f+="unknown");h=parseFloat(c.price_commission);
f+=' earning you <span class="green">$'+h.formatMoney(2,".",",")+"</span>";break;case 4:e="sprite_public icon_16_mail";h=parseFloat(c.price_commission);f+='<b>Message</b> earning you <span class="green">$'+h.formatMoney(2,".",",")+"</span>";break;case 5:h=parseFloat(c.price_commission);1==c.product_static_type_id?(e+="sprite_public icon_16_money",f+="<b>"+site.vars.words.tip+'</b> earning you <span class="green">$'+h.formatMoney(2,".",",")+"</span>"):2==c.product_static_type_id&&(e+="sprite_public icon_16_gift",
f+="<b>"+c.product_static_title+'</b> gift earning you <span class="green">$'+h.formatMoney(2,".",",")+"</span>");break;case 6:h=parseFloat(c.price_commission);e="sprite_public icon_16_chat";f+='<b>Web Chat</b> earning you <span class="green">$'+h.formatMoney(2,".",",")+"</span>";break;case 8:h=parseFloat(c.price_commission);e="sprite_public icon_16_sms";f+='<b>SMS text message</b> earning you <span class="green">$'+h.formatMoney(2,".",",")+"</span>";break;case 9:h=parseFloat(c.price_commission),
e="sprite_public icon_16_record",f+='<b>Call Recording</b> earning you <span class="green">$'+h.formatMoney(2,".",",")+"</span>"}f+=' <time title="'+moment.utc(g).local().format("YYYY-MM-DD HH:mm:ss")+'" data-ts="'+g+'" data-utc="1">'+moment(g).format("MM/DD/YY")+"</time>";b+='<i class="'+e+'"></i>'+f+'<br clear="all" />'}}else b+="<b>There is currently no history with <span>"+a.profile_source.title+'</span></b><br clear="all" />';$("#acd_menu article[data-guts=history] section").html()!=b&&$("#acd_menu article[data-guts=history] section").html(b);
d="";if(a.mails){d+="<h1>Recent mail from <span>"+a.profile_source.title+"</span></h1>";for(var k in a.mails)b=a.mails[k],d+='<a href="'+site.url.current+"members/messages/view/?cur_box=inbox&opid="+b.other_profile_id+"&id="+b.thread_id+'"><i class="sprite_public icon_16_mail"></i>'+b.subject+'</a><time title="'+b.date_created+'" data-ts="'+b.date_created+'">'+moment(b.date_created).format("MM/DD/YYYY")+"</time>"}else d+="<b>There is currently no mail from <span>"+a.profile_source.title+'</span></b><br clear="all" />';
$("#acd_menu article[data-guts=mail] section").html()!=d&&$("#acd_menu article[data-guts=mail] section").html(d);a.profile_source.date_favorited?$("#acd_menu .favorite").attr("data-favorite","true"):$("#acd_menu .favorite").attr("data-favorite","false");a.profile_source.date_blocked?$("#acd_menu .block").attr("data-blocked","true"):$("#acd_menu .block").attr("data-blocked","false");a.wamwm_id?$("div#acd_menu span#wamwm").removeClass("hide"):$("div#acd_menu span#wamwm").addClass("hide")};
site.clicktocall.acd.talker.dialog.render=function(a){site.clicktocall.acd.talker.events();if(!(a&&a.profile_source&&a.profile_target&&a.rate))return $("#acd_launch").click(),!1;var b=_.get(a,"chat_id")?"Chat":"Call",c=_.get(a,"chat_id")?"chat":"phone";$("#acd_menu").remove();if(!$("#acd_menu").length){var d="Unknown";switch(a.rate.rate_type_id){case "1":case "17":d="Pay Per Minute";break;case "2":case "18":d="Flat Rate Package";break;case "3":d="Intro Rate Package";break;case "5":d="Live Call";break;
case "6":d="Virtual Chat";break;case "7":d="Live Call - Flat Rate";break;case "11":d="Skype";break;case "19":d="Watch with Me",site.clicktocall.wamwm_video_url=a.video_url}a.wamwm_id&&(d="Watch with Me",site.clicktocall.wamwm_video_url=a.video_url);switch(_.parseInt(a.phone_call_status_id)){case 1:var e='<span class="green">Connecting</span>';break;case 2:e='<span class="green">'+b+" In Progress</span>";break;case 3:case 4:e='<span class="red">Missed '+b+"</span>";site.clicktocall.close_hm_window();
break;default:e='<span class="red">'+b+" Ended</span>",site.clicktocall.close_hm_window(),$("div#acd_menu span#wamwm").addClass("hide")}var f=_.get(a,"profile_source.avatar_https")||site.url.current+"images/_default_avatar.png",g=_.get(a,"profile_target.avatar_https")||_.get(FlowMaster,"data.talker.avatar")||site.url.current+"images/_default_avatar.png";site.debug("site.clicktocall.acd.talker.dialog.render",f,a.profile_source,g,a.profile_target);a='\t\t\t<div id="acd_menu" class="drop_menu">\t\t\t\t<i class="fas fa-times menu_close"/>\t\t\t\t<h2>Active '+
b+' Display</h2>\t\t\t\t<br/>\t\t\t\t<header>\t\t\t\t\t<div class="first">\t\t\t\t\t\t<ins>caller</ins>\t\t\t\t\t\t<img src="'+f+'" />\t\t\t\t\t\t<a href="'+site.url.current+"caller/"+a.profile_source.title_rewrite+'/">'+a.profile_source.title+'</a><br/>\t\t\t\t\t</div>\t\t\t\t\t<div class="last">\t\t\t\t\t\t<ins>you</ins>\t\t\t\t\t\t<img src="'+g+'" />\t\t\t\t\t\t<a href="'+site.url.current+"p/"+a.profile_target.profile_id+'/">'+a.profile_target.title+'</a><br/>\t\t\t\t\t</div>\t\t\t\t\t<br/>\t\t\t\t</header>\t\t\t\t<nav data-id="'+
a.profile_target.profile_id+'" data-profile_id="'+a.profile_source.profile_id+'">\t\t\t\t\t<button data-page="call" class="hl first" data-html="View '+b+' Status"><i class="sprite_public icon_16_'+c+'"></i>'+b+'</button>\t\t\t\t\t<button data-page="profile" data-html="View Caller Profile"><i class="sprite_public icon_16_info"></i>Profile</button>\t\t\t\t\t<button data-page="history" data-html="View Caller History"><i class="sprite_members icon_16_history"></i>History</button>\t\t\t\t\t<button data-page="mail" data-html="View Caller Mail"><i class="sprite_public icon_16_mail"></i></button>\t\t\t\t\t<button data-page="notes" data-note="'+
(a.profile_source.profile_note?"true":"false")+'" data-html="View/Add Notes For Caller"><i class="sprite_members icon_16_note"></i></button>\t\t\t\t\t<button data-html="Add/Remove Caller To Favorites" data-type="profile" data-id="'+a.profile_target.profile_id+'" data-profile_id="'+a.profile_source.profile_id+'" data-favorite="'+(a.profile_source.date_favorited?"true":"false")+'" class="favorite"><i class="sprite_members icon_16_heart"></i></button>\t\t\t\t\t<button data-html="Block/Unblock Caller" data-profile_id="1" data-blocked="'+
(a.profile_source.date_blocked?"true":"false")+'" data-id="2" class="block last"><i class="sprite_members icon_16_cancel"></i></button>\t\t\t\t</nav>\t\t\t\t<article data-guts="call">\t\t\t\t\t<br/>\t\t\t\t\t<i class="public_sprite icon_128_chat"></i>\t\t\t\t\t<div>\t\t\t\t\t\t<label>Status:</label> <b id="acd_call_status">'+e+'</b><br clear="all" />\t\t\t\t\t\t<label>Type:</label> <b>'+d+'</b><br clear="all" />\t\t\t\t\t\t<label>Price:</label> <b>'+(a.rate.is_ppm?"$"+a.rate.price+"/min":"$"+a.rate.price+
" for "+a.rate.minutes+" mins")+'</b><br clear="all" />\t\t\t\t\t\t<label>Started:</label> <b id="acd_call_started">'+(1!=a.phone_call_status_id?moment().utc(a.date_start).local().calendar():"...")+'</b><br clear="all" />\t\t\t\t\t\t<label>'+(a.rate.is_ppm?"Time Elapsed:":"Time Remaining:")+'</label> <b class="acd_time_elapse">0 mins 0 secs</b><br clear="all" />'+(a.rate.is_ppm?'<label>Earnings:</label> <b><span class="green acd_price">$0.00</span></b><br clear="all" />':"")+'\t\t\t\t\t\t<span id="wamwm"><label id="wamwm">Watch with Me:</label> <a href="#" onclick="launch_video();" id="launch_video" data-url="'+
(a.video_url?a.video_url:"")+'">Open Video Player</a><br clear="all" /><br/></span>\t\t\t\t\t</div>\t\t\t\t</article>\t\t\t\t<article data-guts="profile" class="hide" id="acd_profile">\t\t\t\t\t<section></section>\t\t\t\t\t<a class="button2" style="text-align: center" href="'+site.url.current+"caller/"+a.profile_source.title_rewrite+'">View Profile</a>\t\t\t\t</article>\t\t\t\t<article data-guts="history" class="hide">\t\t\t\t\t<section></section>\t\t\t\t\t<a class="button2" style="text-align: center" href="'+
site.url.current+"members/history/?spid="+a.profile_source.profile_id+'">View Full History</a>\t\t\t\t</article>\t\t\t\t<article data-guts="mail" id="acd_mail" class="hide">\t\t\t\t\t<section></section>\t\t\t\t\t<a class="button2" style="text-align: center" href="'+site.url.current+'members/messages/">View All Messages</a>\t\t\t\t</article>\t\t\t\t<article data-guts="notes" class="hide" id="acd_notes">\t\t\t\t\t<section>\t\t\t\t\t\t<h1>My notes for <span>'+a.profile_source.title+"</span></h1>\t\t\t\t\t\t<textarea>"+
(a.profile_source.profile_note?a.profile_source.profile_note:"")+'</textarea><br/>\t\t\t\t\t</section>\t\t\t\t\t<a class="button2" id="acd_note_save">Save</a> <a class="button3" id="acd_note_delete">Delete</a> <i style="display:none;position:relative;top:5px;left:6px;" class="green bold">Saved!</i><br/><br/>\t\t\t\t</article>\t\t\t</div>';$("#acd").length?$("#acd").html(a):$("#settings_menu").after(a);site.clicktocall.acd.talker.events()}};
site.clicktocall.acd.talker.dialog.initialize=function(a,b){site.clicktocall.acd.visible=!0;if(site.clicktocall.acd.talker.dialog.initialized)site.clicktocall.acd.talker.dialog.refresh(),site.clicktocall.acd.talker.dialog.show();else{var c=site.clicktocall.acd.talker.dialog.data;a=site.clicktocall.acd.talker.dialog.data=site.clicktocall.data;site.clicktocall.acd.talker.dialog.initialized=!0;site.ping.show_acd=!0;site.get_ajax("ajax/ctc-acd/?type="+(_.get(a,"chat_id")?"chat":"ctc"),function(a){_.get(a,
"user.ctc.phone_call_id")!=_.get(c,"phone_call_id")&&$("#acd_menu").remove();site.clicktocall.acd.talker.dialog.data=_.get(a,"user.ctc");_.set(site,"clicktocall.data.rate.commission",_.get(site,"clicktocall.acd.talker.dialog.data.rate.commission"));site.clicktocall.acd.talker.dialog.render(_.get(a,"user.ctc"));site.clicktocall.acd.talker.dialog.events();site.clicktocall.acd.talker.dialog.refresh();site.clicktocall.acd.talker.dialog.show()})}};
site.clicktocall.acd.talker.dialog.events=function(){$("#acd_menu").on("click",function(a){a=$(a.target);!a.is("a")||a.hasClass("button2")||a.hasClass("button3")?site.window.bypass.click=!0:site.window.bypass.click=!1});$("#acd_menu nav button").on("click",function(){var a=$(this).data("page");a&&($("#acd_menu > nav > button").removeClass("hl"),$("#acd_menu > nav > button[data-page="+a+"]").addClass("hl"),$("#acd_menu > article").addClass("hide"),$("#acd_menu > article[data-guts="+a+"]").removeClass("hide"))});
$("#acd_menu #acd_note_delete").on("click",function(){site.request("ajax/note.php",{method:"delete",source_profile_id:site.clicktocall.acd.talker.dialog.data.profile_target.profile_id,target_profile_id:site.clicktocall.acd.talker.dialog.data.profile_source.profile_id});$("#acd_menu button[data-page=notes]").attr("data-note","false");$("#acd_menu [data-guts=notes] textarea").val("");$(this).parent().find("i").fadeIn(300).delay(2E3).fadeOut(300)});$("#acd_menu #acd_note_save").on("click",function(){site.request("ajax/note.php",
{method:"post",source_profile_id:site.clicktocall.acd.talker.dialog.data.profile_target.profile_id,target_profile_id:site.clicktocall.acd.talker.dialog.data.profile_source.profile_id,value:$("#acd_menu [data-guts=notes] textarea").val()});$("#acd_menu button[data-page=notes]").attr("data-note","true");$(this).parent().find("i").fadeIn(300).delay(2E3).fadeOut(300)});$("#acd_menu button.block").unbind("click");$("#acd_menu button.block").on("click",function(){var a="block";"true"==$("#acd_menu .block").attr("data-blocked")?
(a="unblock",$("#acd_menu .block").attr("data-blocked","false")):$("#acd_menu .block").attr("data-blocked","true");site.request("global/ajax/"+a+"/",{other_id:site.clicktocall.acd.talker.dialog.data.profile_source.profile_id,my_id:site.clicktocall.acd.talker.dialog.data.profile_target.profile_id});return!1});$("#acd_menu button.favorite").off("click");$("#acd_menu button.favorite").on("click",function(a){a.preventDefault();site.favorite.toggle(this)});$("#acd_menu a.button2").click(function(){$(this).attr("href")&&
(window.location=$(this).attr("href"))})};
site.clicktocall.acd.talker.dialog.show=function(a){a=_.isFunction(a)?site.callback(a):function(){};$("#body").animate({opacity:.5},250);"none"==$("#acd_menu").css("display")?(3==site.theater.id&&$("#acd_menu").parent().css({top:$("#acd_launch").offset().top+$("#acd_launch").outerHeight(),left:$("#acd_launch").offset().left-$("#acd_menu").outerWidth()/2+$("#acd_launch").outerWidth()/2,marginLeft:0}),$("#acd_menu").show("drop",{direction:"bottom"},300,function(){site.clicktocall.acd.talker.timer_callback();a&&
a()})):a&&a();return!0};site.clicktocall.acd.talker.dialog.hide=function(a){a=_.isFunction(a)?site.callback(a):function(){};site.clicktocall.acd.visible=!1;$("#body").animate({opacity:1},250);$("#acd_menu").hide("drop",{direction:"top"},300,function(){_.isFunction(a)&&a()})};
site.clicktocall.acd.talker.dialog.destroy=function(a){a=_.isFunction(a)?site.callback(a):function(){};site.clicktocall.acd.talker.dialog.initialized=!1;site.clicktocall.acd.visible=!1;$("#acd_menu").hide("drop",{direction:"right"},300,function(){_.isFunction(a)&&a()})};site.clicktocall.close_hm_window=function(){site.clicktocall.hm_window&&(site.clicktocall.hm_window.close(),delete site.clicktocall.hm_window);$("label#wamwm").hide();$("a#launch_video").hide()};
window.addEventListener("beforeunload",function(a){site.clicktocall.close_hm_window()});function launch_video(){site.clicktocall.hm_window=window.open(site.clicktocall.wamwm_video_url,"ttmhmplayer","directories=0,location=0,menubar=0,resizable=1,toolbar=0,status=yes,scrollbars=yes,width=860,height=500,left=10,top=10,screenX=10,screenY=10")};

var BASE_PATH=null,USER_TYPE=null,REQUIRE_CALLER_GENDER=!0,public_version=11,cvs_cache_version=7;$(function(){BASE_PATH=site.url.current;USER_TYPE=site.user.type_id?site.user.type_id:!1;$(".phone1:eq(0)").bind("keyup",function(){2<$(this).val().length&&$(".phone1:eq(1)").focus()});$(".phone1:eq(1)").bind("keyup",function(){2<$(this).val().length&&$(".phone2").focus()});$("span.time.moment").each(function(a,b){a=$(b);a.text(moment(a.text()).fromNow())})});site.vars=site.vars||{};
site.vars.text={favorite_added:"Added to favorites",favorite_removed:"Favorite removed",is_talking:"I'm online but talking on the phone with someone else right now."};var is={email:function(a){return-1<a.search(/^([a-zA-Z0-9_\.\-\+])+@(([a-zA-Z0-9\-])+\.)+([a-zA-Z]{2,3})+$/)?!0:!1},mobileDevice:!1};$(function(){$(window).on("touchstart",function(){is.mobileDevice=!0})});function css_stars(a){return Math.round(2*a)/2*10}
function seconds_to_stamp(a){$hours=Math.floor(3600<a?a/3600:0);a-=3600*$hours;$mins=Math.floor(60<a?a/60:0);a-=60*$mins;$secs=Math.floor(0<a?a:0);$hours&&($hours=10>$hours?"0"+$hours:$hours);$mins=10>$mins?"0"+$mins:$mins;$secs=10>$secs?"0"+$secs:$secs;return($hours?$hours+":":"")+$mins+":"+$secs}var Status={ids:[],init:function(){setTimeout(function(){$(".check_status_widget").each(function(){Status.ids.push($(this).attr("data-id"))})},1E3)}};$(function(){"object"==typeof Status&&Status.init()});
site.search_filter={};site.search_filter.init=function(){$("#search_phrase").bind("input",function(){var a=$("#search_phrase").offset();$("#search_filters").css({top:a.top+27,left:a.left});$(this).val()?$("#search_filters:hidden").stop().show():$("#search_filters:visible").stop().hide("drop",{direction:"down"})}).bind("focus",function(){var a=$("#search_phrase").offset();$("#search_filters").css({top:a.top+27,left:a.left});$("#search_filters:hidden").stop().show()})};
site.search_filter.set=function(a,b){switch($(a).attr("type")){case "checkbox":a=$(a).is(":checked")?1:"";break;default:a=$(a).val()}$("#quick_search input[name=f_"+b+"]").val(a)};var Sidebar={init:function(){$("#categories span").click(function(){$dir=$(this).text();switch($dir){case "-":$new_txt="+";$(this).parent().find("ul").slideUp();break;case "+":$new_txt="-",$(this).parent().find("ul").slideDown()}$(this).html($new_txt)})}};site.favorite={};
site.favorite.events=function(){$(document).off("click","a.favorite");$(document).on("click","a.favorite",function(){var a=$(this),b=a.data(),c=!b.favorite;b.debit_id=a.attr("data-debit_id");site.favorite.save(b.source,b.target,c,function(a){a.success&&$('a.favorite[data-source="'+b.source+'"][data-target="'+b.target+'"]').each(function(){$(this).attr("data-favorite",c);$(this).data("favorite",c)})},_.get(b,"debit_id"));return!1})};
site.favorite.toggle=function(a){if(site.user.id){var b=!$(a).data("favorite")||"false"==$(a).data("favorite")||0==$(a).data("favorite");$html=b?'<img width="12" height="12" src="'+site.url.current+'images/check.tiny.png" style="position:relative;left:-5px;top:2px;" />'+site.vars.text.favorite_added:'<img width="12" height="12" src="'+site.url.current+'images/icon_16_close.png" style="position:relative;left:-5px;top:2px;" />'+site.vars.text.favorite_removed;$data=$(a).parent().data();site.favorite.save($data.id,
$data.profile_id,b,function(){$(a).data("favorite",b);$(a).attr("data-favorite",b);$pos=$(a).offset();$(".dialog_favorite_added").remove();$("body").append('<div class="dialog_favorite_added hide">'+$html+"</div>");$(".dialog_favorite_added").css({top:$pos.top,left:$pos.left}).show("drop",{direction:"down"});$(".dialog_favorite_added").delay(1800).hide("drop",{direction:"up"})})}else window.location=site.url.current+"login/?return="+window.location.pathname+"&alert=You must be logged in to use this feature."};
site.favorite.save=function(a,b,c,d,e){site.request("ajax/contacts.php",{action:"toggle_favorite",source:a,target:b,status:c,debit_id:e},d)};
var Block={init:function(){$(".block").on("click",function(a){a.preventDefault();Block.toggle(this)})},toggle:function(a){if(site.user.id){Block.blocked=$(a).attr("data-blocked");Block.action="block";var b="Block";"true"==Block.blocked&&(Block.action="unblock",b="Unblock");Block.obj=$(a);if("1"==site.user.type_id||"unblock"==Block.action&&"true"==Block.blocked&&"false"==$(a).data("user_blocked"))Block.save(a,{action:Block.action,type:"profile"},Block.response);else if($(a).attr("profile-page")){var c=
$(a).attr("data-profile_id");b=$(a).attr("data-profile_id").split(",");a=$(a).attr("data-profile_title").split(",");var d="",e=0;for(e;e<b.length;e++)d+="<option value="+b[e]+">"+a[e]+"</option>\n";1<e&&(d+="<option all-profiles='true' value="+b[0]+">All Profiles</option>\n");var f=b[0];site.dialog.custom({classes:"dialog-green contact-block",title:"Blocking Options:",html:"<div align='center'>\t\t\t\t   <p style='font-size:220%;'>Select Profile</p>\t\t\t\t   <select name='profileSelector' id='profileSelector' >\t\t\t\t   \t"+
d+"\t\t\t\t   </select>\t\t\t\t   \t<br></br>\t\t\t\t   <button data-profile_id="+b[0]+" data-action='block' id='blockButton' data-id="+b[0]+" data-type='profile' class='dialog-button-yes'>Block</button>\t\t\t\t   <button data-profile_id="+b[0]+" data-action='unblock' id='unblockButton' data-id="+b[0]+" data-type='profile' class='dialog-button-yes'>Unblock</button>\t\t\t       <button data-type='cancel' class='dialog-button-no'>Cancel</button>\t\t\t       </div>"});var l=$("button[data-type=profile]").parents("section").attr("id");
$("#profileSelector").change(function(){f=$(this).val();$(this).find(":selected").attr("all-profiles")?(document.getElementById("blockButton").setAttribute("data-type","all"),document.getElementById("unblockButton").setAttribute("data-type","all")):(document.getElementById("blockButton").setAttribute("data-type","profile"),document.getElementById("unblockButton").setAttribute("data-type","profile"))});$("section#"+l+".dialog button").bind("click",function(a){$("section#"+l+".dialog button").unbind("click");
type=$(this).data("type");if("cancel"==type)return Block.obj.attr("data-profile_id",c),!1;Block.action=$(this).data("action");Block.obj.attr("data-profile_id",f);Block.save(Block.obj,{action:Block.action,type:type},Block.response);Block.obj.attr("data-profile_id",c)})}else site.dialog.custom({classes:"dialog-green contact-block",title:b+" Option:",html:"<button data-type='profile' class='dialog-button-yes'>"+b+" from this profile only</button><p/>\t\t\t\t\t\t<button data-type='all' class='dialog-button-yes'>"+
b+" from all of my profiles</button><p/>\t\t\t\t\t\t<button data-type='cancel' class='dialog-button-no'>Cancel</button>"}),l=$("button[data-type=profile]").parents("section").attr("id"),$("section#"+l+".dialog button").bind("click",function(a){$("section#"+l+".dialog button").unbind("click");type=$(this).data("type");if("cancel"==type)return!1;Block.save(Block.obj,{action:Block.action,type:type},Block.response)})}else window.location=site.url.current+"login/?return="+window.location.pathname+"&alert=You must be logged in to use this feature."},
response:function(a){if(a.error)return site.dialog.alert(a.error),a.reload&&(window.location=window.location),!1;"undefined"==typeof a.user_blocked&&(a.user_blocked=-1);$.each(a.source_profile_id,function(b,c){$.each(a.target_profile_id,function(b,e){b=$("a.block[data-profile_id="+c+"][data-id="+e+"]");0<$(b).length?($(b).attr("data-html","block"==a.action?"Unblock":"Block"),$(b).attr("data-blocked","block"==a.action?"true":"false"),-1!=a.user_blocked&&$(b).attr("data-user_blocked",a.user_blocked),
$(b).parent().trigger("mouseout").trigger("mouseover")):0<(b=$("li.block[data-profile_id="+c+"][data-id="+e+"]")).length&&($(b).attr("data-html","block"==a.action?"Unblock":"Block"),$(b).attr("data-blocked","block"==a.action?"true":"false"),$("#li_block_inner_text").text("block"==a.action?"Unblock":"Block"),$("#li_block_inner_img").attr("style","block"==a.action?"color:red":"color:grey"),-1!=a.user_blocked&&$(b).attr("data-user_blocked",a.user_blocked),$(b).parent().trigger("mouseout").trigger("mouseover"))})})},
save:function(a,b,c){if(!site.user.id)return!1;a={other_id:$(a).attr("data-id"),my_id:$(a).attr("data-profile_id"),type:b.type};site.request("global/ajax/"+b.action+"/",a,c)}},Form_Errors={clear:function(){$(".form_error_dialog").remove();$("#alert_error").hide();$("#alert_warning").hide();$("#alert_success").hide()},init:function(a){"string"==typeof a&&(a=eval("("+a+")"));$error_count=0;$.each(a,function(a,c){$obj=$('#body [name="'+a+'"]');$obj.length||($obj=$(a));0<$obj.length&&($obj.focus(function(){$('div.form_error_dialog[data-name="'+
a+'"]').fadeOut();$(this).removeClass("form_error")}),$obj.click(function(){$('div.form_error_dialog[data-name="'+a+'"]').fadeOut();$(this).removeClass("form_error")}),$obj.addClass("form_error"),$pos=$obj.offset(),$top=$pos.top,c&&0==$('div.form_error_dialog[data-name="'+a+'"]').length&&$("body").append('<div data-name="'+a+'" class="form_error_dialog hide">'+c+"</div>"),$eobj=$('div.form_error_dialog[data-name="'+a+'"]'),"true"!=$obj.attr("data-error-ignore")&&$eobj.css({top:$top,left:$pos.left+
$obj.outerWidth()+5}).delay(100).show("drop",{direction:"left"}),$error_count++)})},reposition:function(){$("div.form_error_dialog").each(function(a,b){$pos=$(this).offset();a=$(this).attr("data-name");$obj=$('#body [name="'+a+'"]');$obj.length||($obj=$(a));$pos=$obj.offset();$top=$pos.top;"true"!=$obj.attr("data-error-ignore")&&$(this).css({top:$top})})}},User_Menu={timeout_id:null,init:function(){$("#call_banner").on("click",function(){if($("#services_online .ctc:first").length)$("#services_online .ctc:first").click();
else if(site.vars.user&&site.vars.user.id){var a=$("#call_banner").data("info");$("#window_fade").fadeOut(500);site.dialog.alert("To speak to "+a.title+" Call 800-HOT-CHAT and enter profile #"+a.profile_id)}else a=$("#call_banner").data("info"),site.user.login.show({profile_id:a.profile_id})});$(document).on("click touchstart","[data-menu]",function(a){if(!_.get(is,"mobileDevice")||"click"!==_.get(a,"type")){a.preventDefault();a=$(this).attr("data-menu");if($("#"+a).is(":visible"))return User_Menu.close();
User_Menu.open($(this))}}).on("click touchstart",".drop_menu_underlay",function(a){_.get(is,"mobileDevice")&&"click"===_.get(a,"type")||User_Menu.close()})},open:function(a){"object"==typeof WalletWidget&&"function"==typeof WalletWidget.hide&&WalletWidget.hide();"object"==typeof StatusWidget&&"function"==typeof StatusWidget.hide&&StatusWidget.hide();var b=$(a).attr("data-menu"),c=$(a).attr("data-menu-align");$(".drop_menu:visible").hide();switch(site.theater.id){default:$("#body,#footer").animate({opacity:.5},
100);var d=$(a).position();break;case 3:case "3":d=$(a).attr("data-menu"),$("body > .drop_menu_underlay").length||$("body").append('<div class="drop_menu_underlay"></div>'),$("body > #"+d).length||$("body").append($("#"+d)),$(".drop-down[active]").removeAttr("active"),$(".drop-down-underlay[active]").removeAttr("active"),d=$(a).offset()}var e=d.top+$(a).outerHeight()+12,f=0;switch(c){case "center":f=d.left+$(a).outerWidth()/2-$("#"+b).outerWidth()/2;break;case "right":f=d.left+$(a).outerWidth()-$("#"+
b).outerWidth()+10}"acd_menu"!=b&&$(".drop_menu_underlay").show();$("#"+b).css({top:e,left:f}).show()},close:function(){$(".drop_menu").hide();$(".drop_menu_underlay").hide();$("#body,#footer").animate({opacity:1},100);return!1},fade:function(){$("nav.logged_in div.drop_menu").length&&(User_Menu.timeout_id=setTimeout(User_Menu.close,750))},toggle:function(a){$menu_obj=$("#"+$(a).attr("data-menu"));$menu_width=$menu_obj.outerWidth();$obj_width=$(a).outerWidth();$align=$(a).attr("data-menu-align");
$pos=$(a).position();switch($align){case "right":$left=$pos.left+$obj_width-$menu_width;break;case "center":$left=$pos.left+$obj_width/2-$menu_width/2;break;case "left":$left=$pos.left}$menu_obj.is(":visible")?($(a).removeClass("sel"),$menu_obj.hide()):($(".drop_menu").hide(),$("nav.logged_in .sel").removeClass("sel"),$(a).addClass("sel"),$menu_obj.css({top:$pos.top+$(a).outerHeight()+10,left:$left}).show())},status:function(a){$type=$(a).attr("data-type");$cur=$(a).hasClass("online")?!0:!1;$nxt=
"is_skypeable"==$type?1==$cur?1:2:1==$cur?0:1;site.request("ajax/status/",{key:$type,value:$nxt},function(b){if(!b)return site.dialog.alert("Unable to reach server. Please try again in a few moments..."),!1;if(b.err)return site.dialog.alert(b.err),!1;switch($cur){case !0:$(a).removeClass("online").addClass("offline").html("Offline");break;case !1:$(a).removeClass("offline").addClass("online").html("Online")}$online=$("#status_menu li a.online").length;$offline=$("#status_menu li a.offline").length;
$all_status_color="red";$online&&!$offline?($all_status_txt=$all_status="Online",$all_status_color="green"):$offline&&!$online?$all_status_txt=$all_status="Offline":$offline&&$online&&($all_status="Partial",$all_status_color="yellow",$all_status_txt="Online");$("#header .status .sprite_members").removeClass("icon_10_orb_red").removeClass("icon_10_orb_yellow").removeClass("icon_10_orb_green").addClass("icon_10_orb_"+$all_status_color);$("#header .status").removeClass().addClass("sel status "+$all_status.toLowerCase()).find("span")});
return!1}},Validate={validate:function(a){var b={},c=0;$.each(a,function(a,e){if(Validate.rules[a]){var d=Validate.rules[a];null===e||"undefined"==typeof e?b[a]=a.replace(/[_]/g," ")+" is invalid. Please try again.":d.minlength&&e.length<d.minlength?(c+=1,b[a]=d.errors.minlength?d.errors.minlength:"Your "+a.replace(/[_]/g," ")+" must at least be "+d.minlength+" characters."):d.maxlength&&e.length>d.maxlength?(c+=1,b[a]=d.errors.maxlength?d.errors.maxlength:"Your "+a.replace(/[_]/g," ")+" cannot contain more than "+
d.maxlength+" characters."):d.regex&&!(new RegExp(d.regex)).exec(e)&&(c+=1,b[a]=d.errors.regex?d.errors.regex:a.replace(/[_]/g," ")+" is invalid. Please try again.")}else b[a]="Invalid request. No validation rule for "+a});return 0==c?!1:b},rules:{routing_number:{maxlength:9,minlength:9,regex:/^[0-9]+$/,errors:{regex:"Your Bank Routing Number is invalid. Please only use the following characters: 0-9."}},account_number:{maxlength:19,minlength:4,regex:/^[0-9]+$/,errors:{regex:"Your Bank Account Number is invalid. Please only use the following characters: 0-9."}},
iban_number:{maxlength:32,minlength:15,regex:/^[A-Za-z0-9]+$/,errors:{regex:"Your IBAN Number is invalid. Please only use the following characters: A-Z and 0-9."}},swift_code:{maxlength:11,minlength:8,regex:/^[A-Za-z0-9]+$/,errors:{regex:"Your Swift Code is invalid. Please only use the following characters: A-Z and 0-9."}},pin:{maxlength:4,minlength:4,regex:/^[^0][0-9]+$/,errors:{empty:"You must enter your PIN number.",regex:"Your PIN is invalid. Please only use the following characters: 0-9 and the first digit cannot be 0."}},
zip:{maxlength:16,minlength:4,regex:/^[A-Za-z0-9]+$/,errors:{empty:"You must enter your zip.",regex:"Your zip is invalid. Please only use the following characters: 0-9."}},state:{maxlength:2,minlength:2,regex:/^[A-Za-z]+$/,errors:{empty:"You must enter your state.",regex:"Your state is invalid. Please try again."}},city:{maxlength:128,minlength:1,regex:/^[A-Za-z ]+$/,errors:{empty:"You must enter your city.",regex:"Your city is invalid. Please only use the following characters: A-Z, and spaces."}},
payee_name:{maxlength:128,minlength:3,regex:/^[A-Za-z0-9 -.]+$/,errors:{empty:"You must enter your payee name.",regex:"Your payee name is invalid. Please only use the following characters: A-Z, 0-9, dashes, and spaces."}},tax_id:{maxlength:20,minlength:4,regex:/^[0-9-.]+$/,errors:{empty:"You must enter your tax id number.",regex:"Your tax id is invalid. Please only use the following characters: 0-9 and dashes."}},first_name:{maxlength:128,minlength:1,regex:/^[A-Za-z0-9 .]+$/,errors:{empty:"You must enter your first name.",
regex:"Your first name is invalid. Please only use the following characters: A-Z, 0-9, .'s and spaces."}},last_name:{maxlength:128,minlength:1,regex:/^[A-Za-z0-9 .-]+$/,errors:{empty:"You must enter your last name.",regex:"Your last name is invalid. Please only use the following characters: A-Z, 0-9, .'s, -'s and spaces."}},username:{maxlength:32,minlength:5,regex:/^[A-Za-z][A-Za-z0-9]+$/,errors:{empty:"You must enter a username.",regex:"Your username is invalid. Please use a combination of the following characters, starting with a letter: A-Z, 0-9 and NO SPACES."}},
address1:{maxlength:30,minlength:4,regex:/^[A-Za-z0-9 ]+$/,errors:{empty:"You must enter your address.",regex:"Your address is invalid. Please only use the following characters: A-Z, 0-9 and spaces."}},address2:{maxlength:30,minlength:1,regex:/^[A-Za-z0-9 ]+$/,errors:{regex:"Your address is invalid. Please only use the following characters: A-Z, 0-9 and spaces."}},email:{maxlength:128,minlength:6,regex:/^[_A-Za-z0-9-]+(\.[_A-Za-z0-9\-\+\.]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*(\.[A-Za-z]{2,3})$/,errors:{empty:"You must enter an email address.",
regex:"You entered an invalid email address."}},password:{maxlength:32,minlength:6,errors:{empty:"You must enter a password."}},confirm_password:{maxlength:32,minlength:6,errors:{empty:"You must confirm your password."}},birthday_month:{regex:/^[0-9]+$/,errors:{empty:"You must enter your birthdate month."}},birthday_day:{regex:/^[0-9]+$/,errors:{empty:"You must enter your birthdate day."}},birthday_year:{regex:/^[0-9]+$/,errors:{empty:"You must enter your birthdate year."}}}};
$(function(){$("#vchat_menu i.menu_close").on("click",User_Menu.close);$('#settings_menu li a[href*="phone/"]').on("click",function(){User_Menu.close();site.phone_widget.load();return!1});$(document.body).on("click","button.ng_phone_manager, a.ng_phone_manager",function(){site.phone_widget.load();return!1});$('#settings_menu li a[href*="profile_caller/"]').on("click",function(){User_Menu.close();site.ng.load("profile_caller");return!1});$("#callerProfile").on("click",function(){site.ng.load("profile_caller");
return!1});$(".caller_subnav a").click(function(a){a.preventDefault();$(this).parent().find("a").removeClass("sel");$(this).addClass("sel");$pg=$(this).attr("data-page");$(".caller_profile_page").hide();$("#caller_profile_"+$pg).show()});$("a[data-page='about']").click();$(".widget_compose").live("click",function(){var a=$(this).data("options");site.compose.load(!1,function(){$("#compose button.to").html('<span><img src="'+a.avatar+'" /> '+a.target_profile_title+"</span>").attr("data-profile-id",
a.target_profile_id).show();$("#compose select[name=from] option[value="+a.profile_id+"]").attr("selected","selected");$("#compose input[name=subject]").focus()});return!1});"object"==typeof site.search_filter&&site.search_filter.init();"object"==typeof Warning&&Warning.init();"object"==typeof Sidebar&&Sidebar.init();"object"==typeof Block&&Block.init();"object"==typeof Advanced&&Advanced.init();"object"==typeof User_Menu&&User_Menu.init();$("#alert_error").show("drop");Form_Errors.reposition();$("#alert_success,#alert_warning").each(function(a){$(this).delay(400*
a).show("drop",{direction:"up"},500)});0<$("#side_ads article").length&&$("#side_ads article").click(function(a){a.preventDefault();$url=$(this).find("a").eq(0).attr("href");window.location=$url});0<$("#alert_success").length&&0==$("#alert_success").attr("data-sticky")&&$("#alert_success").delay(3500).slideUp();setTimeout(function(){"object"==typeof Form_Errors&&"string"==typeof $form_errors&&Form_Errors.init($form_errors)},800);$("#breadcrumb a:first").addClass("first");$("#breadcrumb a:last").addClass("last")});
function require(a,b,c){switch(b){case "js":var d=document.createElement("script");d.type="text/javascript";d.src=a;break;case "css":d=document.createElement("link"),d.rel="stylesheet",d.type="text/css",d.href=a}"undefined"!=typeof d&&(d.onload=c,document.getElementsByTagName("head")[0].appendChild(d))}
function html_element(a){element_closer=output="";open_closer=">";switch(a.type){case "select":output+='<select name="'+a.name+'"';element_closer="\n\t\t\t\t</select>";break;case "text":output+='<input name="'+a.name+'" type="text"';open_closer=" />";a["class"]+=" text";break;case "checkbox":output+='<input name="'+a.name+'" type="checkbox"';open_closer=" /> ";break;case "textarea":output+='<textarea name="'+a.name+'"',element_closer="</textarea>",a["class"]+=" textarea"}a["class"]&&(output+=' class="'+
a["class"]+'"');a.id&&(output+=' id="'+a.id+'"');a.maxlength&&(output+=' maxlength="'+a.maxlength+'"');a.value&&(output+=' value="'+a.value+'"');a.html||(a.html="");return output+=open_closer+a.html+element_closer}function htmlentities(a){return null==a?"":a.replace(/'/g,"&rsquo;")}
jQuery.fn.center=function(){this.css("position","absolute");var a=Math.max(0,($(window).height()-$(this).outerHeight())/2+$(window).scrollTop())+"px";this.css("top",a);a=Math.max(0,($(window).width()-$(this).outerWidth())/2+$(window).scrollLeft())+"px";this.css("left",a);return this};function get(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(window.location.href);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))}
function uri_replace(a,b){get(a)?($string=window.location.search.substring(1),$vars=$string.split("&"),$out=[],$.each($vars,function(c,d){$name=$vars[c].split("=")[0];$val=$vars[c].split("=")[1];$name==a&&($val=b);$val&&($out[c]=$name+"="+$val)}),$url="?"+$out.join("&")):($appender=-1==window.location.href.indexOf("?")?"?":"&",$url=window.location.href+=$appender+a+"="+b);window.location=$url}
function build_query_string(a,b,c){($string=window.location.search.substring(1))?($vars=$string.split("&"),$foundname=!1,$out=[],$.each($vars,function(c,e){$name=$vars[c].split("=")[0];$val=$vars[c].split("=")[1];$name==a&&($val=b,$foundname=!0);"p"==$name&&($val=1);$out[c]=$name+"="+$val}),0==$foundname&&$out.push(a+"="+b),$string=$out.join("&"),$qstring="?"+$string):$qstring="?"+a+"="+b;if(1==c)return $qstring;window.location.search=$qstring;return!1}
site.calc_commission=function(a,b){if("undefined"===typeof b||null==b)return null;"object"!==typeof b&&(b={commission:b});b.suffix=b.suffix||"";a=parseFloat(a);b.commission=parseFloat(b.commission);if(isNaN(a)||isNaN(b.commission))return null;1<b.commission?b.commission*=.01:0>b.commission&&(b.commission=0);return"$"+(a*b.commission).toFixed(2)+b.suffix};site.address={clear_callback:null,select_callback:null};
site.address.load=function(a,b,c,d,e){if(0!=$("#address_book").length&&!d)return!1;site.request("global/ajax/address-load/",{pid:c},function(c){$("body").append(c.html);a&&b&&site.address.show(a,b);"undefined"!=typeof e&&$(a).html(e)})};site.address.close=function(a){return a?$("#address_book").remove():$("#address_book").hide()};
site.address.show=function(a,b,c,d,e,f){if(site.user.id)return c&&(site.address.select_callback=c),!$("#address_book").length||f?(c=$(a).html(),$(a).html("Loading..."),site.address.load(a,b,e,f,c)):(d?($("#address_book .clear_button").show(),site.address.clear_callback=d):($("#address_book .clear_button").hide(),site.address.clear_callback=null),$("body").append($("#window_fade").clone().addClass("extra_window_fade").hide()),$modal=$("#address_book"),site.compose.adjust($(a),$modal,b),site.compose.events()),
$("#address_book input").focus(),!1;window.location=site.url.current+"login/?return="+window.location.pathname+"&alert=You must be logged in to use this feature."};site.address.select=function(a){site.address.select_callback(a)};site.address.select_mass=function(){$("#to_address").html("<span>Mass Message</span>").attr("data-profile-id","ALL");$("#last_log").text("");$("#address_book").hide();$(".extra_window_fade").remove()};
site.address.filter=function(a){$val=$(a).val();""==$val?($("#address_book li.person").show(),$("#address_book li.person").length&&$("#address_book li.empty").hide()):($("#address_book li.person").hide().each(function(){$txt=$(this).text();-1!=$txt.toLowerCase().indexOf($val.toLowerCase())&&$(this).show()}),0==$("#address_book li.person:visible").length?($("#address_book li.group_header").hide(),$("#address_book li.empty").show()):($("#address_book li.group_header").show(),$("#address_book li.empty").hide()))};
site.price={approve:null,recommended_price:parseFloat(site.data_get("message_price_default")),recommended_option:null};site.price.change=function(a){a=$(a);var b=a.find("select[name=price]").val();"c"===b?(a.find("input.custom").show().focus().val(a.data("default")),a.find(".msg_custom_price").change()):(a.find("input.custom").hide(),a.find(".payout").html(site.calc_commission(b,site.data_get("message_commission"))))};
site.price.reset=function(a){a?(site.price.recommended_price=0,site.price.recommended_option=$("#price_dialog option.recommended").detach()):Attachment.price()};
site.price.recommended=function(){$price=site.price.recommended_price;$price==site.data_get("message_price_default")||0==$price?site.price.recommended_option=$("#price_dialog option.recommended").detach():($("#price_dialog option[value=c]").before(site.price.recommended_option),$("#price_dialog option.recommended").val($price).html("$"+$price+" - Recommended").attr("selected",!0))};
site.price.confirm=function(a,b,c,d){d&&(site.price.approve=d);c=site.profile.profile_id?site.profile.profile_id:$("button.to").data("profile-id");site.request("global/ajax/compose-price-load/",{to:c},function(a){a=$(a.html).find("div:first").html();$("#price_dialog").html(a);site.price.recommended_option=$("#price_dialog select option.recommended").detach();site.demand.js("Rates","members/profile_rates",function(){$("#message_price .msg_custom_price").on("change paste input",function(a){a=$("ul.attachments").children().size()-
1;a=0<a?parseFloat(a*parseFloat(site.data_get("message_voicemail_price_max_limit")).toFixed(2)):parseFloat(site.data_get("message_price_max_limit").toFixed(2));$("#message_price").attr("data-max",a);a=$(this).val();var b=Rates.validate($("#message_price"),!0);$("#message_price .payout").html(site.calc_commission(b,site.data_get("message_commission")));if(""===a&&0===b||a===b)return!1;$("#message_price .msg_custom_price").val(b)})})});$pos=$(a).offset();$price=$("#price_dialog");0==$(".price_frame").length&&
($html='<div class="price_frame" onclick="site.price.cancel();"></div>',$("body").append($html));if($price.is(":hidden")){switch(b){case "left":$top=$pos.top-$price.outerHeight()/2;$left=$pos.left-$price.outerWidth()-10;break;case "right":$top=$pos.top-$price.outerHeight()/2;$left=$pos.left+$(a).outerWidth()+10;break;case "top":$top=$pos.top-$price.outerHeight(),$left=$pos.left+$(a).outerWidth()/2-$price.outerWidth()/2}$(".price_frame").show();$price.css({top:$top,left:$left}).show("drop",{direction:"up"},
function(){if(1==parseInt(site.user.type_id)){var a=$("#is_first_contact").val(),b=site.data_get("message_price_default"),c=site.data_get("message_price_default_with_attachment");1<=$(".message_reply .attachments li").not(".attachments_view, .attachment_header").length||1<=$(".compose_box .attachments li").not(".attachments_view, .attachment_header").length?($("#caller_contact_regular .message_price").text("$"+c),$("#caller_contact_regular").show(),site.compose.price=c):1>$(".message_reply .attachments li").not(".attachments_view, .attachment_header").length&&
1>$(".compose_box .attachments li").not(".attachments_view, .attachment_header").length&&!a?($("#caller_contact_regular .message_price").text("$"+b),$("#caller_contact_regular").show(),site.compose.price=b):a&&($("#caller_contact_regular").hide(),$("#caller_first_contact_free").removeClass("hide"),site.compose.price=0)}else $("#price_dialog select[name=price]").change()});site.price.recommended()}};site.price.cancel=function(){$("#price_dialog").hide("drop",{direction:"down"});$(".price_frame").remove()};
site.compose={data:{},price:0,voice_interval:null,skip_voice_load:!1,is_mass_message:!1,source_profile_id:null};site.compose.options={from_filtered:0,to_locked:0};site.compose.get_message_attachments=function(a){var b=[];a.find("[data-type][data-id]").each(function(a,d){a=$(d).data();a.type&&a.id&&b.push(a.type+"_"+a.id)});return b.join(",")};
site.compose.get_message_targets=function(a){var b=[];if("all"===$("#to_addresses_select").val())return"all";$("#to_addresses button[data-profile-id].to:visible").each(function(a,d){a=$(d).data();a.profileId&&b.push(a.profileId)});return b};
site.compose.mass_message_send=function(){return site.dialog.confirm("Are you sure you want to deliver this Mass Message?",function(a){if(!a)return!1;a=$("#compose");var b=a.find(":input").get_form_data();b.attachments=site.compose.get_message_attachments(a);b.targets=site.compose.get_message_targets(a);return site.compose.mass_message_send_confirmed(b)})};
site.compose.mass_message_send_confirmed=function(a){if(!_.get(a,"from",""))return!1;if(0===_.get(a,"body","").length)return site.dialog.alert("Your message cannot be empty!");if(0===_.get(a,"from","").length)return site.dialog.alert("Please select a Profile to send this message from.");if(0===_.get(a,"subject","").length)return site.dialog.alert("Your subject cannot be empty!");a={attachments:a.attachments,body:a.body,subject:a.subject,profile_id:a.from,targets:a.targets};site.message.is_reply=!1;
site.request("global/ajax/mass-message-send/",a,function(a){if(!a)return site.dialog.alert("Sorry could not send your Mass Message at this time. Please refresh the page and try again."),!1;if(a.error)return site.data||(site.data={}),site.data.active_dialog=site.dialog.alert({title:"Oops!",message:a.error}),!1;site.dialog.alert("Your message has been sent.");site.compose.hide(!0)});return!0};site.compose.price_submit=function(a){"message"==a?site.compose.message():site.compose.voice();site.price.cancel()};
site.compose.asset=function(a,b,c,d){switch(b){case "address_book":site.address.select_callback=function(a){site.compose.is_mass_message?$('button.to[data-profile-id="'+$(a).attr("data-profile-id")+'"]',$("#to_addresses")).length||$("#to_addresses").append('<button class="to" data-profile-id="'+$(a).attr("data-profile-id")+'" style="display: block"><span>'+$(a).html()+'</span><strong onclick="$(this).parent().remove()" data-html="Remove Profile">X</strong></button>'):($("button.to").html("<span>"+
$(a).html()+"</span>").attr("data-profile-id",$(a).attr("data-profile-id")),textclass=7<moment().diff(moment($(a).attr("data-profile-lastlogin")),"days")?"lastlog_toolongago":"lastlog_notlongago",$("#last_log").attr("class",textclass),$("#last_log").html("#"+$(a).text()+" last online <br/> "+moment($(a).attr("data-profile-lastlogin")).format("dddd, MMMM Do YYYY, h:mm:ss a")),site.compose.asset("hide","address_book"))},site.address.clear_callback=null,site.address.load(d,"left",c),$("#address_book .clear_button").hide(),
$("#from_address").val()&&$("#to_address").attr("data-profile-id")?($("#compose button.credit").data("source_profile_id",$("#from_address").val()),$("#compose button.credit").data("target_profile_id",$("#to_address").attr("data-profile-id")),$("#compose button.credit").removeAttr("disabled")):($("#compose button.credit").data("source_profile_id",""),$("#compose button.credit").data("target_profile_id",""),$("#compose button.credit").attr("disabled","disabled"))}switch(a){case "hide":site.address.close(!0);
break;case "show":$("#"+b).is(":visible")?$("#"+b).hide():($("#"+b).show().find("input,textarea").eq(0).focus(),$("#compose").css({"z-index":1E3}),d&&(site.compose.adjust($(d),$("#"+b)),site.compose.events()))}};site.compose.events=function(){$("#address_book li.person").on("click.Compose");$("#address_book li.person").on("click.Compose",function(a){site.address.select($(a.target))})};
site.compose.adjust=function(a,b,c){a=a[0].getBoundingClientRect();switch(c){default:case "left":$left=a.right+5;$top=a.bottom+10;break;case "right":$left=a.left-b.outerWidth()-5,$top=a.bottom+10}b.css({left:$left,top:$top}).show();return!0};
site.compose.voice=function(){$form=$("#compose");$to_profile_id=$form.find("button.to").attr("data-profile-id");$from_profile_id=$form.find("[name=from]").val();$subject=$form.find("input[name=subject]").val();$phone=$form.find("input[name=phone_area]").val()+"-"+$form.find("input[name=phone_prefix]").val()+"-"+$form.find("input[name=phone_line]").val();site.compose.voice_interval=setInterval(function(){site.compose.voice_check()},5E3)};site.compose.voice_check=function(){};
site.compose.voice_done=function(){clearInterval(site.compose.voice_interval);site.dialog.alert("done recording")};
site.compose.message=function(){$("#from_address").val()&&$("#to_address").attr("data-profile-id")?($("#compose button.credit").data("source_profile_id",$("#from_address").val()),$("#compose button.credit").data("target_profile_id",$("#to_address").attr("data-profile-id")),$("#compose button.credit").removeAttr("disabled")):($("#compose button.credit").data("source_profile_id",""),$("#compose button.credit").data("target_profile_id",""),$("#compose button.credit").attr("disabled","disabled"));$form=
$("#compose");$to_profile_id=$form.find("button.to").attr("data-profile-id");$from_profile_id=$form.find("[name=from]").val();$subject=$form.find("input[name=subject]").val();$message=$form.find("textarea").val();$attachments=[];$form.find("ul.attachments li").each(function(){$(this).attr("data-type")&&$(this).attr("data-id")&&($type=$(this).attr("data-type"),$id=$(this).attr("data-id"),$attachments.push($type+"_"+$id))});site.message.is_reply=!1;"ALL"===$to_profile_id?site.message.mass_send({action:"talker_mass_message",
profile_id:$from_profile_id,subject:$subject,message:$message}):site.message.send(0,$to_profile_id,$from_profile_id,$subject,$message,$attachments.join(","),function(){site.compose.hide(!0)})};
site.compose.validate=function(){$form=$("#compose");$to_profile_id=$form.find("button.to").attr("data-profile-id");$from_profile_id=$form.find("select[name=from]").val();$subject=$form.find("input[name=subject]").val();$body=$.trim($form.find(".message_type_body textarea").val());var a="";0==$from_profile_id&&(a+="Select which profile you want to send this message from.<br/>");$subject||(a+="Please enter a subject.<br/>");$body||(a+="Please enter a message.<br/>");$type=$form.find("nav button.sel").attr("data-type");
switch(parseInt($type)){case 1:($txt=$form.find("textarea").val())||(a+="Please enter a message.<br/>")}isNaN($to_profile_id)&&"ALL"!==$to_profile_id&&(a+="Select someone to message.<br/>");return a?(site.dialog.alert({message:"<h1>Message cannot be sent!</h1>"+a}),!1):!0};
site.compose.load=function(a,b){if(site.user.id){var c=site.profile.profile_id?site.profile.profile_id:$("button.to").data("profile-id");"undefined"!=typeof $id&&(c=$id);site.request("global/ajax/compose-load/",{profile_id:site.compose.source_profile_id,is_mass_message:site.compose.is_mass_message?1:0,skip_voice:site.compose.skip_voice_load?"1":"0",to:c,filter_from:site.compose.options.from_filtered},function(c){$("body").append(c.html);$("#compose #mass_message_probation").length?(site.dialog.alert($("#compose #mass_message_probation").html()),
site.compose.hide(!0),$("#compose").remove()):(site.compose.init(),$("#window_fade").unbind("click").bind("click",function(){site.compose.hide()}),a?($("#window_fade").stop().show(),$("#compose").show(),site.compose.credit_button_refresh(),"function"==typeof b&&b()):setTimeout(function(){$("#window_fade").fadeIn(300,function(){$("#compose").fadeIn(500,site.compose.credit_button_refresh);"function"==typeof b&&b()})},100))})}else window.location=site.url.current+"login/?return="+window.location.pathname+
"&alert=You must be logged in to use this feature."};
site.compose.credit_button_refresh=function(){$("#from_address").val()&&"0"!=$("#from_address").val()&&$("#to_address").attr("data-profile-id")?($("#compose button.credit").data("source_profile_id",$("#from_address").val()),$("#compose button.credit").data("target_profile_id",$("#to_address").attr("data-profile-id")),$("#compose button.credit").removeAttr("disabled")):($("#compose button.credit").data("source_profile_id",""),$("#compose button.credit").data("target_profile_id",""),$("#compose button.credit").attr("disabled",
"disabled"))};site.compose.hide=function(a){$("#compose").is(":visible")&&(a?site.compose.hide_confirmed(a):site.dialog.confirm("Are you sure you want to cancel sending this message?",site.compose.hide_confirmed))};
site.compose.hide_confirmed=function(a){site.compose.is_mass_message=!1;site.compose.source_profile_id=null;$("#compose").is(":visible")&&a&&($("#address_book").remove(),$("#compose").fadeOut(300,function(){$("#widget_phone,#widget_verify").hide();site.window.fade.hide();$("#audio_player,#address_book,#price_dialog,#voicemail,#voicemail_clip,#audio_player").hide();$("#compose").remove()}))};
site.compose.show=function(a,b,c,d){site.compose.is_mass_message=c?!0:!1;site.compose.source_profile_id=d;$("#address_book,#price_dialog,#voicemail,#voicemail_clip,#audio_player,#compose").remove();site.user.id?($("#voicemail").hide(),0==$("#compose").length?(site.compose.skip_voice_load=b,site.compose.load(a)):a?(site.window.fade.show(),$("#compose").show()):site.window.fade.show(null,function(){$("#compose").fadeIn(500)})):window.location=site.url.current+"login/?return="+window.location.pathname+
"&alert=You must be logged in to use this feature."};
site.compose.init=function(){site.ping.compose=1;$("#compose_h1").html(site.compose.is_mass_message?"Compose Mass Message":"Compose Message");site.compose.is_mass_message&&$("#compose .compose_action.send span").html("Send Mass Message");$("#to_addresses_select").on("change",function(){"all"===$("#to_addresses_select").val()?$("#to_addresses").hide():$("#to_addresses").show()});$("#from_address").on("change",function(){site.compose.credit_button_refresh()});$("button.compose_attach.attach_image").off("click");
$("button.compose_attach.attach_image").on("click",function(){var a=$(this);a.find("span").html("Loading ...");a.animate({opacity:.8},300,function(){$(this).attr("disabled","true")});var b={action:"get",type:"attachment",approved_only:1,callback:function(a){site.compose.attach.image(a)}};$("#address_book").remove();Attachment.type="reply";site.demand.bundle("site.library","library/library",function(){site.library&&(site.library.queued=null);a.find("span").html("Attach Images");a.animate({opacity:1},
300,function(){a.removeAttr("disabled")});site.library.load(b)})});$("button.compose_attach.attach_product").off("click");$("button.compose_attach.attach_product").on("click",function(){var a=$(this);a.find("span").html("Loading ...");a.animate({opacity:.8},300,function(){$(this).attr("disabled","true")});var b={action:"get",type:"products",approved_only:1,upload_disabled:1,callback:function(a){site.compose.attach.product(a)}};$("#address_book").remove();Attachment.type="reply";site.demand.bundle("site.library",
"library/library",function(){site.library&&(site.library.queued=null);a.find("span").html("Attach Products");a.animate({opacity:1},300,function(){a.removeAttr("disabled")});site.library.load(b)})});$("button.compose_attach.attach_video").off("click");$("button.compose_attach.attach_video").on("click",function(){var a=$(this);a.find("span").html("Loading ...");a.animate({opacity:.8},300,function(){$(this).attr("disabled","true")});var b={action:"get",type:"videos",approved_only:0,upload_disabled:0,
callback:function(a){var b={videos:{}};b.videos[_.get(a,"file_id")||_.get(a,"output.file_id")]={price:0,title:_.get(a,"title")||_.get(a,"output.title")||""};site.compose.attach.product(b)}};$("#address_book").remove();Attachment.type="reply";site.demand.bundle("site.library","library/library",function(){site.library&&(site.library.queued=null);a.find("span").html("Attach videos");a.animate({opacity:1},300,function(){a.removeAttr("disabled")});site.library.load(b)})});site.compose.source_profile_id&&
($('#compose select[name="from"] option').removeProp("selected"),$('#compose select[name="from"] option[value="'+site.compose.source_profile_id+'"]').prop("selected",!0),$('#compose select[name="from"]').trigger("change"));return site.compose.data.booted?!0:site.compose.data.booted=!0};site.voicemail={which:"#compose",file_id:null,initiated:!1};site.voicemail.init=function(){site.voicemail.events();return!0===site.voicemail.initiated?!1:site.voicemail.initiated=!0};
site.voicemail.events=function(){$("button.add_voicemail").off("click");$("button.add_voicemail").on("click",function(){site.voicemail.show($(this))});$("#voicemail .phone").off("click");$("#voicemail .phone").on("click",function(){site.phone_widget.load()});$("#voicemail .call_now").off("click");$("#voicemail .call_now").on("click",function(){site.voicemail.start()})};
site.voicemail.fade=function(a){switch(a){case "out":$("#voicemail_clip,#voicemail > *").animate({opacity:.5},300);break;case "in":$("#voicemail_clip,#voicemail > *").animate({opacity:1},300)}};
site.voicemail.done=function(a,b){$("#voicemail .calling span div").html('<br/>Voicemail has been attached.<br/><button class="green_button right" onclick="site.voicemail.hide();">Ok, close</button><br/>');$(site.voicemail.which+" ul.attachments li").length||$(site.voicemail.which+" .attachments").after('<br class="attach_extra" />');$(site.voicemail.which+" ul.attachments").append('\t\t\t\t\t\t<li class="voicemail" data-price="0" data-type="voicemail" data-id="'+a+'">\t\t\t\t\t\t\t<em>AUDIO</em>\t\t\t\t\t\t\t<a href="javascript:;" onclick="load_audio(\''+
b+'\',this,30);">\t\t\t\t\t\t\t\t<img src="'+site.url.current+'images/icon_16_voicemail.png" /> \t\t\t\t\t\t\t<span>Voicemail-0.mp3</span>\t\t\t\t\t\t\t</a>\t\t\t\t\t\t\t<button class="right">delete</button>\t\t\t\t\t\t\t<br/>\t\t\t\t\t\t</li>');$(site.voicemail.which+" ul.attachments").show();$("#voicemail .calling span img").hide();$("#voicemail .calling p i").html('<img src="'+site.url.current+'images/icon_16_check2.png" />')};
site.voicemail.fail=function(a){$("#voicemail .calling span div").html("<br/>"+(a?a:"Voicemail failed.")+' <button class="close_button right" onclick="site.voicemail.hide();">Close</button> <button class="right green_button" onclick="site.voicemail.reset();">Startover</button><br/>');$("#voicemail .calling span img").hide();$("#voicemail .calling p i").html('<img src="'+site.url.current+'images/icon_16_cross.png" />')};
site.voicemail.ping=function(a){a&&(site.voicemail.file_id=a);if(_.isEmpty(site.voicemail.file_id))return site.dialog.alert("Invalid file_id"),!1;setTimeout(site.voicemail.ping_action,5E3)};
site.voicemail.ping_action=function(){site.request("global/ajax/voicemail-ping/",{id:site.voicemail.file_id},function(a){if(a.err)return site.dialog.alert(a.err),!1;$msg=$("#voicemail .connecting div").html();switch(parseInt(a.file_status)){case 1:$msg="<br/>Connecting ...";break;case 7:case 2:$msg="<br/>Recording in progress, press # when finished ...";break;case 3:$msg="<br/>Recording done, processing ...";break;case 4:case 5:return site.voicemail.done(site.voicemail.file_id,a.url_https);case 6:return site.voicemail.fail();
case 8:return site.voicemail.fail("You didn't pick up the phone")}$msg&&$("#voicemail .calling span div").html($msg);site.voicemail.ping()},function(){site.voicemail.ping()})};site.voicemail.start=function(){site.request("global/ajax/voicemail-start/",null,function(a){a.err?site.dialog.alert(a.err):a.file_id&&(site.voicemail.file_id=a.file_id,site.voicemail.ping())});$("#voicemail .calling").show("slide",{direction:"left"});$("#voicemail .phone_select,#voicemail .buttons").hide()};
site.voicemail.reset=function(){$("#voicemail .calling").hide();$("#voicemail .phone_select p i").html("1");$("#voicemail .phone_select").show();$("#voicemail .buttons").show();$("#voicemail .calling span div").html("<br/>Calling you  ...");$("#voicemail_clip,#voicemail > *").css({opacity:1});$("#voicemail .calling span img").show();$("#voicemail .calling p i").html("3")};
site.voicemail.show=function(a){site.voicemail.which=$(a).attr("data-which");site.voicemail.reset();$("body").append($("#voicemail"));$("body").append($("#voicemail_clip"));$pos=$(site.voicemail.which).offset()||{top:0};$top_vm=$pos.top+10;$top_vm_clip=$pos.top+150;$("#voicemail").css({top:$top_vm}).show("drop",{direction:"down"});$("#voicemail_clip").css({top:$top_vm_clip}).show("drop",{direction:"right"},300);$("#address_book").hide();$("#compose > *").animate({opacity:.5},300)};
site.voicemail.hide=function(){$("#voicemail").hide("drop",{direction:"right"});$("#voicemail_clip").hide("drop",{direction:"down"});$("#compose > *").animate({opacity:1},300)};$(function(){site.voicemail.init()});var RecentlyViewed={init:function(){$("button.clear_history").on("click",function(){RecentlyViewed.clear($(this))})},clear:function(){site.request("global/ajax/recently_viewed-remove/",null,function(){location.reload()})}};$(function(){RecentlyViewed.init()});site.compose.attach={};
site.compose.attach.image=function(a){Attachment.type="compose";Attachment.add(a)};site.compose.attach.product=function(a){Attachment.type="compose";Attachment.add(a)};
var Attachment={data:null,type:null,add:function(a){Attachment.data=a;Attachment.render()},price:function(){switch(Attachment.type){default:case "reply":$obj=$("ul.attachments");break;case "compose":$obj=$("#compose ul.attachments")}$price=0;$obj.find("li").each(function(){$price+=parseFloat($(this).attr("data-price"))});site.price.recommended_price=$price},render:function(){$checkbox='<button class="right">delete</button>';$data=Attachment.data;$obj=$("ul.attachments");$(".attachments_holder").show();
$obj.find("li").length||$obj.after('<br class="attach_extra" />');$data.photos&&($obj.show(),$.each($data.photos,function(a,b){$file_id=a;$photo_url=b;$obj.find("li[data-id="+$file_id+"]").length||($html="<img src="+$photo_url+" />",$obj.find("li.attachment_header").after('<li data-price="0" data-type="photo" data-id="'+$file_id+'"><em>PHOTO</em><a target="_blank" href='+$photo_url+">"+$html+" <span>Photo-"+a+".jpg</span></a>"+$checkbox+"<br/></li>"))}));$data.image&&($obj.show(),$.each($data.image,
function(a,b){$file_id=a;$photo_url=b;$obj.find("li[data-id="+$file_id+"]").length||$obj.find("li.attachment_header").after('<li data-price="0" data-type="photo" data-id="'+$file_id+'"><em>PENDING PHOTO</em> <span>Photo-'+a+".jpg</span>"+$checkbox+"<br/></li>")}));$data.galleries&&($obj.show(),$type="gallery",$icon=site.url.current+"images/icon_48_gallery.png",$.each($data.galleries,function(a,b){$product_id=a;$product_title=b.title;$product_price=b.price;$obj.find("li[data-id="+$product_id+"]").length||
($html=$checkbox+'<img src="'+$icon+'" title="'+$product_title.replace(/"/g,"&quot;")+'" /> '+$product_title,$obj.find("li.attachment_header").after('<li data-price="'+$product_price+'" data-type="'+$type+'" data-id="'+$product_id+'"><em>GALLERY</em>'+$html+"</li>"))}));$data.documents&&($obj.show(),$type="document",$icon=site.url.current+"images/icon_48_docs.png",$.each($data.documents,function(a,b){$product_id=a;$product_title=b.title;$product_price=b.price;$obj.find("li[data-id="+$product_id+"]").length||
($html=$checkbox+'<img src="'+$icon+'" title="'+$product_title.replace(/"/g,"&quot;")+'" /> '+$product_title,$obj.find("li.attachment_header").after('<li data-price="'+$product_price+'" data-type="'+$type+'" data-id="'+$product_id+'"><em>DOCUMENTS</em>'+$html+"</li>"))}));$data.stories&&($obj.show(),$type="story",$icon=site.url.current+"images/icon_48_audio.png",$.each($data.stories,function(a,b){$product_id=a;$product_title=b.title;$product_price=b.price;$obj.find("li[data-id="+$product_id+"]").length||
($html=$checkbox+'<img src="'+$icon+'" title="'+$product_title.replace(/"/g,"&quot;")+'" /> '+$product_title,$obj.find("li.attachment_header").after('<li data-price="'+$product_price+'" data-type="'+$type+'" data-id="'+$product_id+'"><em>AUDIO</em>'+$html+"</li>"))}));$data.videos&&($obj.show(),$type="videos",$icon=site.url.current+"images/icon_16_play.png",$.each($data.videos,function(a,b){$product_id=a;$product_title=b.title;$product_price=b.price;$obj.find("li[data-id="+$product_id+"]").length||
($html=$checkbox+'<img src="'+$icon+'" title="'+$product_title.replace(/"/g,"&quot;")+'" /> '+$product_title,$obj.find("li.attachment_header").after('<li data-price="'+$product_price+'" data-type="'+$type+'" data-id="'+$product_id+'"><em>VIDEO</em>'+$html+"<br/></li>"))}));Attachment.price()}};site.message={is_reply:!0,redirect:!0};
site.message.send=function(a,b,c,d,e,f,l){site.user.id?(($p=$("#price_dialog select").val())&&"c"==$p&&($p=$("#price_dialog input[name='custom_price']").val()),1==parseInt(site.user.type_id)&&(1<=$(".message_reply .attachments li").not(".attachments_view, .attachment_header").length||1<=$(".compose_box .attachments li").not(".attachments_view, .attachment_header").length)&&($p=site.compose.price),site.request("global/ajax/message-send/",{price:$p?$p:0,parent_id:a?a:0,to_profile_id:b?b:0,from_profile_id:c?
c:0,subject:d?d:"",message:e?e:"",attachments:f?f:""},function(a){if(!a)return site.dialog.alert("Sorry could not send your mail at this time. Please refresh the page and try again."),!1;if(a.error)return site.data||(site.data={}),site.data.active_dialog=site.dialog.alert({title:"Oops!",message:a.error}),!1;site.message.sent(a.id);a.balance&&site.ping.update.user_balance(a);"function"==typeof l&&l()})):window.location=site.url.current+"login/?return="+window.location.pathname+"&alert=You must be logged in to use this feature."};
site.message.sent=function(a){$extra=site.message.is_reply?"":" Loading Message ...";$("body").append('<div id="float_notice"><i class="public_sprite icon_128_mail"></i><div>Your message has been sent!'+$extra+"</div><br/></div>");$("#float_notice").show("slide",{direction:"up"},450,function(){$(this).delay(3E3).hide("slide",{direction:"up"})})};site.message.mass_send=function(a){site.dialog.alert({message:"Error Sending Mass Message"})};
site.message.unlock=function(a,b){b.disabled=!0;site.request("global/ajax/message-unlock/",{id:a},function(a){if(a.error)return site.data||(site.data={}),site.data.active_dialog=site.dialog.alert({title:"Snap!",message:a.error}),!1;$(b).parent().parent().before(a.html);$(".just_unlocked").slideDown(300,function(){$(this).removeClass("just_unlocked")});$(b).parent().parent().hide("drop",{direction:"down"},function(){$(this).remove()})})};
$(function(){$("ul.attachments li button").live("click",function(){confirm("Remove this attachment?")&&$(this).parent().hide("drop",{direction:"down"},function(){1==$(this).parent().length&&$(".attach_extra").remove();$(this).remove();Attachment.price()})})});window.onbeforeunload=function(){if($("#message_compose_type_1 textarea").val()||$("#message_type_1 textarea").val())return"You haven't finished composing your message yet."};
(function(a){function b(a){return"object"==typeof a?a:{top:a,left:a}}var c=a.scrollTo=function(b,c,f){a(window).scrollTo(b,c,f)};c.defaults={axis:"xy",duration:1.3<=parseFloat(a.fn.jquery)?0:1};c.window=function(b){return a(window)._scrollable()};a.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var b=(this.contentWindow||this).document||this.ownerDocument||this;return a.browser.safari||
"BackCompat"==b.compatMode?b.body:b.documentElement})};a.fn.scrollTo=function(d,e,f){"object"==typeof e&&(f=e,e=0);"function"==typeof f&&(f={onAfter:f});"max"==d&&(d=9E9);f=a.extend({},c.defaults,f);e=e||f.speed||f.duration;f.queue=f.queue&&1<f.axis.length;f.queue&&(e/=2);f.offset=b(f.offset);f.over=b(f.over);return this._scrollable().each(function(){function l(a){n.animate(g,e,f.easing,a&&function(){a.call(this,d,f)})}var m=this,n=a(m),k=d,g={},t=n.is("html,body");switch(typeof k){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(k)){k=
b(k);break}k=a(k,this);case "object":if(k.is||k.style)var p=(k=a(k)).offset()}a.each(f.axis.split(""),function(a,b){var d="x"==b?"Left":"Top",e=d.toLowerCase(),h="scroll"+d,q=m[h],r=c.max(m,b);p?(g[h]=p[e]+(t?0:q-n.offset()[e]),f.margin&&(g[h]-=parseInt(k.css("margin"+d))||0,g[h]-=parseInt(k.css("border"+d+"Width"))||0),g[h]+=f.offset[e]||0,f.over[e]&&(g[h]+=k["x"==b?"width":"height"]()*f.over[e])):(b=k[e],g[h]=b.slice&&"%"==b.slice(-1)?parseFloat(b)/100*r:b);/^\d+$/.test(g[h])&&(g[h]=0>=g[h]?0:Math.min(g[h],
r));!a&&f.queue&&(q!=g[h]&&l(f.onAfterFirst),delete g[h])});l(f.onAfter)}).end()};c.max=function(b,c){var d="x"==c?"Width":"Height";c="scroll"+d;if(!a(b).is("html,body"))return b[c]-a(b)[d.toLowerCase()]();d="client"+d;var e=b.ownerDocument.documentElement;b=b.ownerDocument.body;return Math.max(e[c],b[c])-Math.min(e[d],b[d])}})(jQuery);
function compose(a){if(!site.user.id)return site.user.login(),!1;$obj=$(a);$id=$obj.attr("data-profile-id");$title=$obj.attr("data-profile-title");$avatar=$obj.attr("data-profile-avatar");$my_id=$obj.attr("data-my-profile");$options=$obj.attr("data-options");site.compose.options.to_locked=1;site.compose.options.from_filtered=1;"undefined"!==$options&&(site.compose.options.from_filtered=0);site.compose.load(!1,function(){window.scrollTo(0,0);$id&&$("#compose button.to").html('<span><img src="'+$avatar+
'" /> '+$title+"</span>").attr("data-profile-id",$id);$("#compose button.to").show();$("#compose input[name=subject]").focus();$my_id&&$("#compose [name=from]").val($my_id)});site.compose.events()}
$(function(){$(".approval_pending").attr({"data-html":"This item is pending approval by the "+site.data_get("title")+" administrative team, once approved this will go live.","data-align":"above"});$(".approval_rejected").attr({"data-html":"This item was rejected by the "+site.data_get("title")+" administrative team, and will not be displayed on the site.","data-align":"above"});build_tooltips()});
function build_tooltips(){if(is.mobileDevice)return!1;$("[data-html]").live({mouseenter:function(){if(!$(".tooltip").data("sticky"))if($(this).hasClass("sel"))$(".tooltip").remove();else{0==$(".tooltip").length&&$("body").append('<div class="tooltip"></div>');$pos=$(this).offset();$html=$(this).attr("data-html");$align=$(this).attr("data-align");($size=$(this).attr("data-html-size"))||($size=12);($top_nudge=parseInt($(this).attr("data-top-nudge")))||($top_nudge=0);($left_nudge=parseInt($(this).attr("data-left-nudge")))||
($left_nudge=0);$align||($align="above");$(".tooltip").removeClass().addClass("tooltip align_"+$align).html($html);switch($align){case "below":$left=$pos.left+$(this).outerWidth()/2-$(".tooltip").outerWidth()/2+$left_nudge;$top=$pos.top+$(this).outerHeight()+3+$top_nudge;break;case "above":$left=$pos.left+$(this).outerWidth()/2-$(".tooltip").outerWidth()/2+$left_nudge;$top=$pos.top-$(".tooltip").outerHeight()-3+$top_nudge;break;case "right":$left=$pos.left+$(this).outerWidth()+3+$left_nudge;$top=
$pos.top+$top_nudge;break;case "left":$left=$pos.left-$(".tooltip").outerWidth()-3+$left_nudge,$top=$pos.top+$top_nudge}$(".tooltip").css({"font-size":$size+"px",top:$top,left:$left}).show()}},mouseleave:function(){$(".tooltip").data("sticky")||$(".tooltip").hide()}})}$(function(){$("#view_toggle").click(function(){$cur=$(this).find("i").attr("data-val");toggle_browse_view("split"==$cur?"grid":"split")})});
function toggle_browse_view(a){switch(a){case "split":$left=0;$opp="grid";break;case "grid":$left=26,$opp="split"}$obj=$("#view_toggle").find("i");$obj.attr("data-val",a);$obj.animate({left:$left},100);$img=$obj.find("img");$img.fadeOut(100,function(){$(this).attr("src",$("#view_toggle img."+a).attr("src").replace("_sel","")).fadeIn(100)});$("#listing").removeClass($opp).addClass(a);site.request("global/ajax/browse_mode/",{mode:a})}
$(function(){$("#profile_page ul.tabs")&&($("#profile_page ul.tabs").prepend('<li style="margin: 0px;padding: 0px;height: '+$("#profile_page ul.tabs li.sel").outerHeight()+'px;text-indent: -5000px;border-left: 1px solid #ccc;position: relative;left: -2px;top: 7px;">&nbsp;</li>'),$("#profile_page ul.tabs li.first").removeClass("first"),$("#profile_page ul.tabs li:eq(1)").addClass("first"),$("#profile_page ul.tabs li.first.sel").css({"margin-left":"-3px"}))});
$(function(){$(".message_reply nav button").click(function(){site.reply.toggle_type($(this))});$(".message_box").each(function(a){$(this).addClass(0==a?"first":"reply")})});
var current_audio=null,audio_hide=function(){$("#audio_player").hide("drop",{direction:"down"},300);current_audio=null},load_audio=function(a,b,c){if(current_audio==b)return audio_hide();"undefined"==typeof c&&(c=0);$("#audio_player").remove();current_audio=b;$("body").append('<div id="audio_player"><a href="javascript:;" onclick="audio_hide();" class="close">close</a><b>'+$(b).text()+'</b><div id="audio_player_frame"></div></div>');b?($pos=$(b).offset(),$css={top:$pos.top+$(b).outerHeight()+10,left:$pos.left+
$(b).outerWidth()/2-$("#audio_player").outerWidth()/2,marginLeft:0,marginTop:0}):$css={top:"50%",left:"50%",marginLeft:"-100px",marginTop:"-20px"};$player=$("#audio_player");$player.css($css).hide().show("drop",{direction:"up"},300);setTimeout(function(){site.play_audio("audio_player_frame",a,b);0<c&&$(".mejs-container .mejs-controls").css("margin-bottom",-parseInt(c)+"px")},100)};
site.play_audio=function(a,b){"object"!=typeof a&&(a=$("#"+a));player.initialize({container:a,type:"audio",width:200,top:"150px",autoplay:!0,files:[{type:"audio/mp3",src:b}]},function(a,b){setTimeout(function(){a.play()},250)})};site.search_cloud={attribute_class:"browse",quick_data:null,full_data:null,delay_update:null,delay:3E3};
site.search_cloud.events=function(){site.search_cloud.attribute_class=$("#search_cloud_window").data("attribute_class");$("#header button.action.cloud_search").off("click.search_cloud");$("#header button.action.cloud_search").on("click.search_cloud",function(){site.search_cloud.update_cancel();$("#search_cloud_window:visible").length?site.search_cloud.hide():site.search_cloud.show()});$("#search_cloud_window").off("click.search_cloud");$("#search_cloud_window").on("click.search_cloud","ol.search_cloud_link > li",
function(){site.search_cloud.update_cancel();site.search_cloud.update_delay();$(this).toggleClass("selected");var a=$("#search_cloud_window .header"),b=$("#search_cloud_window .listing li.selected");a.is(":hidden")&&(a.css("opacity","1"),a.slideDown());!b.length&&a.is(":visible")&&(a.css("opacity","0"),a.slideUp());var c="";b.each(function(){var a=$(this).parent().siblings("b").text(),b=$(this).text();"Hair Color"==a&&"Bald"!=b&&"Blonde Highlights"!=b&&(b+=" Hair");c+="<span>"+b+"</span> "});$("#search_cloud_window span.results").html(c);
$("#search_cloud_window span.results span:not(:first)").prepend("+ ")});$("#search_cloud_window").on("click.search_cloud","span.search",function(){site.search_cloud.update_cancel();site.search_cloud.search()});$("#search_cloud_window").on("click.search_cloud","span.footer",function(){site.search_cloud.show_more()});$("#search_cloud_window").on("click.search_cloud","span.clear_all",function(){site.search_cloud.clear_all()});$("#search_cloud_window").on("click.search_cloud","#close_search_window",function(){site.search_cloud.hide()})};
site.search_cloud.update_delay=function(){site.search_cloud.delay_update=setTimeout(site.search_cloud.update_count,site.search_cloud.delay);$("#search_cloud_window span.count").html('<img src="'+site.url.current+'images/loading2.gif" alt="loading..." />');$("#search_cloud_window span.search").show()};site.search_cloud.update_cancel=function(){site.search_cloud.delay_update&&(clearTimeout(site.search_cloud.delay_update),site.search_cloud.delay_update=null)};
site.search_cloud.show=function(){$("#search_cloud_window").slideDown(300).find("span.count").text("0");$("#search_cloud_window").addClass("search_is_open");if(!site.search_cloud.quick_data)return site.request("ajax/data.php",{action:"search_data"},function(a){if(!a.quick)return!1;site.search_cloud.quick_data=_.isObject(a.quick)?a.quick:$.parseJSON(a.quick);site.search_cloud.full_data=_.isObject(a.full)?a.full:$.parseJSON(a.full);site.search_cloud.show()}),!1;site.search_cloud.build(site.search_cloud.quick_data);
site.search_cloud.full_data?$("#search_cloud_window span.footer").show():$("#search_cloud_window span.footer").hide()};site.search_cloud.hide=function(){$("#search_cloud_window").slideUp();$("#search_cloud_window").removeClass("search_is_open");site.search_cloud.clear_all();var a=$("#search_cloud_window .header");a.is(":visible")&&(a.css("opacity","0"),a.slideUp())};
site.search_cloud.show_more=function(){$("#search_cloud_window span.footer").hide();$("#search_cloud_window span.count").text(0);$("#search_cloud_window span.search").hide();site.search_cloud.build(site.search_cloud.full_data)};site.search_cloud.build=function(a){var b="",c;for(c in a){var d=_.toArray(a[c]);b+="<li><b>"+c.replace(/~/g,"")+'</b><ol class="search_cloud_link"><li>'+d.join("</li><li>")+"</li></ol></li>"}$("#search_cloud_window ul.listing").html(b)};
site.search_cloud.search=function(){var a=[];$("#search_cloud_window li.selected").each(function(b,c){a.push($(c).text())});site.jslink(site.search_cloud.attribute_class+"/?q="+a.join(" "))};
site.search_cloud.update_count=function(){var a=[];$("#search_cloud_window li.selected").each(function(b,c){a.push($(c).text())});site.request("ajax/data.php",{action:"search_count",keywords:a.join(" "),attribute_class:site.search_cloud.attribute_class},function(a){$("#search_cloud_window span.count").text(a.count);0==a.count&&$("#search_cloud_window span.search").hide()})};site.search_cloud.clear_all=function(){var a=$("#search_cloud_window .listing li.selected");a.length&&$(a).click()};
$(function(){$("html").on("click",function(a){$("#search_cloud_window").is(":visible")&&site.search_cloud.hide()});$(".cloud_search, #search_cloud_window").click(function(a){a.stopPropagation()})});
var _SORTER={init:function(a){$(a).find("ul").hide();$(a).click(function(b){$nav=$(this).find("nav");$pos=$(a).position();$nav.css({top:$pos.top+$(a).outerHeight()+3,left:$pos.left+5});$nav.slideToggle()});if($cur_sort=$(a).attr("data-sel"))$(a).find("li").removeClass("sel"),$obj=$(a).find("li[data-type="+$cur_sort+"]"),$obj.length&&($obj.addClass("sel"),$(a).find("> span").html($obj.text()));$(a).find("li span").attr("title","This is the current sorting method.");$(a).find("li[data-href]").click(function(){_SORTER.filter.sorting(this,
a)})},filter:{sorting:function(a,b){$type=$(a).attr("data-type");$txt=$(a).text();$(b).find("> span").html($txt);$(b).find("[data-type]").removeClass("sel");$(a).addClass("sel");$("#body").animate({opacity:.5});window.location=$(a).attr("data-href")}}};site.logout={};site.logout.remember=function(){return $("#logout_warning input[name='remember_logout']").is(":checked")?1:0};
site.logout.go=function(a){"undefined"!=typeof gapi&&gapi.auth2.getAuthInstance().signOut().then(function(){console.log("User signed out.")});var b={};_.isUndefined(a)||(b={calls:a?1:0,remember:site.logout.remember(),theater_id:site.theater.id});site.request("global/ajax/logout/",b,function(a){if(!a||!a.redirect)return site.dialog.alert("Invalid Session"),!1;sessionStorage&&sessionStorage["survey-hide"]&&sessionStorage.removeItem("survey-hide");document.location=a.redirect});return!0};
site.logout.show=function(){$("#status_menu").find("a[data-type='phone']").hasClass("online")||$('#dropdown-status a[service="is_callable"]').hasClass("on")?$("#logout_warning").show("drop",{direction:"up"}):site.logout.go(0)};site.logout.cancel=function(){$("#logout_warning").hide("drop",{direction:"down"});$("#logout_warning input[name='remember_logout']").removeAttr("checked")};
site.useAudioHTML=function(){var a=navigator.appName,b=navigator.userAgent,c,d=b.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);d&&null!=(c=b.match(/version\/([\.\d]+)/i))&&(d[2]=c[1]);d=d?[d[1],d[2]]:[a,navigator.appVersion,"-?"];-1<b.indexOf("OPR/")&&(d[0]="Opera");return"Firefox"===d[0]||"Opera"===d[0]||"Safari"===d[0]||"MSIE"===d[0]&&"9.0">d[1]?0:1};
site.embed_audio=function(a,b,c){if(site.useAudioHTML())$.each($(".audioplayer-playing"),function(){$(this).find(".audioplayer-playpause").click()}),"function"!=typeof $.fn.audioPlayer?site.demand.js("$.fn.audioPlayer","application/audioplayer",function(){$("#"+a).html('<div class="html5_audio"><audio preload="auto" controls><source src="'+b+'"></audio></div>');$("#"+a+" audio").audioPlayer();c&&setTimeout(function(){$(document).find("#"+a+" .audioplayer-playpause").click()},500)}):($("#"+a).html('<div class="html5_audio"><audio preload="auto" controls><source src="'+
b+'"></audio></div>'),$("#"+a+" audio").audioPlayer(),c&&setTimeout(function(){$(document).find("#"+a+" .audioplayer-playpause").click()},500));else{c&&(c="yes");var d=a+"_audio";$("#"+a).html('<div class="flash_audio" id="'+d+'"></div>');"function"!=typeof audioplayer_swfobject?site.demand.js("audioplayer_swfobject","application/audio-player",function(){AudioPlayer.setup(site.url.current+"plugins/player.swf",{width:290});AudioPlayer.embed(d,{soundFile:b,autostart:c})}):AudioPlayer.embed(d,{soundFile:b,
autostart:c})}};site.scrub_field=function(a,b,c){var d=$(a),e=d.val();b=e.replace(b,"");var f=a.selectionStart;void 0!==c&&(b=b.substring(0,c));e!==b&&(d.val(b),a.setSelectionRange&&a.setSelectionRange(f,f))};
site.jslink=function(a){"object"!==typeof a&&(a={link:String(a)});a.link||(a.link=_.get(a,"jslink",""));if(!a.link)return!1;a.external=1==a.external;a.base=a.base?a.base:"";a.external||a.base||(a.base=a.protocol&&site.url[a.protocol]?site.url[a.protocol]:site.url.current);a.target?window.open(a.base+a.link,a.target):window.location=a.base+a.link;return!1};site.goprofile=function(a){if(!$.isNumeric(a)||6>a.length||7<a.length)return!1;site.jslink({link:"/p/"+a});return!0};
site.exception=function(a,b,c){c=site.callback(c);b&&"object"===typeof JSON&&(a+=" "+JSON.stringify(b));site.request("ajax/exception.php",{url:window.location.href,message:a}).complete(c)};site.module={};site.module.load=function(a,b,c){a=String(a);if(!/^[a-zA-Z0-9_]+$/.test(a)||"load"===a)return!1;"undefined"!==typeof b&&b||(b="load");c||(c={});site.demand.bundle("site.module."+a,"module/"+a,function(){if(!site.module[a]||!site.module[a][b])return!1;site.module[a][b](c)},!1);return!0};site.ng={};
site.ng.module={};site.ng.load=function(a,b,c){a=String(a);if(!/^[a-zA-Z0-9_]+$/.test(a))return!1;"undefined"===typeof b&&(b="load");c||(c={});site.demand.bundle("site.ng.module."+a,"ngmodule/"+a,function(){site.ng.module[a][b](c)},!1);return!0};site.phone_widget={};site.phone_widget.load=function(a){MyPhone.show(a)};
var MyPhone={bin:function(){$(document).on("click",".my-phone .number-widget input",function(){$(this).select()}).on("keypress",".my-phone input[type=text],.my-phone input[type=tel]",function(a){13==a.which&&MyPhone.add_number_next()}).on("input",".my-phone .number-widget input",function(a){$(this).val($(this).val().replace(/\D/g,""))}).on("click",".my-phone .number-widget li",function(){"Other"==$(this).text()?($(this).closest("section").removeAttr("active"),$(this).closest(".number-widget").find("input").focus().select(),
alert("2"==site.user.type_id?"Your country may not be supported by our site at this time. Please use the Contact Us form to contact us directly.":"If your country is not in our phone manager, please dial +1-872-800-8000 to place a call to a talker.")):($(this).parent().find("[active]").removeAttr("active"),$(this).attr("active",!0),$(this).closest("section").attr("active")?($(this).closest("section").removeAttr("active"),$(this).closest(".number-widget").find("input").focus().select()):$(this).closest("section").attr("active",
!0))}).on("click",".my-phone .other-numbers",function(){$(this).removeAttr("active");$(this).parent().find("> ul").attr("active",!0)}).on("click",".my-phone .add-number,.my-phone .change-number",function(){MyPhone.add_number_start()}).on("click",".my-phone > div > .fa-times,.my-phone > article,.my-phone .close-window",function(){MyPhone.close()}).on("click",".add-phone .next-step",function(){MyPhone.add_number_next()}).on("click",".add-phone .cant-text",function(){MyPhone.add_number_next("verify-call-start",
!0)}).on("click",".add-phone .cant-text-twilio",function(){MyPhone.add_number_next("verify-call-start-twilio",!0)}).on("click",".my-phone .default ul .fa-times",function(){MyPhone.remove_number($(this))}).on("click",".my-phone .default ul button,.set-texting",function(){MyPhone.set_number($(this))}).on("click",".my-phone .cancel-add",function(){MyPhone.show()}).on("click",".my-phone .verify-number",function(){var a=$(".my-phone li[default]").attr("phone-id");if(!a)return alert("invalid id");MyPhone.current_id=
a;MyPhone.require_close_confirm=!0;MyPhone.add_number_start();return MyPhone.add_number_next("verify-text-start",!0)}).on("click",".my-phone .fa-stack",function(){var a=$(this).closest("[phone-id]").attr("phone-id");if(!a)return alert("invalid id");MyPhone.current_id=a;MyPhone.require_close_confirm=!0;MyPhone.add_number_start();return MyPhone.add_number_next("verify-text-start",!0)}).on("click",".set-number a",function(){$(".set-number").hide()}).on("click","[set-as]",function(){MyPhone.set_number_as($(this).attr("set-as"))});
MyPhone.bin=null},ini:function(){"function"==typeof MyPhone.bin&&MyPhone.bin();$(".default li .fa-times").attr({"data-html":"Remove","data-align":"right","data-top-nudge":-12,"data-left-nudge":5})},button_state:function(a,b){b?(a.data("ohtml",a.html()),a.html('<i class="fas fa-spin fa-spinner"></i> '+b).attr("disabled",!0)):(a.html(""),a.html(a.data("ohtml")).removeAttr("disabled"))},add_number_start:function(){$(".add-phone > img").hide();$(".add-phone > img.add").show();$(".add-phone .number-widget li[active]").removeAttr("active");
$(".add-phone .number-widget li:first-of-type").attr("active",!0);$(".my-phone-container > div[active]").removeAttr("active");$(".my-phone .add-phone").attr("active",!0);$(".my-phone .add-phone [step][active]").removeAttr("active");$(".my-phone .add-phone [step]:eq(0)").attr("active",!0);$(".my-phone .add-phone .number-widget input").focus().select()},add_number_next:function(a,b){var c=$(".my-phone .add-phone [step][active]");if(b||MyPhone.add_number_validate(c)){if(!a)switch(c.attr("step")){case "add":return;
case "verify-text-start":a="verify-text-code";break;case "verify-text-code":return;case "verify-call-start":a="verify-call-code";break;case "verify-call-start-twilio":a="verify-call-code";break;case "verify-call-code":return;case "done":delete MyPhone.loaded}c.removeAttr("active");$(".my-phone [step="+a+"]").attr("active",!0);$(".my-phone [step="+a+"] input:eq(0)").focus();a=$(".my-phone [step="+a+"]").attr("icon");$(".add-phone > img").hide();$(".add-phone > img."+a).show()}},add_number_validate:function(a){switch(a.attr("step")){case "add":var b=
a.find("input").val();if(isNaN(b)||8>b.length||15<b.length)return alert("Please enter a valid phone number."),a.find("input").focus(),!1;var c=$("[country-id][active]").attr("country-id");MyPhone.button_state(a.find(".next-step"),"Checking");MyPhone.api("add",{number:b,country_id:c},function(b){MyPhone.button_state(a.find(".next-step"));return b.err?alert(b.err):b.done?(MyPhone.current_id=b.phone_id,MyPhone.require_close_confirm=!0,MyPhone.add_number_next("verify-text-start",!0)):alert("Unable to complete your request, please refresh the page to try again.(10)")},
function(){return alert("Unable to complete your request, please refresh the page to try again.(9)")});return!1;case "verify-text-start":return MyPhone.button_state(a.find(".next-step"),"Sending ..."),MyPhone.api("text-code",{phone_id:MyPhone.current_id},function(b){MyPhone.button_state(a.find(".next-step"));if(b.err)return alert(b.err);if(b.done)MyPhone.add_number_next("verify-text-code",!0);else return alert("Unable to complete your request, please refresh the page to try again.(8)")},function(){return alert("Unable to complete your request, please refresh the page to try again.(7)")}),
!1;case "verify-text-code":b=a.find("input").val();if(!b)return alert("Please enter the verification code we text messaged to your phone, then click this button."),a.find("input").focus(),!1;MyPhone.button_state(a.find(".next-step"),"Verifying ...");MyPhone.api("text-verify",{code:b,phone_id:MyPhone.current_id},function(b){MyPhone.button_state(a.find(".next-step"));return b.err?alert(b.err):b.done?(delete MyPhone.require_close_confirm,MyPhone.add_number_next("done",!0)):alert("Unable to complete your request, please refresh the page to try again.(6)")},
function(){return alert("Unable to complete your request, please refresh the page to try again.(5)")});return!1;case "verify-call-start-twilio":return MyPhone.button_state(a.find(".next-step"),"Calling ..."),MyPhone.api("call-code",{phone_id:MyPhone.current_id},function(b){MyPhone.button_state(a.find(".next-step"));if(b.err)return alert(b.err);if(b.done)MyPhone.add_number_next("verify-call-code",!0);else return alert("Unable to complete your request, please refresh the page to try again.(11)")},function(){return alert("Unable to complete your request, please refresh the page to try again.(12)")}),
!1;case "verify-call-code":b=a.find("input").val();if(!b)return alert("Please enter the verification code given to you over the phone, then click this button."),a.find("input").focus(),!1;MyPhone.button_state(a.find(".next-step"),"Verifying ...");MyPhone.api("call-verify",{code:b,phone_id:MyPhone.current_id},function(b){MyPhone.button_state(a.find(".next-step"));return b.err?alert(b.err):b.done?(delete MyPhone.require_close_confirm,MyPhone.add_number_next("done",!0)):alert("Unable to complete your request, please refresh the page to try again.(4)")},
function(){return alert("Unable to complete your request, please refresh the page to try again.(3)")});return!1;case "verify-call-start":return MyPhone.button_state(a.find(".next-step"),"Calling ..."),MyPhone.api("call-code",{phone_id:MyPhone.current_id},function(b){if(b.code)if(MyPhone.button_state(a.find(".next-step")),$("[step=verify-call-code] > strong").html(b.code),MyPhone.add_number_next("verify-call-code",!0),site.vars.feature_websockets_phone)$(document).on("websockets:phone",MyPhone.verify_results);
else MyPhone.verify_ping=setInterval(function(){MyPhone.api("call-verify",{phone_id:MyPhone.current_id},function(a){if(a.err)clearInterval(MyPhone.verify_ping),alert(a.err),MyPhone.add_number_next("verify-call-start",!0);else if(a.done&&a.verified)return clearInterval(MyPhone.verify_ping),delete MyPhone.require_close_confirm,MyPhone.add_number_next("done",!0)})},3E3);else return MyPhone.add_number_next("verify-call-start",!0),MyPhone.button_state(a.find(".next-step")),alert(b.err||"Unable to complete your request, please refresh the page to try again.(1)")},
function(){return alert("Unable to complete your request, please refresh the page to try again.(2)")}),!1}return!0},verify_results:function(a,b){_.get(b,"phone_id")==MyPhone.current_id&&(2==b.phone_status_id?(delete MyPhone.require_close_confirm,MyPhone.add_number_next("done",!0),$(document).off("websockets:phone",MyPhone.verify_results),site.vars.is_verify_for_free_package&&(site.vars.is_verify_for_free_package=!1,amw.show())):6!=b.phone_status_id&&(alert("Verify failed! Did you miss the call or enter the wrong code? You can try it again when ready ..."),
MyPhone.add_number_next("verify-call-start",!0),$(document).off("websockets:phone",MyPhone.verify_results)))},show:function(a){MyPhone.callback=a;delete MyPhone.require_close_confirm;$(".my-phone").attr("active",!0);$(".my-phone-container > div[active]").removeAttr("active");$(".my-phone input").val("");$(".my-phone").css("z-index",++site.dialog.zindex);$(".my-phone .default ul").removeAttr("active");$(".my-phone .default ul").html("");$(".my-phone .default .verify-number").hide();$(".my-phone .add-phone .cancel-add").hide();
MyPhone.load()},load:function(){MyPhone.loaded=!0;$(".my-phone .loading").attr("active",!0);MyPhone.api("load",{},function(a){if(a.err)return alert(a.err);if(a.done)a.html&&$(".my-phone .default ul").html(a.html),MyPhone.build();else return alert("Unable to load your phone numbers, please reload the page and try again.")},function(){return alert("Unable to load your phone numbers, please reload the page and try again.")})},format:function(a){if(10!=a.length)return a;var b=a.match(/(\d{3})(\d{3})(\d{4})/);
return b?"("+b[1]+") "+b[2]+"-"+b[3]:a},build:function(){$(".my-phone-container > div[active]").removeAttr("active");$(".my-phone-container > div.default").attr("active",!0);if(!$(".my-phone .default ul li").length)return MyPhone.add_number_start();$(".my-phone .default ul li").each(function(){$(this).find("span:last-of-type").html(MyPhone.format($(this).find("span:last-of-type").text()))});var a=$(".my-phone [default][default-sms]"),b=$(".my-phone [default]").length&&$(".my-phone [default-sms]").length&&
!$(".my-phone [default][default-sms]").length,c=$(".my-phone [default]");a.length?(b=$(".my-phone .both"),a=a.html(),b.find("b").html(a)):b?(b=$(".my-phone .both-different"),a=$(".my-phone [default]").html(),c=$(".my-phone [default-sms]").html(),b.find("b:eq(0)").html(a),b.find("b:eq(1)").html(c)):c.length?(b=$(".my-phone .both-different"),a=$(".my-phone [default]").html(),b.find("b").html(a),c.find(".fa-stack").length?$(".my-phone .default .verify-number").show():$(".my-phone .default .verify-number").hide(),
b.find("b:eq(1)").html("No Numbers Set")):$(".my-phone [default-sms]").length?(b=$(".my-phone .both-different"),c=$(".my-phone [default-sms]").html(),b.find("b:eq(0)").html("No Numbers Set"),b.find("b:eq(1)").html(c)):(b=$(".my-phone .both"),b.find("b").html("No Numbers Set"));$(".my-phone .add-phone .cancel-add").show();b.parent().find("[active]").removeAttr("active");b.attr("active",!0);$(".my-phone-container .other-numbers").attr("active",!0)},close:function(){if(!MyPhone.require_close_confirm||
confirm("Are you sure you want to close the phone number widget?"))$(".my-phone").removeAttr("active"),_.isFunction(MyPhone.callback)&&MyPhone.callback(),MyPhone.callback=void 0},remove_number:function(a){var b=a.closest("li"),c=b.find("span").text();confirm("You are about to remove the phone number:\n"+c+"\n\nDo you want to continue?")&&(c=b.attr("phone-id"),MyPhone.button_state(a,"&nbsp;"),MyPhone.api("delete",{phone_id:c},function(c){MyPhone.button_state(a);if(c.err)return alert(c.err);b.slideUp(function(){$(this).remove()})},
function(){MyPhone.button_state(a);alert("Unable to remove this number, please refresh the page and try again. Contact support if you continue to have problems")}))},set_number:function(a){if(a.parents("[phone-id]").length)MyPhone.set_id=a.closest("[phone-id]").attr("phone-id"),a=a.closest("[phone-id]").find("span:last-of-type").text();else{var b=$(".my-phone li[default]");a=b.find("span:last-of-type").text();MyPhone.set_id=b.attr("phone-id")}$(".set-number b").html(a);$(".set-number").show()},set_number_as:function(a){var b=
"";switch(a){case "both":b="default_both";break;case "calls":b="default";break;case "texts":b="default_sms"}var c=$("[set-as="+a+"]");MyPhone.button_state(c,"Saving ...");MyPhone.api(b,{phone_id:MyPhone.set_id},function(a){MyPhone.button_state(c);if(a.err)return alert(a.err);$(".set-number").hide();MyPhone.loaded=!1;MyPhone.load()},function(){MyPhone.button_state(c);alert("Unable to set as default number, please refresh the page and try again. Contact support if you continue to have problems.")})},
api:function(a,b,c,d){b._request=a;site.request("ajax/phone/",b,c,d)}};$(document).ready(MyPhone.ini);site.profile_caller_widget={};site.profile_caller_widget.load=function(){site.ng.load("profile_caller")};site.notification={};site.notification.init=function(a){utility.log("notification","init",a);if(!a)return!1;_.each(a.listing,function(a){site.notification.boot(a)})};
site.notification.boot=function(a){if(!_.get(a,"notification_id")||site.utility.cookie.get("notification_"+a.notification_id))return!1;a='\t\t\t<div data-notification-id="'+a.notification_id+'">\t\t\t\t<i class="fas fa-times fa-fw" onclick="site.notification.remove('+a.notification_id+')"></i>\t\t\t\t<span class="fa-stack fa-lg">\t\t\t\t\t<i class="fas fa-circle fa-stack-2x"></i>\t\t\t\t\t<i class="fas fa-exclamation fa-stack-1x fa-inverse"></i>\t\t\t\t</span>\t\t\t\t<p>'+a.html+"</p>\t\t\t</div>";
$("#notification").append(a);return!0};site.notification.remove=function(a){var b=$('div[data-notification-id="'+a+'"]');if(!b.length)return!1;b.remove();site.request("ajax/notification-read/",{notification_id:a},function(a){utility.log("site.notification.remove","site.request",a)})};
site.vm={count:0,target_object:{},init:function(){$("td.audio_source a, .vm_audio_source").on("click",function(a){a.preventDefault();a=$(this).data("file_name");site.vm.locate_file(a,$(this))});$("button#delete").on("click",function(a){a=$("input:checked").length;if(0==a)return!1;site.dialog.confirm("Are you sure you want to delete "+(1==a?"this":"these")+" voice mail"+(1==a?"":"s")+"?<br/>This action cannot be undone.",site.vm.delete_file)});$("td.reply a, .vm_reply").on("click",function(a){site.vm.reply($(this).data("id"))})},
delete_file:function(a){if(!a)return!1;var b={action:"delete_file",files:[]};$("input:checked").each(function(a,d){b.files.push($(this).data("id"))});site.request("ajax/voicemail/",b,site.vm.delete_show)},delete_show:function(a){a.error?site.dialog.alert(a.error,site.vm.reload_page):site.vm.reload_page()},dial:function(a){a&&(site.vm.reply_confirm=!0,site.request("ajax/voicemail/",{action:"dial",vm_id:site.vm.vm_id},site.vm.dial_show))},dial_show:function(a){a.error&&site.dialog.alert(a.error)},locate_file:function(a,
b){a={action:"locate_file",file_name:a,id:$(b).data("id"),count:++site.vm.count};site.vm.target_object[site.vm.count]=b;site.request("ajax/voicemail/",a,site.vm.play_file)},play_file:function(a){if(a.redirect)return site.location=a.redirect,!1;if(a.error)return site.dialog.alert(a.error),!1;"mp3"==a.ext?(load_audio(a.url,site.vm.target_object[a.count],30),delete site.vm.target_object[a.count],$("a[data-id="+a.id+"]>span").hasClass("mail_unread")&&($("a[data-id="+a.id+"]>span").removeClass("mail_unread").addClass("mail_read"),
a=$("li#column_voicemail").text().substr(12),a=parseInt(a)-1,$("li#column_voicemail a").text("Voice Mail ("+a+")"))):site.request("ajax/voicemail/",{action:"load_file",file_name:a.file_name,id:a.id,count:a.count},site.vm.play_file)},reload_page:function(){window.location=window.location},reply:function(a){site.vm.vm_id=a;site.vm.reply_confirm?site.vm.dial(!0):site.dialog.confirm("Select yes and you will receive a call from our system so that you can leave a voicemail. You can still receive calls while leaving a voicemail message.",
site.vm.dial)}};$(document).ready(function(){site.vm.init()});$(document).ready(function(){site.notification.init(_.get(site,"vars.notification"))});
$(function(){_.get(site,"vars.launch_js_modal.show_gdpr_warning")&&site.module.load("gdpr");if(!_.get(window,"RESPONSIVE")){var a=site.utility.cookie.get("abandoned");site.search_cloud.events();$("[data-favorite]").length&&site.favorite.events();if(a&&site.user.id&&"#lowbalance"!=document.location.hash){var b=site.utility.cookie.get("abandoned_id");setTimeout(function(){$("."+a+"[data-options*='"+b+"']").click()},1E3);site.utility.cookie.remove("abandoned");site.utility.cookie.remove("abandoned_id")}localStorage["show-gallery-after-login"]&&
(site.user.id?setTimeout(function(){QuickView.show_gallery_after_load=!0;var a=$("[profile-id="+localStorage["show-gallery-after-login"]+"]:eq(0)");a.length&&QuickView.show(a);delete localStorage["show-gallery-after-login"]},750):delete localStorage["show-gallery-after-login"]);site.vars.alert&&site.dialog.alert(site.vars.alert)}});$(document).ready(function(){var a={init:function(){window.multiuploader=a;$(document).on("click",".multiuploader",a.boot)},boot:function(){}};a.init()});

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};
$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];g in d||(d[g]={});d=d[g]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+e,e=$jscomp.propertyToPolyfillSymbol[e],
$jscomp.defineProperty(d,e,{configurable:!0,writable:!0,value:b})))};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var c=0,d=function(a){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(a||"")+"_"+c++,a)};return d},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=$jscomp.global[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&$jscomp.defineProperty(d.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var b=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var d="";a;)if(a&1&&(d+=b),a>>>=1)b+=b;return d}},"es6","es3");$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};$jscomp.polyfill("Object.entries",function(a){return a?a:function(a){var b=[],d;for(d in a)$jscomp.owns(a,d)&&b.push([d,a[d]]);return b}},"es8","es3");
$jscomp.polyfill("Array.from",function(a){return a?a:function(a,c,d){c=null!=c?c:function(a){return a};var b=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof f){a=f.call(a);for(var g=0;!(f=a.next()).done;)b.push(c.call(d,f.value,g++))}else for(f=a.length,g=0;g<f;g++)b.push(c.call(d,a[g],g));return b}},"es6","es3");
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es8","es3");window.RESPONSIVE=!0;var message_modal_open=!1,$_GET={},$_GETX=window.location.search?window.location.search.substr(1).split("&"):"",$_GETY;for($i=0;$i<$_GETX.length;$i++)$_GETY=$_GETX[$i].split("="),$_GET[decodeURIComponent($_GETY[0])]=decodeURIComponent($_GETY[1]);
var pingTime=function(){$("time").each(function(){if(!$(this).is(".active")&&!$(this).attr("datetime")&&!$(this).attr("itemprop")){var a=$(this).data();if(!a.ts_set){switch(a.ts_format){case "datetime":var b="yyyy-MM-DD HH:mm:ss";var c="HH:mm:ss";break;case "date":case "YMD":b="yyyy-MM-DD";c="HH:mm:ss";break;case "usDate":b="MM/DD/YYYY";c="hh:mm:ss a";break;default:case "usDateTime":b="MM/DD/YYYY hh:mm:ss a",c="hh:mm:ss a"}site.debug("zz",a);a.ts_moment||(site.debug("init"),a.ts=_.get(a,"ts",$(this).text()),
a.ts_utc||a.utc?a.ts_moment=moment.utc(a.ts).local():$.isNumeric(a.ts)?a.ts_moment=moment().unix(a.ts):a.ts_moment=moment(a.ts,"YYYY-MM-DD HH:mm:ss"));site.debug("out",a,a.ts_moment.fromNow(),a.ts_moment.format(b),a.ts_moment.valueOf());var d=moment().diff(a.ts_moment,"hours"),e=moment().diff(moment().startOf("day"),"hours");d>e+24?(b=a.ts_moment.format(b),a.ts_set=1):d>e?(b="Yesterday at "+a.ts_moment.format(c),a.ts_set=1):b=a.ts_moment.fromNow();return $(this).html(b).show()}}})};
$(document).ready(function(){pingTime();setInterval(pingTime,1E3);_.get($_GET,"show_login")&&(history.replaceState({},$("title").text(),window.location.pathname),setTimeout(function(){return $("#window-login").foundation("open")},10));_.get($_GET,"fp_register")&&(history.replaceState({},$("title").text(),window.location.pathname),setTimeout(function(){return $("#window-register").foundation("open")},10));_.get($_GET,"show_register")&&(history.replaceState({},$("title").text(),window.location.pathname),
setTimeout(function(){return $("#window-register").foundation("open")}));_.get($_GET,"show_offer")&&(history.replaceState({},$("title").text(),window.location.pathname),setTimeout(function(){return OfferWindow.show()}));"first"===_.get($_GET,"event")&&history.replaceState(null,null,window.location.pathname);_.get($_GET,"show_forgot")&&(history.replaceState({},$("title").text(),window.location.pathname),setTimeout(function(){$("#window-forgot").foundation("open")},10))});
var jsLive={ptr:null,counter:0,foundationloaded:!1,bin:function(){if("undefined"===typeof document)return!1;if("function"!==typeof _.get($(document),"foundation")){if(5<jsLive.counter)return!1;window.setTimeout(function(){return jsLive.bin()},200*jsLive.counter);return!1}jsLive.foundationloaded=!0;return $(document).foundation()}};InitObject.queue("jsLive");
var QuickView={queue_data:{hook:[],live:[]},init:function(){return InitObject.consume_queue("on_quickview")},delay:function(a){return InitObject.delay(a,"on_quickview")}};function onGoogleSignIn(a){a=JSON.stringify(a.credential);"undefined"==typeof site.user.id&&LoginHelper.glogin(a,"")}function GoogleSignOut(){gapi.auth2.getAuthInstance().signOut().then(function(){})}
var VoiceGreeting={bin:function(){$(document).on("click","[data-profile-voice-greeting]",function(a){a.preventDefault();VoiceGreeting.toggle($(this))}).on("ended","audio.voice-greeting",function(){VoiceGreeting.stop($("[profile-id="+$(this).attr("profile-id")+"] [data-profile-voice-greeting]"))}).on("click",".window-voice-greeting-unsupported .close-window",function(a){a.preventDefault();$(".window-voice-greeting-unsupported audio").get(0).pause();$(".window-voice-greeting-unsupported").hide()});
VoiceGreeting.bin=null},load:function(a){var b=a.closest("[profile-id]").attr("profile-id");a.find("i").removeClass().addClass("fas fa-fw fa-spin fa-circle-notch");site.request("ajax/profile/",{action:"greeting",profile_id:b},function(a){if(!a.data||!a.data.https)return alert("Sorry, unable to load this greeting. Try again later.");VoiceGreeting.loaded[b]=!0;$("audio.voice-greeting source, .window-voice-greeting-unsupported audio source").attr("src",a.data.https+"?"+Math.random());$("audio.voice-greeting").get(0).load();
$(".window-voice-greeting-unsupported audio").get(0).load();VoiceGreeting.play($("[profile-id="+b+"] [data-profile-voice-greeting]"))});site.request("ajax/profile/",{action:"play_greeting",profile_id:b})},play:function(a){var b=a.closest("[profile-id]").attr("profile-id");site.request("ajax/profile/",{action:"play_greeting",profile_id:b});(b=$("audio.voice-greeting").get(0).play())&&b.catch(function(a){$(".window-voice-greeting-unsupported").show()}).then(function(b){a.attr("active",!0);a.find("i").removeClass().addClass("fas fa-fw fa-pause")})},
stop:function(a){a.closest("[profile-id]").attr("profile-id");$("audio.voice-greeting").get(0).pause();a.removeAttr("active");a.find("i").removeClass().addClass("fas fa-fw fa-play")},stop_all:function(){$("audio.voice-greeting").each(function(){this.pause();this.currentTime=0});$("[data-profile-voice-greeting][active] i").removeClass().addClass("fas fa-fw fa-play");$("[data-profile-voice-greeting][active]").removeAttr("active")},toggle:function(a){a.closest("[profile-id]").attr("profile-id");var b=
!a.attr("active");VoiceGreeting.stop_all();b&&VoiceGreeting.load(a)},ini:function(){"function"==typeof VoiceGreeting.bin&&VoiceGreeting.bin();$("body").append('<audio class="voice-greeting"><source src="" type="audio/mpeg"></audio>')},loaded:{}};$(document).ready(VoiceGreeting.ini);
var ListingPhotoRotator={speed:950,bin:function(){$(document).on("mouseenter click","[rotate-photos] .profile-photo-count",function(){ListingPhotoRotator.rotate($(this))}).on("mouseleave","[rotate-photos] .profile-photo-count",function(){ListingPhotoRotator.current&&(delete ListingPhotoRotator.current,clearInterval(ListingPhotoRotator.timer))}).on("mouseenter","[extra-photos] .profile-photo-count",function(){ListingPhotoRotator.get($(this).closest("[extra-photos]"))}).on("mouseleave","[extra-photos]",
function(){$(this).find(".loading-images").fadeOut(250,function(){$(this).remove()})});ListingPhotoRotator.bin=null},rotate:function(a){ListingPhotoRotator.current=a.closest("[rotate-photos]");ListingPhotoRotator.timer&&clearInterval(ListingPhotoRotator.timer);ListingPhotoRotator.timer=setInterval(function(){if(null!=ListingPhotoRotator.current){var a=$(ListingPhotoRotator.current).attr("rotate-photos").split(","),c=$(ListingPhotoRotator.current).find("img.profile-photo").attr("src");c=a.indexOf(c)+
1;c>a.length-1&&(c=0);$(ListingPhotoRotator.current).find("img.profile-photo").attr("src",a[c])}},ListingPhotoRotator.speed)},get:function(a){ListingPhotoRotator.launcher=a;a=ListingPhotoRotator.launcher.attr("extra-photos");var b=ListingPhotoRotator.launcher.find("img.profile-photo").attr("src");ListingPhotoRotator.launcher.find(".loading-images").fadeIn(150);site.request("ajax/browse/",{action:"avatars_load",t_id:a},function(a){ListingPhotoRotator.launcher.find(".loading-images").fadeOut(250,function(){$(this).remove()});
ListingPhotoRotator.launcher.removeAttr("extra-photos");if(!a.avatars)return console.log("no extra profile photos");var c=[];$.each(a.avatars,function(a,b){c.unshift(b)});c.unshift(b);ListingPhotoRotator.launcher.attr("rotate-photos",c.join(","));setTimeout(function(){ListingPhotoRotator.rotate(ListingPhotoRotator.launcher)},150)})},ini:function(){"function"==typeof ListingPhotoRotator.bin&&ListingPhotoRotator.bin()}};$(document).ready(ListingPhotoRotator.ini);
var MobileMenu={leftloaded:!1,rightloaded:!1,bin:function(){$(document).on("click","#launchmobileRight",function(){MobileMenu.showright($(this))}).on("click","#launchmobileLeft",function(){MobileMenu.showleft($(this))}).on("click",".mobile-menu-underlay",function(){MobileMenu.hide()}).on("click","#mobileRightLogin",function(a){$("#window-login").attr("data-tab-selected","web");QuickSearch.hide()}).on("click","#mobileRightRegister",function(a){$("#window-login").attr("data-tab-selected","noaccount");
QuickSearch.hide()});MobileMenu.bin=null},ini:function(){"function"==typeof MobileMenu.bin&&MobileMenu.bin()},showleft:function(a){a=$("#mobileLeft");if(a.attr("active"))return MobileMenu.hide();MobileMenu.hide();$("#mobile-menu-underlay").show();0==MobileMenu.leftloaded&&($.ajaxSetup({cache:!0}),$.ajax("/ajax/get_html.php?type=fragment&file=mobile-left").done(function(a){$("#mobileLeft").html(a);$("#mobileLeftAccordion").foundation();MobileMenu.leftloaded=!0}));a.attr("active",!0);a.css({top:$(".header-mobile").outerHeight()});
$("body").addClass("no-overflow")},showright:function(a){a=$("#mobileRight");if(a.attr("active"))return MobileMenu.hide();MobileMenu.hide();$("#mobile-menu-underlay").show();0==MobileMenu.rightloaded&&($.ajaxSetup({cache:!0}),$.ajax("/ajax/get_html.php?type=fragment&file=mobile-right").done(function(a){$("#mobileRight").html(a);$("#mobileRightAccordion").foundation();MobileMenu.rightloaded=!0}));a.attr("active",!0);a.css({top:$("#header-mobile").outerHeight()});$("body").addClass("no-overflow")},
hide:function(){$("#mobile-menu-underlay").hide();$("#mobileRight").removeAttr("active");$("#mobileLeft").removeAttr("active");"object"==typeof CallerMenu&&CallerMenu.hide();"object"==typeof TalkerMenu&&TalkerMenu.hide();$("body").removeClass("no-overflow")}};$(document).ready(MobileMenu.ini);
var RegisterHelper={bin:function(){$(document).on("submit","#register",function(a){a.preventDefault();RegisterHelper.register($(this))});$(document).on("click","#open-ua",function(){var a=$("#window-register-ua");$.ajax("/user_agreement.php?modal=1").done(function(b){a.html(b).foundation("open")});return!1});$(document).on("submit","#register-google",function(a){a.preventDefault();RegisterHelper.register_google($(this))});RegisterHelper.bin=null},register:function(a){var b=a.find("button").eq(0);
b.data("ohtml",b.html());RegisterHelper.form=a;site.register_caller.validate()},register_google:function(a){var b=a.find("button").eq(0);b.data("ohtml",b.html());RegisterHelper.form=a;site.register_caller.google_validate()},send:function(a){$form=$(RegisterHelper.form);var b=$form.find("button").eq(0);a={iovation_id:a.iovation_id,device_risk_id:site.device.device_risk_id,gtoken:$form.find('[name="gtoken"]').val(),email:$form.find('[name="email"]').val(),email_google:$form.find('[name="email_google"]').val(),
username:$form.find('[name="username"]').val(),username_google:$form.find('[name="username_google"]').val(),password:$form.find('[name="password"]').val(),confirm_password:$form.find('[name="confirm_password"]').val(),attribute_class_id:$form.find('[name="attribute_class_id"]').val(),attribute_class_id_google:$form.find('[name="attribute_class_id_google"]').val(),birthday_month:$form.find('[name="birthday_month"]').val(),birthday_day:$form.find('[name="birthday_day"]').val(),birthday_year:$form.find('[name="birthday_year"]').val(),
how_did_you_hear_about_us:$form.find('[name="how_did_you_hear_about_us"]').val(),subscribe:$form.find('[name="subscribe"]').is(":checked")?"1":"0",subscribe_google:$form.find('[name="subscribe_google"]').is(":checked")?"1":"0",agree_tos:$form.find('[name="agree_tos"]').is(":checked")?"on":"off",agree_tos_google:$form.find('[name="agree_tos_google"]').is(":checked")?"on":"off",responsive:!0};b.attr("disabled",!0).html('<i class="fas fa-fw fa-spin fa-circle-notch"></i> Loading ...');site.request("how-it-works/register/",
a,function(a){if(a.already)return window.location=window.location.pathname;if(a.done){"undefined"!=typeof $form.find('[name="username"]').val()&&site.ls.save("last-username",$form.find('[name="username"]').val());try{sessionStorage&&(sessionStorage["just-joined"]=!0)}catch(e){}return window.location=window.location.pathname+"?event=first"}b.removeAttr("disabled").html(b.data("ohtml"));if(a.error){b.attr("disabled",!1).html("Register Now").removeClass("disabled");if("object"==typeof a.error){var c=
"";Object.keys(a.error).forEach(function(b){c+=a.error[b]+"<br/>"});return alert(c)}return alert(a.error)}})},cancel:function(a){var b=$(RegisterHelper.form).find("button").eq(0);b.removeAttr("disabled").html(b.data("ohtml"));"object"==typeof site.iovation&&site.iovation.decline_signup(a)},ini:function(){"function"==typeof RegisterHelper.bin&&RegisterHelper.bin()}};$(document).ready(RegisterHelper.ini);
"object"==typeof site.register_caller&&(site.register_caller.send=function(a){RegisterHelper.send(a)},site.register_caller.cancel=function(a){RegisterHelper.cancel(a)});
var LoginHelper={tabs:function(a){$("#window-login [tab],#window-login [tab-content]").removeAttr("active");a.attr("active",!0);$("#window-login [tab-content="+a.attr("tab")+"]").attr("active",!0)},bin:function(){$(document).on("click","#window-login [tab]",function(a){a.preventDefault();LoginHelper.tabs($(this))}).on("submit",".login-form",function(a){a.preventDefault();LoginHelper.login($(this))}).on("click","#window-login .forgot-password",function(){var a=$("#window-login [name='username']").val().trim();
a&&$("#window-forgot [name='username']").val(a)}).on("click","#window-login #dialin-register-submit",function(){var a=$('#window-login input[name="user_id"]').val(),b=$('#window-login div[tab-content="dialin-register"] input[name="email"]').val(),c=$('#window-login div[tab-content="dialin-register"] input[name="password"]').val(),d=$('#window-login div[tab-content="dialin-register"] input[name="username"]').val(),e=$('#window-login div[tab-content="dialin-register"] input[name="confirm_password"]').val(),
f=$('#window-login div[tab-content="dialin-register"] input[name=agree_tos]').is(":checked"),g=$('#window-login div[tab-content="dialin-register"] input[name=subscribe]').is(":checked");if(!b)return alert("Please enter a valid Email address.");if(!d)return alert("Please enter a Username.");if(!c)return alert("Please enter a Password.");if(c!=e)return alert("Your passwords don't match!");if(!f)return alert("You must agree to the terms to continue.");$(this).addClass("disabled").html("Processing...");
site.request("ajax/claim_account.php",{action:"update_account_info",user_id:a,email:b,password:c,username:d,subscribe:g?1:0,agree_tos:f?1:0},function(a){$(this).removeClass("disabled").html("Register");if(a.error)return alert(a.error);1==a.user_type_id?window.location.reload():site.jslink({link:"/members/?js_wizard=1"})})}).on("click","#window-login #dialin-account-continue",function(){var a=$('#window-login div[tab-content="dialin-account"] input[name="pin"]').val(),b=$('#window-login div[tab-content="dialin-account"] input[name="user_id"]').val();
if(!b)return alert("Please enter a valid Account number.");if(!a)return alert("Please enter a valid PIN number.");$('#window-login div[tab-content="dialin-account"] button').attr("disabled",!0);site.request("ajax/claim_account.php",{action:"verify_account_pin",pin:a,user_id:b},function(a){$('#window-login div[tab-content="dialin-account"] button').removeAttr("disabled");if(a.error)return alert(a.error);$('#window-login div[tab-content="dialin-phone-pin"] #dialin-phone-pin-number').html(a.code);$("#window-login nav span[tab='dialin-register']").click()})}).on("click",
"#window-login #dialin-phone-continue",function(){var a=$('#window-login div[tab-content="dialin-phone"] input[name="phone"]').val();if(!a)return alert("Please enter a valid Phone number.");$('#window-login div[tab-content="dialin-phone"] button').attr("disabled",!0);site.request("ajax/claim_account.php",{action:"verify_init",number:a},function(a){$('#window-login div[tab-content="dialin-phone"] button').removeAttr("disabled");if(a.register||a.error)return alert(a.error||"Sorry, that Phone number cannot be found.");
$('#window-login div[tab-content="dialin-phone-pin"] #dialin-phone-pin-number').html(a.code);$("#window-login nav span[tab='dialin-phone-pin']").click();var b=setInterval(function(){site.request("ajax/claim_account.php",{action:"verify_status",phone_id:a.phone_id},function(a){if(a.error)return $("#window-login nav span[tab='dialin-phone']").click(),clearInterval(b),alert(a.error);a.success&&($("#window-login nav span[tab='dialin-register']").click(),clearInterval(b))})},1E3)})}).on("focusin",".form-floating-label input, .form-floating-label textarea",
function(){$(this).parent().addClass("has-value")}).on("blur",".form-floating-label input, .form-floating-label textarea",function(){0==$(this).val().length&&$(this).parent().removeClass("has-value")}).on("focusin","[id='window-login']:eq(0)",function(){$("[id = 'password']").val()&&$("[id = 'password']").parent().addClass("has-value");$("[id = 'emailUsername']").val()&&$("[id = 'emailUsername']").parent().addClass("has-value")}).on("change",".form-floating-label input, .form-floating-label textarea",
function(a){$("[id = 'password']").val()&&$("[id = 'password']").parent().addClass("has-value");$("[id = 'emailUsername']").val()&&$("[id = 'emailUsername']").parent().addClass("has-value");"new-password"==a.currentTarget.autocomplete&&$(this).parent().addClass("has-value")}).on("click","#spnPhoneLogin",function(){$("#divTraditionalLogin").hide();$("#divPhoneLogin").show()}).on("click","#spnTraditionalLogin",function(){$("#divPhoneLogin").hide();$("#divTraditionalLogin").show()}).on("click","#btnPhoneLoginPhone",
function(a){a.preventDefault();if(0==$("#loginphone").val().length)return alert("Phone number is required");$("#btnPhoneLoginPhone").attr("disabled",!0).html('<i class="fas fa-fw fa-spin fa-circle-notch"></i> Sending ...');site.request("login-phone/",{action:"verify_phone_number",phone:$("#loginphone").val(),country:$("#loginphonecountry").children("option:selected").val()},function(a){$("#btnPhoneLoginPhone").attr("disabled",!1).html("Send Code");if(a.success)$("#divPhoneLogin_Phone").hide(),$("#divPhoneLogin_Confirm").show("fast",
function(){$("#phoneloginconfirm").is(":focusable")&&$("#phoneloginconfirm").focus()});else return alert(a.error)})}).on("click","#btnPhoneLoginConfirm",function(a){a.preventDefault();if(0==$("#phoneloginconfirm").val().length)return alert("You must enter a confirmation code");$("#btnPhoneLoginProcessing").show();$("#btnPhoneLoginBack").hide();$("#btnPhoneLoginConfirm").hide();$("#btnPhoneLoginResendCode").hide();site.request("login-phone/",{action:"validate_code",confirm:$("#phoneloginconfirm").val()},
function(a){if(a.success)return $("#btnPhoneLoginProcessing").hide(),$("#divPhoneLoginSuccess").show(),0<a.url.length?window.location=a.url:location.reload();$("#btnPhoneLoginProcessing").hide();$("#btnPhoneLoginBack").show();$("#btnPhoneLoginConfirm").show();$("#btnPhoneLoginResendCode").show();return alert(a.error)})}).on("click","#btnPhoneLoginBack",function(a){a.preventDefault();$("#divPhoneLogin_Confirm").hide();$("#divPhoneLogin_Phone").show();$("#phoneloginconfirm").val("")}).on("click","#btnPhoneLoginResendCode",
function(a){a.preventDefault();$("#phoneloginconfirm").val("");$("#btnPhoneLoginResendCode").attr("disabled",!0).html('<i class="fas fa-fw fa-spin fa-circle-notch"></i> Sending ...');site.request("login-phone/",{action:"resend_code",phone:$("#loginphone").val(),country:$("#loginphonecountry").children("option:selected").val()},function(a){if(a.success)$("#btnPhoneLoginResendCode").attr("disabled",!1).html("Send Again"),$("#phoneloginconfirm").is(":focusable")&&$("#phoneloginconfirm").focus();else return alert(a.error)})});
LoginHelper.bin=null},login:function(a){var b=a.find('[name="username"]').val().trim(),c=a.find('[name="password"]').val().trim(),d=a.find('[name="rememberlogin"]').prop("checked")?1:0,e=a.find('[name="memberships"]').val(),f=a.find("button").eq(0),g="",h=a.find("input[name=amw]").val();b&&c&&$.getScript("https://www.google.com/recaptcha/api.js?render=6LcRTXsUAAAAAMFZDz9zX9vvE0P6Y_If8hGQwI9X",function(k,m,l){grecaptcha.ready(function(){grecaptcha.execute("6LcRTXsUAAAAAMFZDz9zX9vvE0P6Y_If8hGQwI9X",
{action:"responsive_login"}).then(function(k){g=k;a.find("input").attr("disabled",!0);f.data("ohtml",f.html());f.attr("disabled",!0).html('<i class="fas fa-fw fa-spin fa-circle-notch"></i> Loading ...');k={username:b,password:c,"login-form-captcha-token":g,responsive:!0,rememberlogin:d,memberships:e};h&&(k.amw=h);site.request("login/",k,function(c){if(c.already)return window.location=window.location.pathname;a.find("input").removeAttr("disabled");if(!c.error&&LoginHelper.after_login_url)return window.location=
LoginHelper.after_login_url;if(c.url)return site.ls.save("last-username",a.find('[name="rememberlogin"]').is(":checked")?b:""),window.location=c.url;f.removeAttr("disabled").html(f.data("ohtml"));if(c.error)return $.getScript("https://www.google.com/recaptcha/api.js",function(a,b,c){$(".login-form .recaptcha-holder").show()}),alert(c.error)})})})})},glogin:function(a,b){site.request("login/",{gusertoken:a,email:b,responsive:"1"},function(b){if(b.already)return window.location=window.location.pathname;
if(!b.error&&!b.error_dup&&LoginHelper.after_login_url)return window.location=LoginHelper.after_login_url;if(b.url)return window.location=b.url;if(b.error_dup)return $("#window-register-google").foundation("close"),alert(b.error_dup);$("#window-register-google").data("google_email",b.email);$("#window-register-google").data("gtoken",a);$("#window-register-google").foundation("open")});return!0},ini:function(){$("#window-register").on("closed.zf.reveal",function(){window.abandoned_stick||(site.utility.cookie.remove("abandoned"),
site.utility.cookie.remove("abandoned_id"));window.abandoned_stick=0});$("#window-register").on("open.zf.reveal",function(){window.abandoned_stick=1;site.vars.iovation&&site.iovation.init()});$("#window-login").on("open.zf.reveal",function(a){window.abandoned_stick=1});$("#window-login").on("closed.zf.reveal",function(a){window.abandoned_stick||(site.utility.cookie.remove("abandoned"),site.utility.cookie.remove("abandoned_id"));14==site.theater.id&&setTimeout(function(){window.scrollTo(0,0)},100);
window.abandoned_stick=0});"function"==typeof LoginHelper.bin&&LoginHelper.bin();var a=site.ls.load("last-username");a&&($(".login-form [name='rememberlogin']").trigger("click"),$(".login-form [name='username']").val(a))}};$(document).ready(LoginHelper.ini);
var Titles={bin:function(){$(document).on("click",function(){$("div#title.pop-title").remove()}).on("mouseleave","[title],[ot]",function(){$("div#title.pop-title").remove();$("html.whatinput-types-touch").length||$(this).attr("ot")&&$(this).attr("title",$(this).attr("ot")).removeAttr("ot")}).on("mouseenter","[title]:not([title-off]),[ot]",function(a){$("div#title.pop-title").remove();if(!$("html.whatinput-types-touch").length&&($(this).attr("ot")||$(this).attr("ot",$(this).attr("title")).removeAttr("title"),
$(this).attr("ot"))){$("body").append('<div id="title" class="pop-title">'+$(this).attr("ot")+"</div>");a=$(this).offset();a={top:{top:a.top-$("div#title.pop-title").outerHeight()-8,left:a.left+$(this).outerWidth()/2-$("div#title.pop-title").outerWidth()/2,className:"top"},right:{top:a.top+$(this).outerHeight()/2-$("div#title.pop-title").outerHeight()/2,left:a.left+$(this).outerWidth()+5,className:"right"},bottom:{top:a.top+$(this).outerHeight()+8,left:a.left+$(this).outerWidth()/2-$("div#title.pop-title").outerWidth()/
2,className:"bottom"},left:{top:a.top+$(this).outerHeight()/2-$("div#title.pop-title").outerHeight()/2,left:a.left-$("div#title.pop-title").outerWidth()-5,className:"left"}};var b=a.bottom;$(this).attr("title-align")&&a[$(this).attr("title-align")]&&(b=a[$(this).attr("title-align")]);0>b.left&&(b=a.right);b.left+$("div#title.pop-title").outerWidth()>$(window).width()&&(b=a.left);$("div#title.pop-title").addClass(b.className).css({top:b.top,left:b.left}).show()}});Titles.bin=null},ini:function(){"function"==
typeof Titles.bin&&Titles.bin()}};$(document).ready(Titles.ini);
var ServiceWindow={chat:{enabled:!0,bin:function(){$(document).on("click","[chat-me]:not([disabled])",function(a){if(!_.isFunction(_.get(a,"isDefaultPrevented"))||!a.isDefaultPrevented())return a.preventDefault(),site.chat.use_assistant=!1,$(".chat_assistant").remove(),chat_assistant&&chat_assistant.set_assistant(),FlowMaster.launch({connection_type:"chat",profile_id:$(this).attr("chat-me"),profile_type_id:ServiceWindow.get_profile_type_id($(this))})}).on("click","#web-chat-caller .close,#web-chat-caller > article,#web-chat-caller .close-window",
function(){ServiceWindow.chat.hide(!0);site.chat.assistant&&($("div.chat_assistant").remove(),site.chat.chat_autosend_msg=null,site.chat.use_assistant=!1)}).on("click","#web-chat-caller .web-chat-connect",function(){$('#web-chat-caller div[step="2"] p').html("Please wait while we make your request ...");site.chat.dialog.talker.request.countdown.boot();ServiceWindow.step(2);site.sock.request("chat/request",{chat_type_id:$(this).parent().find('input[name="audio"]').prop("checked")?3:1,profile_rate_id:$(this).data("profile_rate_id"),
target_profile_id:_.get(ServiceWindow,"chat.data.data.profile.profile_id")}).then(function(a){ServiceWindow.chat.data=a;if(!1===_.get(a,"success")||_.get(a,"error"))return a=_.get(a,"error")||"An unknown error has occurred.","user_blocked"==a&&(a="The Profile you are requesting is blocked or has you blocked."),ServiceWindow.chat.hide(),alert(a),!1;setTimeout(function(){$('#web-chat-caller div[step="2"] p').html("Connecting to the "+site.data_get("word_talker")+" now...")},2E3);site.chat.chat_id=_.get(a,
"data.chat_id")},function(a){a=_.get(a,"error")||"An unknown error has occurred.";"user_blocked"==a&&(a="The Profile you are requesting is blocked or has you blocked.");ServiceWindow.chat.hide();alert(a)})})},talker:{bin:function(){$(document).on("click","#web-chat-talker .web-chat-accept",ServiceWindow.chat.talker.accept).on("click","#web-chat-talker .web-chat-decline",ServiceWindow.chat.talker.decline)},accept:function(){$("#web-chat-talker .web-chat-accept, #web-chat-talker .web-chat-decline").attr("disabled",
"disabled");site.chat.dialog.talker.request.accept(ServiceWindow.chat.talker.data.chat_id)},decline:function(){$("#web-chat-talker .web-chat-accept, #web-chat-talker .web-chat-decline").attr("disabled","disabled");site.chat.dialog.talker.request.decline(ServiceWindow.chat.talker.data.chat_id)},show:function(a){$("body").addClass("no-overflow");ServiceWindow.chat.talker.data=a;if(!site.user.id)return $("#window-login").foundation("open");$("#web-chat-talker ._profile_image img").attr("src",_.get(a,
"other_chat_profile_profile_avatar_https")||site.url.current+"images/_default_avatar.png");$("#web-chat-talker ._profile_title").html(_.get(a,"other_chat_profile_profile_title"));$("#web-chat-talker").attr("active",!0);ServiceWindow.step(1)},hide:function(){$("body").removeClass("no-overflow");$("#web-chat-talker").removeAttr("active")}},show:function(a){$("body").addClass("no-overflow");if(!a)return alert("Invalid Profile.");if(!site.user.id)return site.utility.cookie.set("abandoned","chat",1),site.utility.cookie.set("abandoned_id",
a),$("#window-login").foundation("open");if(1!=site.user.type_id)return alert("Only Callers can use this feature.");$("#web-chat-caller ._head").addClass("hide");$("#web-chat-caller").attr("active",!0);ServiceWindow.step(0);site.request("ajax/chat/",{action:"init",target_profile_id:a},function(b){ServiceWindow.chat.data=b;if(!1===_.get(b,"success")||_.get(b,"error"))return b=_.get(b,"error")||"An unknown error has occurred.",ServiceWindow.chat.hide(),alert(b),!1;if(!$("#quick-view:visible").length&&
!site.chat.use_assistant){var c=document.createElement("span");c=$(c);c.attr("profile-id",a);c.attr("href",_.get(b,"data.profile.url_https"));QuickView.start(c,_.get(b,"data.profile.avatar_https"))}$("#web-chat-caller ._profile_image img").attr("src",_.get(b,"data.profile.avatar_https"));$("#web-chat-caller ._profile_title").html(_.get(b,"data.profile.title"));$("#web-chat-caller ._head").removeClass("hide");var d="";_.parseInt(_.get(b,"data.profile.is_chatable_audio"))&&(d+='<div class="switch large">\t\t\t\t\t\t\t\t<p class="headline">Enable Audio Chat</p>\t\t\t\t\t\t\t\t<p class="footnote">Listen Live through your speakers while you webchat</p>\t\t\t\t\t\t\t\t<input class="switch-input" id="yes-no" type="checkbox" name="audio" data-html="Listen Live through your speakers while you webchat" />\t\t\t\t\t\t\t\t<label class="switch-paddle" for="yes-no" style="display: inline-block;">\t\t\t \t\t\t\t\t\t<span class="switch-active" aria-hidden="true">Yes</span>\t\t\t\t\t\t\t\t\t<span class="switch-inactive" aria-hidden="true">No</span>\t\t\t\t\t\t\t\t</label>\t\t\t\t\t\t\t</div>');
_.each(_.get(b,"data.profile_rate.listing"),function(a){a.price_caller&&(d+='<button class="web-chat-connect" data-profile_rate_id="'+a.profile_rate_id+'">'+(17==a.rate_type_id?"Chat with Me for $"+utility.format.money(a.price_caller)+"/min":"Up to "+a.minutes+" minutes for $"+utility.format.money(a.price_caller))+"</button>")});$('#web-chat-caller div[step="1"] nav').html(d);ServiceWindow.step(1)})},hide:function(a,b){site.chat.dialog.talker.request.countdown.destroy();"undefined"!==typeof b&&!0===
b&&site.chat.chat_id?site.request("ajax/chat/",{action:"missed",chat_id:site.chat.chat_id}):!0===a&&site.chat.chat_id&&site.request("ajax/chat/",{action:"cancel",chat_id:site.chat.chat_id});$("body").removeClass("no-overflow");$("#web-chat-caller").removeAttr("active")}},text:{bin:function(){$(document).on("click",".text-start,[text-me][active],[text-me]:not([disabled])",function(a){if(!_.isFunction(_.get(a,"isDefaultPrevented"))||!a.isDefaultPrevented()){if(0<$(this).parents("div.homepage-dashboard").length&&
!$(this).hasClass("active")&&"undefined"==typeof $(this).attr("active"))return!1;a.preventDefault();var b=_.get(site.vars,"user.type_id");a=ServiceWindow.get_profile_type_id($(this));return b&&a&&3!=parseInt(b)+parseInt(a)?(b=_.get(site.vars,"words.talker"),site.dialog.alert("You cannot initiate this action with another "+(2==a?b:"caller")+"."),!1):"2"==_.get(site.vars,"user.type_id")?(site.sms_window_request($(this).parents("div.page-my-profile").data()),!1):FlowMaster.launch({connection_type:"text",
profile_id:$(this).attr("text-me"),profile_type_id:ServiceWindow.get_profile_type_id($(this))})}}).on("click","#text-message .close,#text-message > article",function(){ServiceWindow.text.hide()})},show:function(a,b){$("body").addClass("no-overflow");if(!a)return site.js_error("Invalid Profile.");if(!site.user.id)return $("#window-login").foundation("open");b=b||1;if(site.user.type_id!=b)return site.js_error("Only "+(1==b?"Callers":site.vars.words.talkers)+" can use this feature.");$("#text-message #text-connect").removeProp("disabled").html("Start "+
site.vars.words.texting);$("#text-message ._head").addClass("hide");$("#text-message").attr("active",!0);ServiceWindow.step(0);site.request("ajax/phone-initialize/",{action:"caller_sms_listing",profile_id:a},function(c){ServiceWindow.text.data=c;if(!1===_.get(c,"success")||_.get(c,"error")){var d=_.get(c,"error")||"An unknown error has occurred.";site.js_error(d);ServiceWindow.text.hide();return!1}var e=null;_.each(c.listing,function(a){3==a.phone_status_id&&1==a.is_sms&&(e=site.utility.format.phone(a.number,
a.country_id))});$("#text-message ._profile_image img").attr("src",_.get(c,"profile.listing[0].avatar_https"));$("#text-message ._profile_title").html($("[profile-id="+a+"]").find("h1,h2").eq(0).text()||_.get(c,"profile.listing[0].title"));$("#text-message ._head").removeClass("hide");$("#text-message .text-number").html(e);$("#text-message .text-change").unbind("click").on("click",function(c){MyPhone.show(function(){ServiceWindow.text.show(a,b)})});$("#text-message #text-connect").unbind("click").on("click",
function(){if(!e)return site.js_error("Please set your number for texts to start this conversation.");$(this).html();$(this).prop("disabled",!0);$(this).html("Please wait, while we start your conversation...");var b={};b["action-sms-init"]={action_sms_init_csurf_token:c.action_sms_init_csurf_token,send_initial_message:!0,source_profile_id:2==site.user.type_id?$('#text-message select[name="source_profile_id"]').val():null,source_user_id:site.user.id,target_profile_id:a};site.request("api/v3.1/action/sms/init/",
b,function(a){if(3==site.theater.id||14==site.theater.id){var b=_.get(a,'["action-sms-init"].data.number');b='Your conversation has started. If you did not receive our system message, you can text the talker at <span clas="phone">'+site.utility.format.phone(b,"US")+"</span> and they will receive your message.";if(!1===_.get(a,'["action-sms-init"].success')||_.get(a,'["action-sms-init"].error'))b=_.get(a,'["action-sms-init"].error')||"An unknown error has occurred.";$('#text-message div[step="2"] p').html(b);
ServiceWindow.step(2)}else!1===_.get(a,'["action-sms-init"].success')||_.get(a,'["action-sms-init"].error')?(b=_.get(a,'["action-sms-init"].error')||"An unknown error has occurred.",$('#text-message div[step="2"] p').html(b),ServiceWindow.step(2)):(b=_.get(a,'["action-sms-init"].profile_id'),a=_.get(a,'["action-sms-init"].other_profile_id'),""==b||""==a?(b="There was an error opening the chat, click the chat button to open your available chats.",$('#text-message div[step="2"] p').html(b),ServiceWindow.step(2)):
TextChat.showdetail(b,a))})});ServiceWindow.step(1)})},hide:function(){$("body").removeClass("no-overflow");$("#text-message").removeAttr("active")}},ctc:{bin:function(){$(document).on("click","#dropdown-ctc-plans a",function(a){a.preventDefault();ServiceWindow.ctc.change_plan($(this))}).on("click",".service-window [go-step]",function(a){a.preventDefault();$("#click-to-call .plan a")["dial-in"!=$(this).attr("go-step")?"show":"hide"]();ServiceWindow.step($(this).attr("go-step"))}).on("click",".ctc-start,[call-me][active],[call-me]:not([disabled]),.profile-page [call-me][rate-id]",
function(a){a.preventDefault();return $(this).is("[call-me]:not([disabled])")&&0<$(this).parents("div.homepage-dashboard").length&&!$(this).attr("active")?!1:FlowMaster.launch({connection_type:"call",profile_id:$(this).attr("call-me"),rate_id:$(this).attr("rate-id"),profile_type_id:ServiceWindow.get_profile_type_id($(this))})}).on("click","#click-to-call .close,#click-to-call .close-window,#click-to-call > article",function(a){a.preventDefault();ServiceWindow.ctc.hide()}).on("websockets:phone_call",
ServiceWindow.ctc.websockets).on("click","#click-to-call #ctc-connect",ServiceWindow.ctc.connect);$(document).on("click","#dropdown-ctc-phone a",function(a){a.preventDefault();$(this).hasClass("add-phone")?MyPhone.show(function(){var a=$("#dropdown-ctc-funds li.active").data("phone_call_type_id"),c=$("#dropdown-ctc-cards li.active").data("user_credit_card_id"),d=$("#ctc-record:checked").length;ServiceWindow.ctc.show(ServiceWindow.ctc.data.profile.profile_id,ServiceWindow.ctc.$profileRateId,a,c,d,
1)}):ServiceWindow.ctc.change_phone($(this))}).on("click","#acd > span",function(){$(this).addClass("collapse")});$(document).on("click","#dropdown-ctc-cards a",function(a){a.preventDefault();ServiceWindow.ctc.change_cards($(this))});$(document).on("click","#dropdown-ctc-funds a",function(a){a.preventDefault();ServiceWindow.ctc.change_funds($(this))});ServiceWindow.ctc.bin=_.noop},change_phone:function(a){$("#dropdown-ctc-phone .active").removeClass("active");a.parent().addClass("active");a=a.text();
$("#click-to-call [data-toggle='dropdown-ctc-phone'] span").html(a);$("#ctc-connect span").html(" at "+a);$("#click-to-call [data-toggle='dropdown-ctc-phone']").trigger("click")},change_funds:function(a,b){$("#dropdown-ctc-funds .active").removeClass("active");a.parent().addClass("active");a=a.html();$("#click-to-call [data-toggle='dropdown-ctc-funds'] span").html(a);!1!==b&&$("#click-to-call [data-toggle='dropdown-ctc-funds']").trigger("click");1==$("#dropdown-ctc-funds li.active").data("phone_call_type_id")?
$('#click-to-call [data-toggle="dropdown-ctc-cards"]').hide():$('#click-to-call [data-toggle="dropdown-ctc-cards"]').show()},change_plan:function(a){var b=a.text();$("#dropdown-ctc-plans .active").removeClass("active");a.parent().addClass("active");$("#click-to-call .plan span").html(b);$("#click-to-call [data-toggle='dropdown-ctc-plans']").trigger("click");1===_.parseInt($("#dropdown-ctc-plans .active").data("rate_type_id"))?($('#dropdown-ctc-funds li[data-phone_call_type_id="3"]').show(),$('#click-to-call div[go-step="dial-in-or"]').show(),
$('#click-to-call button[go-step="dial-in"]').show()):(!$('#dropdown-ctc-funds li[data-phone_call_type_id="3"]').hasClass("active")&&$("#dropdown-ctc-funds li.active").length||ServiceWindow.ctc.change_funds($('#dropdown-ctc-funds li[data-phone_call_type_id="1"] a'),!1),$('#dropdown-ctc-funds li[data-phone_call_type_id="3"]').hide(),$('#click-to-call div[go-step="dial-in-or"]').hide(),$('#click-to-call button[go-step="dial-in"]').hide())},change_cards:function(a,b){$("#dropdown-ctc-cards .active").removeClass("active");
a.parent().addClass("active");a=a.text();$("#click-to-call [data-toggle='dropdown-ctc-cards'] span").html(a);!1!==b&&$("#click-to-call [data-toggle='dropdown-ctc-cards']").trigger("click")},render_cards:function(a,b){var c='<li class="disabled">No Saved Credit Cards</li>';if(!_.isEmpty(a.user.credit_cards)){c="";var d=!1;_.each(a.user.credit_cards,function(a){c+="<li"+(b&&b==a.user_credit_card_id||!b&&!d?' class="active"':"")+' data-user_credit_card_id="'+a.user_credit_card_id+'"><a><span>'+a.number_partial+
"</span></a></li>";d=!0})}$("#dropdown-ctc-cards ul").html(c);$("#dropdown-ctc-cards li.active a").trigger("click").trigger("click")},render_funds:function(a,b){a=!a.user||_.isEmpty(a.user.credit_cards);show_new_default=!1;a?b=1:!b&&site.user.data.phone_call_type_id_default?b=site.user.data.phone_call_type_id_default:(b=3,show_new_default=!0);var c='<li data-phone_call_type_id="1" '+(1==b?' class="active"':"")+"><a><span>Use funds in my wallet</span></a></li>";a||(html_new="",show_new_default&&(html_new=
'<img src="/img/new-badge.png" style="max-height:38px" />'),c+='\t\t\t<li data-phone_call_type_id="3" class="'+(3==b?"active":"")+'"><a><span>'+html_new+'Use my wallet, then my credit card</span></a></i>\t\t\t<li data-phone_call_type_id="2" class="'+(2==b?"active":"")+'"><a><span>Use my credit card</span></a></i>\t\t');$("#dropdown-ctc-funds ul").html(c);$("#dropdown-ctc-funds li.active a").trigger("click").trigger("click");$("#dropdown-ctc-plans li.active a").trigger("click").trigger("click")},render_plans:function(a,
b){var c="";ServiceWindow.ctc.$profileRateId=b;for(var d in a.profile.rates){var e=a.profile.rates[d],f="";if(e.profile_rate_price)if(1==a.profile.is_skype_call)11==e.rate_type_id&&(f+='<li class="active" data-rate_type_id="'+e.rate_type_id+'" data-profile_rate_id="'+e.profile_rate_id+'"><a><span>Skype: $'+e.profile_rate_price+"/min</span></a></li>");else if(1==e.rate_type_id||2==e.rate_type_id||3==e.rate_type_id){f+='<li data-rate_type_id="'+e.rate_type_id+'" data-profile_rate_id="'+e.profile_rate_id+
'"';if(b==e.profile_rate_id||!b&&1==e.rate_type_id)f+=' class="active"';f+="><a><span>";1==e.rate_type_id||19==e.rate_type_id?f+="Pay Per Minute: $"+e.profile_rate_price+"/min":3==e.rate_type_id?f+="Special: "+e.minutes+" minutes for $"+e.profile_rate_price:2==e.rate_type_id&&(f+="Up to "+e.minutes+" minutes for $"+e.profile_rate_price);f+="</span></a></li>"}c=3==e.rate_type_id?f+c:c+f}$("#dropdown-ctc-plans ul").html(c);$("#dropdown-ctc-plans li.active a").trigger("click").trigger("click")},render_phone:function(a,
b,c){var d="";_.get(a,"user.phones.listing")&&_.each(_.get(a,"user.phones.listing"),function(a){if(2==a.phone_status_id||3==a.phone_status_id)d+='<li data-phone_id="'+a.phone_id+'"'+(1==a.is_default?' class="active"':"")+"><a><span>"+site.utility.format.phone(a.number,a.country_id)+"</span></a></li>"});d+='<li><a class="add-phone"><span>Add New Number</span></a></li>';$("#dropdown-ctc-phone ul").html(d);$("#dropdown-ctc-phone li.active a").trigger("click").trigger("click")},show:function(a,b,c,d,
e,f){if(!_.isFunction(_.get(a,"isDefaultPrevented"))||!a.isDefaultPrevented()){_.isObject(a)&&(b=_.get(a,"profile_rate_id"),c=_.get(a,"phone_call_type_id"),d=_.get(a,"user_credit_card_id"),e=_.get(a,"record_session"),f=_.get(a,"jump_step"),a=_.get(a,"profile_id"));$("body").addClass("no-overflow");f=_.isUndefined(f)||!_.isNumber(f)?1:f;if(!a)return site.js_error("Invalid Profile.");if(!site.user.id)return site.utility.cookie.set("abandoned","ctc",1),site.utility.cookie.set("abandoned_id",JSON.stringify({profile_id:a,
profile_rate_id:b,phone_call_type_id:c,user_credit_card_id:d,record_session:e,jump_step:f},1)),$("#window-login").foundation("open");if(1!=site.user.type_id)return site.js_error("Only Callers can use this feature.");$("#click-to-call ._head").addClass("hide");$("#click-to-call").attr("active",!0);ServiceWindow.step(0);site.request("ajax/ctc-initialize/",{profile_id:a},function(g){ServiceWindow.ctc.data=g;if(!1===_.get(g,"success")||_.get(g,"error")){var h=_.get(g,"error")||"An unknown error has occurred.";
ServiceWindow.ctc.hide();site.js_error(h);8==_.get(g,"error_number")&&AMW.launch(ServiceWindow.ctc.show.bind(null,a,b,c,d,e,f));return!1}ServiceWindow.ctc.render_plans(g,b);ServiceWindow.ctc.render_phone(g,a,b);ServiceWindow.ctc.render_funds(g,c);ServiceWindow.ctc.render_cards(g,d);g.profile.default_recording_setting?($("#click-to-call .recordings-disabled").hide(),$("#click-to-call .recordings-enabled").show()):($("#click-to-call .recordings-disabled").show(),$("#click-to-call .recordings-enabled").hide());
"system"==_.get(g,"profile.title")?($("#click-to-call ._profile_image").hide(),$("#click-to-call ._profile_title").html("Chat line"),$("#click-to-call #dial-in-info").hide()):($("#click-to-call ._profile_image img").attr("src",_.get(g,"profile.avatar_https")),$("#click-to-call ._profile_title").html(_.get(g,"profile.title")));$("#click-to-call .dial-in-profile-number b").html(_.get(g,"profile.profile_id"));$("#click-to-call ._head").removeClass("hide");g=_.get(g,"credit_html")||"";$("#click-to-call ._credit_html").html(g);
$("#click-to-call ._credit_html .credit-alert").append("<br /><small>Your free credit will be used before the selected payment option below.</small>");_.isUndefined(e)&&(e=!!Number(site.vars.user.data.default_recording_setting));$("#ctc-record").prop("checked",e?!0:!1);ServiceWindow.step(f)})}},connect:function(){ServiceWindow.step(3);$requestInput={phone_call_type_id:$("#dropdown-ctc-funds li.active").data("phone_call_type_id"),phone_id:$("#dropdown-ctc-phone li.active").data("phone_id"),profile_id:ServiceWindow.ctc.data.profile.profile_id,
profile_rate_id:$("#dropdown-ctc-plans li.active").data("profile_rate_id"),TL_PHONE_CALL_RECORD:$("#ctc-record:checked").length?"TRUE":"FALSE",user_credit_card_id:$("#dropdown-ctc-cards li.active").data("user_credit_card_id")};ServiceWindow.ctc.data.profile.is_skype_call&&($requestInput.is_skype_call=1);site.request("ajax/ctc-initiate/",$requestInput,function(a){if(!1===_.get(a,"success")||_.get(a,"error"))return a=_.get(a,"error")||"An unknown error has occurred.",site.js_error(a),ServiceWindow.step(1),
!1})},voicemail:function(){site.user.id&&_.get(ServiceWindow,"ctc.data.profile.profile_id")&&(site.request("ajax/leave-voicemail.php",{action:"call",user_id:site.user.id,profile_id:ServiceWindow.ctc.data.profile.profile_id}),ServiceWindow.ctc.hide())},websockets:function(a,b){a="";b=ServiceWindow.ctc.websocketsData(b);if(b.initiation_failed_status){a="The connection failed.";switch(_.parseInt(b.initiation_failed_status)){case 3:case 4:case 14:a=null;window.CTC_ALERT||(window.CTC_ALERT=!0,1==site.user.type_id&&
(b="<p>We're sorry, this "+site.data_get("word_talker")+' could not accept your call.</p><div class="dialog-buttons"><button class="dialog-button-yes" data-action="yes">LEAVE VOICEMAIL</button>',site.dialog.custom({classes:"dialog-red",html:b+'<button class="dialog-button-no" data-action="no">CLOSE</button></div>',title:"Sorry!"},function(a){a&&ServiceWindow.ctc.voicemail();window.CTC_ALERT=!1})));break;case 7:a="You did not answer, please check Phone Settings."}ServiceWindow.step(1);a&&!window.CTC_ALERT&&
(window.CTC_ALERT=!0,site.js_error(a,function(){window.CTC_ALERT=!1}));return!1}1==site.user.type_id&&2==b.phone_call_status_id&&b.caller_connected&&(b.show_acd=!0,site.clicktocall.ping(b),site.clicktocall.acd.caller.timer.start());if(b.talker_connected){if(b.caller_connected)return ServiceWindow.ctc.hide(),!1;a="We're calling you now ..."}else a="Contacting the "+site.data_get("word_talker")+" ...";$('#click-to-call div[step="3"] nav p').html(a)},websocketsData:function(a){if(!_.isArray(_.get(a,
"listing")))return!1;var b=[];_.each(a.listing,function(a){a.business_id==site.business.id&&b.push(a)});if(!b.length)return!1;a.listing=b;var c={show_acd:!1};2==site.user.type_id&&site.utility.cookie.get("clicktocall_show_acd")!=_.get(a,"listing[0].phone_call_id")&&(site.utility.cookie.set("clicktocall_show_acd",_.get(a,"listing[0].phone_call_id"),1),c.show_acd=!0);_.each(a.listing,function(a){c.phone_call_id=a.phone_call_id;-1!==[3,4,7,8,10,11,12,14].indexOf(a.phone_call_status_id)&&(c.initiation_failed_status=
a.phone_call_status_id);if(a.user_id==site.user.id&&1==site.user.type_id||a.user_id!=site.user.id&&2==site.user.type_id)c.duration=a.call_start_ts?a.call_end_ts-a.call_start_ts:0,c.duration=0>c.duration?0:c.duration,c.caller_connected=!1,2==a.phone_call_status_id&&(c.caller_connected=!0),3==a.phone_call_detail_type_id&&(c.talker_connected=!0),c.show_review=c.duration<site.vars.review_visibility_by_call_duration_min?!1:!0;if(a.user_id!=site.user.id&&1==site.user.type_id||a.user_id==site.user.id&&2==
site.user.type_id)_.merge(c,a),c.talker_connected=!1,2==a.phone_call_status_id&&(c.talker_connected=!0),c.in_progress=_.isNull(a.date_end)||!a.date_end,1==site.user.type_id&&(c.profile={avatar_https:a.profile_avatar_https,profile_id:a.profile_id,title:a.profile_title,title_rewrite:a.profile_title_rewrite}),c.rate={commission:a.rate_commission,is_ppm:-1!==[1,4,5,11,19].indexOf(a.rate_type_id)?1:0,minutes:a.rate_minutes,price:a.profile_rate_price,rate_id:a.rate_id,rate_type_id:a.rate_type_id};!c.duration&&
c.caller_connected&&c.talker_connected&&(c.duration=0);c.caller_connected&&c.talker_connected||(c.duration=0)});return c},hide:function(){$("body").removeClass("no-overflow");$("#click-to-call").removeAttr("active")}},step:function(a){$(".service-window:visible [step][active]").removeAttr("active");$(".service-window:visible [step='"+a+"']").attr("active",!0)},bin:function(){"function"==typeof ServiceWindow.ctc.bin&&ServiceWindow.ctc.bin();"function"==typeof ServiceWindow.text.bin&&ServiceWindow.text.bin();
"function"==typeof ServiceWindow.chat.bin&&ServiceWindow.chat.bin();"function"==typeof ServiceWindow.chat.talker.bin&&ServiceWindow.chat.talker.bin();ServiceWindow.bin=_.noop},ini:function(){"function"==typeof ServiceWindow.bin&&ServiceWindow.bin()},get_profile_type_id:function(a){return $(a).parents("span[data-profile_type_id]").data("profile_type_id")||$(a).parents("div[data-profile_type_id]").data("profile_type_id")}};$(document).ready(ServiceWindow.ini);
var GoTo={bin:function(){$(document).on("click","[go-to]",function(a){a.preventDefault();a=$(this).attr("go-to");$(this).attr("target")?window.open(a,$(this).attr("target")):window.location=a});GoTo.bin=null},ini:function(){"function"==typeof GoTo.bin&&GoTo.bin()}};$(document).ready(GoTo.ini);
var OfferWindow={bin:function(){$(document).on("click",".claim-offer-steps [go-step]",function(a){a.preventDefault();OfferWindow.step($(this).attr("go-step"))}).on("click","#window-offer .close-offer-window",function(){OfferWindow.hide()}).on("click",".claim-offer-steps .check-offer",function(){OfferWindow.check($(this))}).on("click",".show-offer-window",function(a){a.preventDefault();OfferWindow.show()}).on("click","#window-offer .check-offer-continue",function(){OfferWindow.hide();amw.show()}).on("click",
'.amw [tab="offer"] .check-offer-continue',function(){amw.show()}).on("click","#window-offer .login-notice a",function(a){a.preventDefault();return $("#window-login").foundation("open")}).on("keyup",".claim-offer-steps input",function(a){13==a.which&&($(this).closest(".claim-offer-steps").find(".check-offer").trigger("click"),$(this).blur())});OfferWindow.bin=null},check:function(a){var b=a.parent().find("input").val();if(!site.user.id)site.dialog.confirm({title:"Login Required",message:"You need to be logged in to use this feature. Would you like to login now?"},
function(a){if(a)return site.utility.cookie.set("abandoned","offer",1),site.utility.cookie.set("abandoned_id",JSON.stringify({offer_code:b}),1),$("#window-login").foundation("open")});else if(b){b=b.replace(/[^A-Z0-9]/ig,"");var c=16===b.length||/[A-Za-z]/.test(b)?"redeem":"redeem_hm";a.html('<i class="fas fa-spin fa-spinner"></i> Loading').attr("disabled",!0);site.request("ajax/offer/",{action:c,offer_code:b},function(b){var d=_.get(b,"error")||"";a.html("Continue").removeAttr("disabled");1011==
b.code?site.dialog.alert(d):"redeem"===c?(d.length||(OfferWindow.hide(),site.dialog.success({title:"Success!",message:"Your Coupon has been redeemed and $"+b.offer.amount+" was added to your wallet balance."},function(){site.request("ajax/offer/",{action:"update"})})),"Offer already redeemed"===d?(OfferWindow.hide(),site.dialog.alert({title:"Error",message:d})):(a.closest(".claim-offer-steps").find('[step="done"] p').html(d),OfferWindow.step("done"),$(".amw-offer").show(),$(".amw-offer p").html(d.replace(" on the next page",
" below")))):d?(OfferWindow.hide(),site.dialog.alert({title:"Error",message:d})):(OfferWindow.hide(),site.dialog.success({title:"Success!",message:"Your HotMovies.com Pin has been redeemed and $5 was added to your wallet balance."}))})}},show:function(){$("#window-offer").show();$("#window-offer input").focus()},hide:function(){$("#window-offer").hide();OfferWindow.step("code")},step:function(a){$(".claim-offer-steps [step][active]").removeAttr("active");$(".claim-offer-steps [step="+a+"]").attr("active",
!0)},ini:function(){"function"==typeof OfferWindow.bin&&OfferWindow.bin()},data:{}};$(document).ready(OfferWindow.ini);
var QuickSearch={cache:[],bin:function(){$(document).on("input",".quick-search",function(){QuickSearch.shared_launch($(this));QuickSearch.delay&&clearTimeout(QuickSearch.delay);QuickSearch.go()}).on("keyup","#quick-search",function(a){site.vars.is_hotchat&&!$.isNumeric($(this).val())&&$(this).val($(this).val().replace(/[^0-9]/g,""));switch(a.which){case 13:return window.location=site.url.current+"browse/?q="+QuickSearch.keyword;case 27:if($(this).val())return $(this).val("");QuickSearch.hide()}}).on("click",
"#dropdown-search-underlay,#dropdown-search-close",function(){QuickSearch.hide()}).on("click","#dropdown-search li a",function(){$("#dropdown-search li a[clicked] i").remove();$("#dropdown-search li a[clicked]").removeAttr("clicked");$(this).append('<i class="fas fa-spin fa-spinner"></i>').attr("clicked",!0)}).on("click",".header-button",function(a){a=_.get(a,"originalEvent.srcElement.dataset.tabselected");"undefined"!==typeof a&&$("#window-login").attr("data-tab-selected",a);QuickSearch.hide()}).on("click",
"#free_offer_header",function(a){a=_.get(a,"originalEvent.srcElement.dataset.tabselected");"undefined"!==typeof a&&$("#window-login").attr("data-tab-selected",a);QuickSearch.hide()});QuickSearch.bin=null},shared_launch:function(a){QuickSearch.input=a;QuickSearch.keyword=a.val();QuickSearch.show()},go:function(){min_length=site.vars.is_hotchat?6:3;if($(QuickSearch.input).val().length<min_length)return QuickSearch.length();$("#dropdown-search li:not(.case)").remove();$("#dropdown-search li.case[active]").removeAttr("active");
$("#dropdown-search li.case.searching").attr("active",!0);if(QuickSearch.cache[QuickSearch.keyword])return QuickSearch.results(QuickSearch.cache[QuickSearch.keyword],!0);null!=QuickSearch.ajax&&(QuickSearch.ajax.abort(),QuickSearch.ajax=null);QuickSearch.delay=setTimeout(function(){QuickSearch.searching=!0;QuickSearch.ajax=site.request("ajax/search/",{action:"autocomplete",query:QuickSearch.keyword},function(a){QuickSearch.searching&&delete QuickSearch.searching;if(!a||!a.data||!a.data.listing)return QuickSearch.noresults();
QuickSearch.results(a.data.listing,!1)})},500)},results:function(a,b){QuickSearch.cache[QuickSearch.keyword]||(QuickSearch.cache[QuickSearch.keyword]=a);$("#dropdown-search li.case[active]").removeAttr("active");var c=$("#dropdown-search ul"),d=0;c.html("");$.each(a,function(a,b){d++;5!=c.find("li").length&&c.append('<li><a href="'+site.url.current+b.url_https+'"><img src="'+b.avatar_https+'" />'+b.title+"</a></li>")});c.append('<li class="more-results"><a href="'+site.url.current+"browse/?q="+QuickSearch.keyword+
'"><i class="fas fa-caret-right"></i>'+(5>=d?"See All":"More")+" Results</a></li>")},length:function(){QuickSearch.searching&&delete QuickSearch.searching;$("#dropdown-search li:not(.case)").remove();$("#dropdown-search li.case[active]").removeAttr("active");$("#dropdown-search li.case.length").attr("active",!0)},noresults:function(){QuickSearch.searching&&delete QuickSearch.searching;$("#dropdown-search li:not(.case)").remove();$("#dropdown-search li.case[active]").removeAttr("active");$("#dropdown-search li.case.no-results").attr("active",
!0)},show:function(){var a=QuickSearch.input;a.attr("active",!0);$("#dropdown-search-underlay").attr("active",!0);$("#dropdown-search").css({top:a.offset().top+a.outerHeight()-$(window).scrollTop(),left:a.offset().left,width:a.outerWidth()}).attr("active",!0);$("#dropdown-search-close").css({top:a.offset().top-$(window).scrollTop(),left:a.offset().left+a.outerWidth()-$("#dropdown-search-close").outerWidth(),background:"#fff","z-index":"100"}).attr("active",!0);$("body").addClass("no-overflow")},hide:function(){$(".quick-search[active]").removeAttr("active");
$("#dropdown-search-close[active]").removeAttr("active");$("#dropdown-search[active]").removeAttr("active");$("#dropdown-search-underlay[active]").removeAttr("active");$("#dropdown-search li.case[active]").removeAttr("active");$("#dropdown-search li:not(.case)").remove();QuickSearch.delay&&clearTimeout(QuickSearch.delay);$("body").removeClass("no-overflow")},ini:function(){"function"==typeof QuickSearch.bin&&QuickSearch.bin()}};$(document).ready(QuickSearch.ini);
var TarotTable={bin:function(){$(document).on("click",".close-tarot-table",function(a){a.preventDefault();return site.dialog.confirm("Are you sure you want to close the tarot table?",function(a){a&&TarotTable.hide()})});TarotTable.bin=null;TarotTable.talker_launched=null;TarotTable.caller_launched=null},show:function(){$("#tarot-table").show()},getCSS:function(){site.demand.css("tarotCSS","tarottable",function(){console.log("got css")})},hide:function(){$("#tarot-table").hide();deck.unmount();TarotTable.talker_launched=
null;TarotTable.caller_launched=null},launchTarotTable:function(a){site.demand.bundle("Deck","tarottable",function(){tableDeckLaunch(a);2==site.user.type_id?TarotTable.talker_launched=!0:1==site.user.id&&(TarotTable.caller_launched=!0)},!1)},ini:function(){"function"==typeof TarotTable.bin&&TarotTable.bin()}};$(document).ready(TarotTable.ini);site.warning={initialize:function(){}};
$(document).ready(function(){$(window).resize(function(){$("[data-dropdown].is-open").removeClass("is-open")});$(document).on("open.zf.reveal",function(a){"message-view-modal"==a.target.id&&(message_modal_open||$("#message-view-modal").foundation("close"))});$(document).on("closed.zf.reveal",function(a){"message-view-modal"==a.target.id&&(message_modal_open=!1)})});
(function(){var a={has_user_input:!1,refresh_credit_button:function(){$(".message-window-from").attr("data-profile_id")&&$(".message-window-to").data("profile_id")?($(".window-compose-message .credit").data("source_profile_id",$(".message-window-from").data("profile_id")),$(".window-compose-message .credit").data("target_profile_id",$(".message-window-to").data("profile_id")),$(".window-compose-message .credit").removeAttr("disabled")):($(".window-compose-message .credit").data("source_profile_id",
""),$(".window-compose-message .credit").data("target_profile_id",""),$(".window-compose-message .credit").attr("disabled","disabled"))},init:function(){a.has_user_input=!1;$(document).on("change","#message-view-modal-reply textarea, .message-window-subject",function(){a.has_user_input=$("#message-view-modal-reply textarea").val()||$(".message-window-subject").val()?!0:!1});window.booted_modules||(window.booted_modules={});if(window.booted_modules.MessageCompose)return!1;window.booted_modules.MessageCompose=
{};$(document).on("click",".show-compose",function(){MessageComposeFragment.reset_attachments();a.show(this)});$(document).on("click","[mail-me]",function(){MessageComposeFragment.reset_attachments();return FlowMaster.launch({connection_type:"message",profile_id:$(this).attr("mail-me"),profile_type_id:ServiceWindow.get_profile_type_id($(this))})});$(document).on("click","[voicemail-me]",function(){return FlowMaster.launch({connection_type:"voicemail",profile_id:$(this).attr("voicemail-me"),profile_type_id:ServiceWindow.get_profile_type_id($(this))})});
$(document).on("click",".window-compose-message > article, .window-compose-message .close",a.hide);$(document).on("keypress keyup keydown change",".message-window-subject",function(){$(".view-message-reply-subject").val($(this).val())});$(document).off("keyup.MessageCommission",".window-compose-message .ProfileCommission input");$(document).on("keyup.MessageCommission",".window-compose-message .ProfileCommission input",function(a){return ProfileCommission.trigger(a.target)});$(document).off("click",
".message-window-from[is_talker]");$(document).on("click",".message-window-from[is_talker]",function(){var a=$("div.window-compose-message div.profile_list");0===a.text().length&&site.request("global/ajax/address-load-user/",{},function(b){_.each(b.listing,function(b){a.append("<span data-profile_id='"+b.profile_id+"' data-title='"+b.title+"' data-avatar='"+b.avatar_https+"'><img src='"+b.avatar_https+"' />"+b.title+"</span>")});return $("div.window-compose-message div.profile_list").show()});site.address.close(!0);
return $("div.window-compose-message div.profile_list").toggle()});$(document).on("click","div.window-compose-message div.profile_list > span",function(){var b=$(this).data();$(".message-window-from").data("profile_id",b.profile_id);$(".message-window-from").html("<img src='"+b.avatar+"' />"+b.title);$("div.window-compose-message button.message-window-to").attr("disabled",!1);$("div.window-compose-message div.profile_list").hide();a.refresh_credit_button()});$(document).on("click",".message-window-to",
function(){var b=$(this),c=b.parent(),d=b.parent().parent().find(".message-window-from").data("profile_id"),e=!a.last_profile||a.last_profile!==d;a.last_profile=d;site.address.show(this,"left",function(a){site.address.close();$(".message-window-last-online",c).hide();var d=7<moment().diff(moment($(a).attr("data-profile-lastlogin")),"days")?"show":"hide";$(".message-window-last-online",c).html("#"+$(a).text()+" last online <br/> "+moment($(a).attr("data-profile-lastlogin")).format("dddd, MMMM Do YYYY, h:mm:ss a"));
$(".message-window-last-online",c)[d]();d=$(a).data("profileId");b.data("profile_id",d);$("#message-view-modal-reply").data("to_profile_id",d);b.html("<span>"+$(a).html()+"</span>");$(".message-window-from").attr("data-profile_id")&&$(".message-window-to").data("profile_id")?($(".window-compose-message .credit").data("source_profile_id",$(".message-window-from").data("profile_id")),$(".window-compose-message .credit").data("target_profile_id",$(".message-window-to").data("profile_id")),$(".window-compose-message .credit").removeAttr("disabled")):
($(".window-compose-message .credit").data("source_profile_id",""),$(".window-compose-message .credit").data("target_profile_id",""),$(".window-compose-message .credit").attr("disabled","disabled"))},null,d,e)});$(document).on("click","nav.profile-connect #wamwm[!disabled],span.profile-buttons #wamwm[active],div.homepage-dashboard #wamwm[active]",function(a){if(!site.user.id)return site.utility.cookie.set("wamwm_launch_data",JSON.stringify($(this).data()),1),$("#window-login").foundation("open");
var b=_.get(site.vars,"user.type_id");a=ServiceWindow.get_profile_type_id($(this));if(b&&a&&3!=parseInt(b)+parseInt(a))return b=_.get(site.vars,"words.talker"),site.dialog.alert("You cannot initiate this action with another "+(2==a?b:"caller")+"."),!1;a=$(this).data();a.avatar||(0<$(this).parents("div").find("img._profile_image").length?a.avatar=$(this).parents("div").find("img._profile_image").prop("src"):0<$(this).parents("div").find("img.profile-photo").length&&(a.avatar=$(this).parents("div").find("img.profile-photo").prop("src")));
site.wamwm.confirm(a)});wamwm_launch_data=site.utility.cookie.get("wamwm_launch_data");!1!==wamwm_launch_data&&(site.utility.cookie.remove("wamwm_launch_data"),site.wamwm.confirm(JSON.parse(wamwm_launch_data)))},show:function(b,c,d){a.has_user_input=!1;if(!_.isFunction(_.get(b,"isDefaultPrevented"))||!b.isDefaultPrevented()){b=(b=_.isString(b)||_.isNumber(b)?b:null)||$(this).data("profile_id")||$(this).attr("mail-me")||null;d=d||$(this).attr("my-profile-id")||$(this).attr("my-id")||null;if(!site.user.id)return site.utility.cookie.set("abandoned",
"MessageCompose",1),site.utility.cookie.set("abandoned_id",b,1),$("#window-login").foundation("open");c&&(c=$(document.createElement("div")),c.attr("href",site.url.current+"p/"+b+"/?quick=1"),c.attr("profile-id",b),QuickView.show(c));$("#address_book").remove();var e={};e.is_hotchat=site.vars.is_hotchat;d={i:[{profile:{profile_id:d}}]};b&&d.i.push({profile:{profile_id:b}});$("#message-view-modal-loading").foundation("open");b=window.location.pathname+"?compose=true";window.location.href!=b&&history.pushState("",
document.title,b);site.request("api/v3.1/batch/",d,function(b){a.hide();if(!_.get(b,"[0].success")||!_.get(b,"[0].data.listing[0]"))return alert("Sending messages is currently unavailable");if(site.vars.is_talker&&2==_.get(b,"[1].data.listing[0].user_type_id"))return site.dialog.alert("Only Callers can message "+site.vars.words.talkers);e={my_profile_id:_.get(b,"[0].data.listing[0].profile_id"),my_profile_avatar:_.get(b,"[0].data.listing[0].avatar_https")||site.url.current+"images/_default_avatar.png",
my_profile_title:_.get(b,"[0].data.listing[0].title"),other_profile_id:_.get(b,"[1].data.listing[0].profile_id"),other_profile_avatar:_.get(b,"[1].data.listing[0].avatar_https")||site.url.current+"images/_default_avatar.png",other_profile_title:_.get(b,"[1].data.listing[0].title"),is_talker:site.vars.is_talker,is_hotchat:site.vars.is_hotchat,allow_bonus:_.get(b,"[0].allow_bonus")};message_modal_open=!0;$("#message-view-modal").html(Mustache.render($("#template-window-compose-message").html(),e)).foundation("open");
600>$("#message-view-modal").height()&&$("#message-view-modal-reply textarea").css({height:"50px"});$("#message-view-modal-loading").foundation("close");InitObject.hook_string("ProfileCommission","trigger",$('li.ProfileCommission input[name="price"]'));a.show.done()})}}};a.show.loading=function(){$(".window-compose-message .loading").removeClass("hide");$(".window-compose-message .compose").addClass("hide");$(".window-compose-message").show()};a.show.done=function(){$(".window-compose-message .credit").attr("disabled",
"disabled");$(".window-compose-message .loading").addClass("hide");$(".window-compose-message .compose").removeClass("hide");$(".window-compose-message").show();a.auto_show_voicemail&&(a.auto_show_voicemail=!1,$(".attach-voicemail").trigger("click"));a.refresh_credit_button();$(".message-modal-attachments").foundation()};a.hide=function(b){if(!0!==b&&a.has_user_input)return site.dialog.confirm("Are you sure you want to cancel sending this message?",function(b){b&&(MessageCompose.has_user_input=!1,
a.hide(!0))});$("#message-view-modal").foundation("close");$("#address_book").hide()};$(document).ready(a.init);window.MessageCompose=window.ServiceWindow.MessageCompose=a})(window);
var Favorite={fridge:{},bin:function(){$(document).on("click.Favorite","[favorite-target]",function(a){a.preventDefault();Favorite.toggle_old($(this))});Favorite.bin=null},toggle:function(a){if(!site.user.id)return site.utility.cookie.set("abandoned","favorite",1),site.utility.cookie.set("abandoned_id",JSON.stringify({"favorite-target":a.target_profile_id},1)),$("#window-login").foundation("open");if(!a.profile_id)return site.dialog.alert("Invalid Profile"),!1;var b=a.anchor.find("i"),c=b.hasClass("fas fa-heart");
if(b.hasClass("fa-spin"))return!1;b.removeClass("fas far fa-heart").addClass("fas fa-spin fa-circle-notch");site.request("ajax/contacts/",{action:"toggle_favorite",source_profile_id:a.source_profile_id,target_profile_id:a.profile_id,debit_id:a.debit_id,status:c?0:1},function(a){if(!a.success)return site.dialog.alert(_.get(window,"rs.error","Unknown Error"));b.removeClass("fas fa-spin fa-circle-notch").addClass(c?"far fa-heart":"fas fa-heart");return!0});return!0},toggle_old:function(a){var b=a.attr("favorite-source"),
c=a.attr("favorite-target"),d=a.find("i"),e=a.attr("favorite-debit_id"),f=d.hasClass("highlight"),g=$('[favorite-source="'+b+'"][favorite-target="'+c+'"]');$ii=$('[data-toggle="dropdown-contacts-edit-'+c+'"]');if(!site.user.id)return site.utility.cookie.set("abandoned","favorite",1),site.utility.cookie.set("abandoned_id",JSON.stringify({"favorite-target":c},1)),$("#window-login").foundation("open");d.hasClass("fa-spin")||($("i",g).removeClass("fas far fa-heart highlight").addClass("fas fa-spin fa-circle-notch"),
$("i.fa-heart",$ii).removeClass("fas far fa-heart highlight").addClass("fas fa-spin fa-circle-notch"),site.request("ajax/contacts/",{action:"toggle_favorite",source_profile_id:b,target_profile_id:c,debit_id:e,status:f?0:1},function(){$("span",g).html(f?"Favorite":"Unfavorite");$("i",g).removeClass("fas fa-spin fa-circle-notch").addClass(f?"far fa-heart":"fas fa-heart highlight");$("i.fa-circle-notch",$ii).removeClass("fas fa-spin fa-circle-notch").addClass(f?"far fa-heart":"fas fa-heart highlight")}),
a.blur())}};InitObject.queue("Favorite");
var FirstTime={bin:function(){$(document).on("click","#window-first button[first-action]",function(){switch($(this).attr("first-action")){case "phone":FirstTime.hide();MyPhone.show();break;case "free":return FirstTime.hide(),amw.show();case "profile":return $(this).html('<i class="fas fa-spin fa-circle-notch"></i>Loading ...'),window.location="/members/my-profile/"}}).on("click","#window-first .close-first-window",function(){FirstTime.hide(!0)}).on("click","#window-first-free",function(){FirstTime.hide_mini()});
$(window).resize(FirstTime.hide_mini).scroll(FirstTime.hide_mini);FirstTime.bin=null},hide:function(a){$("#window-first").hide();if(a){a=$("[caller-menu='wallet'].header-button:visible").length?$("[caller-menu='wallet'].header-button"):$("#launchmobileRight");var b=$("[caller-menu='wallet'].header-button:visible").length?"bottom":"right",c=$("#window-first-free");c.removeClass().addClass(b).show().css({top:a.position().top+a.outerHeight()+5,left:"bottom"==b?a.position().left+a.outerWidth()/2-c.outerWidth()/
2:a.position().left+a.outerWidth()-c.outerWidth()});a.on("click",function(){$("#window-first-free").hide()});FirstTime.notice=setTimeout(function(){$("#window-first-free").hide()},3E3)}$("body.no-overflow").removeClass("no-overflow")},hide_mini:function(){FirstTime.notice&&clearTimeout(FirstTime.notice);$("#window-first-free").hide()},ini:function(){if($("#amw-window-first").length)return amw.show();$("#window-first").length&&("function"==typeof FirstTime.bin&&FirstTime.bin(),$("body").addClass("no-overflow"),
$("#notification:visible").hide())}};$(document).ready(FirstTime.ini);
var ProfileTab={bin:function(){$(document).off("click.ProfileTab");$(document).on("click.ProfileTab","nav.profile-section-tabs[tab-group] button[tab]",function(a){if($(this).is("[dull]"))return site.dialog.alert("I don't have any "+$(this).text()+" for sale, check back later!");ProfileTab.tab($(this).parents("[tab-group]").attr("tab-group"),$(this).attr("tab"))});$("nav.profile-section-tabs[tab-group]").each(function(a,b){return $(b).find("[tab]:not([dull])").eq(0).click()});QuickView.delay("ProfileTab")},
tab:function(a,b){$('nav.profile-section-tabs[tab-group="'+a+'"] button[tab][active]').removeAttr("active");$("div.profile-body div["+a+"-tab][active]").removeAttr("active");$('nav.profile-section-tabs[tab-group="'+a+'"] button[tab="'+b+'"]').attr("active",!0);$("div.profile-body div["+a+'-tab="'+b+'"]').attr("active",!0);Shim.sticky.on_resize()}};InitObject.queue("ProfileTab");
var ProfileMyStore={bin:function(){$(document).on("click","[product-id]",function(a){a.preventDefault();if(!site.user.id)return site.utility.cookie.set("abandoned","store",1),site.utility.cookie.set("abandoned_id",JSON.stringify({destroy_on_purchase:!1,product_id:$(this).attr("product-id"),product_type_id:$(this).attr("product-type-id"),profile_id:$(this).closest("[profile-id]").attr("profile-id")},1)),$("#window-login").foundation("open");site.wallet.initialize({destroy_on_purchase:!1,product_id:$(this).attr("product-id"),
product_type_id:$(this).attr("product-type-id"),profile_id:$(this).closest("[profile-id]").attr("profile-id")})})}};InitObject.queue("ProfileMyStore");
var Nightmode={bin:function(){$(document).on("click",".nightmode-toggle",function(){Nightmode.toggle($(this))});Nightmode.current=$("html").hasClass("nightmode");Nightmode.current&&$(".nightmode-toggle").html("Disable Nightmode");Nightmode.bin=null},toggle:function(a){Nightmode.current?($("html").removeClass("nightmode"),a.html("Enable Nightmode"),Nightmode.current=!1):($("html").addClass("nightmode"),a.html("Disable Nightmode"),Nightmode.current=!0);site.utility.cookie.set("nightmode",Nightmode.current,
1E3)},ini:function(){"function"==typeof Nightmode.bin&&Nightmode.bin()}};$(document).ready(Nightmode.ini);site.vchat={loaded:!1};var JSForm={serialize:function(a){var b=a.find(":input").serializeArray(),c=a.data("input")||{};$(b).each(function(a,b){c[b.name]=b.value});return c}},Media={open:function(a){return site.demand.bundle("site.library","library/library",function(){return site.library.initialize(a)})}};site.profile_rating={};
site.profile_rating.render=function(a,b){if(!$.isNumeric(b.rating))return!1;var c='<i class="fas fa-star"></i>'.repeat(b.rating)+(Math.floor(2*b.rating)%2?'<i class="fas fa-star-half-alt"></i>':"")+'<i class="far fa-star"></i>'.repeat(5-b.rating);$.isNumeric(b.rating_count)&&(c+=" ("+b.rating_count+")");a.html(c)};site.profile_rating.update=function(){$(".profile-rating[data-rating]").each(function(a,b){a=$(b);site.profile_rating.render(a,a.data())})};
var Resize={queued_functions:{},bin:function(){$(window).off("resize.Resize");$(window).on("resize.Resize",function(){return Resize.consume_queue()});return!0},delay:function(a){return InitObject.delay(a,"on_resize")},consume_queue:function(){return InitObject.consume_queue("on_resize")}};InitObject.queue("Resize");var Shim={is_mobile_view:function(){return"small"===_.get(window,"Foundation.MediaQuery.current","")},sticky:{}};
Shim.sticky.bin=function(){Resize.delay("Shim.sticky");QuickView.delay("Shim.sticky");Shim.sticky.check();return!0};Shim.sticky.on_resize=function(a){Shim.sticky.check();return!0};
Shim.sticky.check=function(){if(0===$("[data-sticky-container]").length||Shim.is_mobile_view())return!1;var a=$(window).innerHeight(),b=0===$("#quick-view").length?$(window):$("#quick-view");$("[data-sticky-container].overflow").removeClass("overflow");$("[data-sticky-container] [data-is_sticky]").each(function(b,d){b=$(d).data("box")||{};b.top=SiteNav.get_raw_object(d).getBoundingClientRect().top;b.height=$(d).outerHeight();b.range=$(d).parents("[data-sticky-container]").outerHeight();b.height+b.top>
a?$(d).removeClass("is-stuck").attr("data-sticky",!1).parents("[data-sticky-container]").addClass("overflow"):$(d).attr("data-sticky","").addClass("is-stuck").foundation();$(d).data("box",b)});b.off("scroll.shim-sticky");if(0===$(".is-stuck").length)return!0;b.on("scroll.shim-sticky",function(){return Shim.sticky.scroll($(this))});return!0};
Shim.sticky.scroll=function(a){var b=a.scrollTop();$("[data-sticky-container] [data-is_sticky]").each(function(a,d){a=$(d).data("box")||{};a.range-a.height+a.top<b?$(d).is(":not(.is-at-bottom)")&&$(d).addClass("is-at-bottom").addClass("is-anchored"):$(d).is(".is-at-bottom")&&$(d).removeClass("is-at-bottom").removeClass("is-anchored").addClass("is-stuck");return!0});return!0};Shim.sticky.is_in_viewport=function(a){a=SiteNav.get_raw_object(a);if(!a)return!1;$(window).innerHeight();$(window).innerWidth()};
InitObject.queue("Shim.sticky");
var SiteNav={data:{},bin:function(){$("[gallery][data-options]").off("click.SiteNav");$("[gallery][data-options]").on("click.SiteNav",function(a){return SiteNav.actions.open_gallery(SiteNav.site_options($(this)))});$("nav.paging button.label").off("click.SiteNav");$("nav.paging button.label").on("click.SiteNav",function(a){a=$("nav.paging button.label").attr("link")||"";var b=Number($("nav.paging > div.form-floating-label > input").val())||0,c=Number($("nav.paging").attr("page_count"))||1,d=-1==a.indexOf("?")?
"?":"&";if(!b)return SiteNav.warning($("nav.paging > div.form-floating-label > input"));if(b>c)return SiteNav.warning($("nav.paging > div.form-floating-label > input"),"eee");2<b&&(a+=d+"p="+b);$("nav.paging > div.form-floating-label > input").val("");return SiteNav.go(a)});$("nav.paging > div.form-floating-label > input").off("keyup.SiteNav");$("nav.paging > div.form-floating-label > input").on("keyup.SiteNav",function(a){return 13===a.which?$("nav.paging button.label").click():!0});SiteNav.floating_form();
QuickView.delay("SiteNav");$(window).resize();return!0},set_live_label:function(a,b){a=String(a);b=String(b);a=$('span[data-live-label="'+a+'"]');if(!a)return!1;a.text(b);return!0},json_options:function(a){var b=(a.attr("data-sn-options")?a.data("snOptions"):a.parents("[data-sn-options]").data("snOptions"))||{};b=$.extend(a.data(),b);b.anchor||(b.anchor=a);return b},site_options:function(a){var b=a.attr("data-options")?a.data("options"):a.parents("[data-options]").data("options")||{};b.anchor||(b.anchor=
a);return b},download:function(a){var b={base:site.url.current,external:1,link:null,target:"download_file"};!b.link&&_.get(a,"url","")&&(b.link=a.url);if(!b.link){a=SiteNav.array_constrain(a,["file_id","product_id"]);var c=[];Object.entries(a).length&&(Object.entries(a).forEach(function(a){c.push(a.join("="))}),b.link="download.php?"+c.join("&"))}return b.link?site.jslink(b):site.dialog.alert("Error Downloading File")},go:function(a){return site.jslink(a)},reload:function(){return window.location.reload()},
array_constrain:function(a,b){var c={};if(!b.length)return c;_.isString(b)&&(b=[b]);b.forEach(function(b){var d=_.get(a,b);"undefined"!==typeof d&&(c[b]=d)});return c},floating_form:function(){$(".form-floating-label").each(function(a,b){if($(this).is(".has-value")||""===$(this).find("input").val())return!0;$(this).addClass("has-value");return!0})},warning:function(a){return SiteNav.animateHighlight(a,"#FF9090")},int_range:function(a,b,c){return Math.min(Math.max(Number(a)||b,b),c)},is_jquery:function(a){return!_.isEmpty(a)&&
!!a.jquery},get_raw_object:function(a){if(!a)return!1;"function"===typeof jQuery&&a instanceof jQuery&&(a=a[0]);return a},animateHighlight:function(a,b,c){if(!(a instanceof jQuery))return!1;var d=a.css("backgroundColor")||"#FFFFFF";b=b||"#FFFF9C";c=Number(c)||1500;SiteNav.data.animateLock||(SiteNav.data.animateLock=!0,a.stop().css("background-color",b).animate({backgroundColor:d},c),setTimeout(function(){SiteNav.data.animateLock=!1},c));return!0},viewport:function(){return{height:$(window).innerHeight(),
width:$(window).innerWidth()}},iscroll_active:function(a){a.html('<i class="fas fa-spin fa-spinner"></i>').addClass("working")},iscroll:function(){$("button.iscroll.working").removeClass("working");$("button.iscroll").each(function(a,b){a=$(b).data();a.page=_.get(a,"page")||1;a.page_count=_.get(a,"page_count")||1;a.page_count<a.page?$(b).addClass("hide"):$(b).html(_.get(a,"label","More"))});return!0}};SiteNav.viewport.is_small=function(){return 640>SiteNav.viewport().width};SiteNav.live={};
SiteNav.live.bin=function(){$(window).off("click.SiteNavLive");$(window).on("click.SiteNavLive","[data-sn-action]",function(a){return SiteNav.live.launch_action($(this),a)});$(window).on("click.SiteNavLive","[data-jslink]",function(a){return SiteNav.live.js_link($(this),a)});$(window).on("click.SiteNavLive",".gallery",function(a){return SiteNav.live.open_file_picker($(this),a)});return!0};
SiteNav.live.launch_action=function(a,b){b=SiteNav.json_options(a);return InitObject.hook_string("SiteNav.actions",a.data("sn-action"),b)};SiteNav.live.js_link=function(a,b){if(a.is(".js-link-small")&&Shim.is_mobile_view())return!0;a=a.data();if("members/add-money/"===a.jslink)return _.get(site,"data.active_dialog")&&site.data.active_dialog.destroy(),AMW.launch();a.protocol||(a.protocol="current");a.target=b.ctrlKey||b.metaKey?"_blank":_.get(a,"target","");return SiteNav.go(a)};
SiteNav.live.open_file_picker=function(a,b){var c=a.data("options");if(!site.user.id)return site.utility.cookie.set("abandoned","gallery",1),site.utility.cookie.set("abandoned_id",c.profile_id,1),$("[data-open='window-login']").length?(c.profile_id||(c.profile_id=a.closest("[profile-id]").attr("profile-id")),site.ls.save("show-gallery-after-login",c.profile_id),$("[data-open='window-login']").trigger("click")):site.user.login(c);site.demand.bundle("site.gallery","library/gallery",function(){site.gallery.load(c)});
return!1};$(function(){return SiteNav.live.bin()});SiteNav.actions={};SiteNav.actions.mail_me=function(a,b){MessageComposeFragment.reset_attachments();b={connection_type:"message",profile_id:a.profile_id,profile_type_id:a.profile_type_id};2==_.get(site.vars.user,"type_id")&&(b.source_profile_id=a.source_profile_id);return FlowMaster.launch(b)};
SiteNav.actions.profile_note=function(a,b){b=_.get(window,"site.vars.user");return b.type_id?site.vars.is_talker?(a.source_user_id=b.id,a.target_profile_id=a.profile_id,a.target_profile_title=a.profile_title,site.demand.bundle("site.caller_notes","members/caller_notes",function(){return site.caller_notes.show(a)})):Notes.show(a.anchor):!1};
SiteNav.actions.iscroll=function(a){if(a.anchor.is(".working"))return!1;var b={action:a.scroller,page:_.get(a,"page")||1};switch(a.scroller){case "caller-photos":["user_id","profile_id"].forEach(function(c){a[c]&&(b[c]=a[c])});b.user_id||1!=site.vars.user.type_id||(b.user_id=site.vars.user.id);$target=$('div[tab="photos"] ul');break;case "caller-reviews":["user_id","profile_id","debit_type_id","direction","order"].forEach(function(c){a[c]&&(b[c]=a[c])});b.user_id||1!=site.vars.user.type_id||(b.user_id=
site.vars.user.id);$target=$('div[tab="reviews"] ul');break;default:return!1}SiteNav.iscroll_active(a.anchor);return site.request("ajax/caller/",b,function(c){if(!c.success)return site.dialog.alert(c.error||"Unknown Error");$target.append(c.template);c.live_label&&Object.entries(c.live_label).forEach(function(a){return SiteNav.set_live_label(a[0],a[1])});a.anchor.data("page",b.page+1);a.anchor.data("page_count",c.page_count);SiteNav.iscroll();return!0})};
SiteNav.actions.profile_toggle_favorite=function(a,b){return Favorite.toggle(a)};SiteNav.actions.message_toggle_unread_filter=function(){var a=new URLSearchParams(document.location.search),b=$('[data-sn-action="message_toggle_unread_filter"]');b.is("[active]")?(b.removeAttr("active"),a.delete("filter_type")):(b.attr("active",1),a.set("filter_type","unread"));return SiteNav.go("members/messages/?"+a.toString())};
SiteNav.actions.open_gallery=function(a){0==_.get(a,"profile_id",0)&&(a=$.extend(a,SiteNav.site_options(a.anchor)));if(0==_.get(a,"profile_id",0))return site.debug("SiteNav.actions.open_gallery No Profile",a);if(!site.user.id)return site.utility.cookie.set("abandoned","gallery",1),site.utility.cookie.set("abandoned_id",a.profile_id,1),$("[data-open='window-login']").length?(a.profile_id||(a.profile_id=a.anchor.closest("[profile-id]").attr("profile-id")),site.ls.save("show-gallery-after-login",a.profile_id),
$("[data-open='window-login']").trigger("click")):site.user.login(a);0==_.get(a,"product_type_id",0)&&(a.product_type_id=5);site.demand.bundle("site.gallery","library/gallery",function(){site.gallery.load(a)});return!1};InitObject.queue("SiteNav");
var ShowMore={bin:function(){$("button[sm-type]").prop("disabled",!0);$("button[sm-type]").each(function(){var a=parseInt($(this).attr("sm-offset"))||0;if((parseInt($(this).attr("sm-count"))||0)<=a)return!0;$(this).prop("disabled",!1).show();return!0});$("button[sm-type]").off("click.ShowMore");$("button[sm-type]").on("click.ShowMore",function(a){var b={};$.each(this.attributes,function(){this.specified&&0===this.name.indexOf("sm-")&&(b[this.name.substr(3)]=this.value)});return ShowMore.request(this,
b)});QuickView.delay("ShowMore");return!0},request:function(a,b){if(!b.profile_id||!b.type)return!1;b.action="listing";return site.request("ajax/profile/",b,function(c){$(a).attr("sm-offset",c.offset);c.count<=c.offset&&$(a).prop("disabled",!0);if(!c.template||!c.listing)return!1;var d=[];$.each(c.listing,function(){d.push(this)});c=Mustache.render(c.template,{data:d});$target=$('div[store-tab="'+b.type+'"] > ul').append(c)})}};InitObject.queue("ShowMore");site.utility.mb_strlen=function(a){return Array.from(a).length};
var FooterDiv={bin:function(){$(document).on("click","#overeighteenbtn",function(){site.request("ajax/data/",{action:"overeighteenaccepted"});$("#overeighteendiv").hide()})},ini:function(){"function"==typeof FooterDiv.bin&&FooterDiv.bin()}};InitObject.queue("FooterDiv");
var AttachVoicemail={callback:_.noop,data:{},bin:function(){$(document).on("websockets:file",AttachVoicemail.websockets);$(document).on("click",".show-attach-voicemail",function(a){a.preventDefault();AttachVoicemail.show()}).on("click","#window-attach-voicemail .close-attach-voicemail",function(a){a.preventDefault();AttachVoicemail.hide()}).on("click","#window-attach-voicemail [data-phone_id]",function(a){a.preventDefault();AttachVoicemail.record({phone_id:$(this).data("phone_id")})});AttachVoicemail.bin=
null},show:function(a,b){$("#window-attach-voicemail").length&&(0<$("#message-modal-attachments").length&&$("#message-modal-attachments").foundation("close"),AttachVoicemail.callback=a,AttachVoicemail.load(),$("body").addClass("no-overflow"),$("#window-attach-voicemail").show())},load:function(){$("#window-attach-voicemail li[active]").removeAttr("active");$("#window-attach-voicemail li[step='load']").attr("active",!0);site.request("api/v3.1/phone/",{},function(a){if(!_.get(a,"phone.success"))return alert((_.isString(a)?
a:null)||_.get(a,"phone.error")||"Sorry, you're currently unable to attach a Voicemail."),AttachVoicemail.hide();AttachVoicemail.data.phone=_.get(a,"phone");AttachVoicemail.render();$("#window-attach-voicemail li[active]").removeAttr("active");$("#window-attach-voicemail li[step='phone']").attr("active",!0)})},render:function(){$("#template-fragment-attach-voicemail-phone").html();var a=Mustache.render($("#template-fragment-attach-voicemail-phone").html(),{format:function(){return function(a,c){a=
c(a).split("-");return site.utility.format.phone(a[0],a[1])}},listing:_.where(_.values(_.get(AttachVoicemail.data,"phone.data.listing")),{phone_status_id:2}).concat(_.where(_.values(_.get(AttachVoicemail.data,"phone.data.listing")),{phone_status_id:3}))});$("#window-attach-voicemail .window-attach-voicemail-phone").html(a);$("#window-attach-voicemail button.add-phone").on("click",function(){MyPhone.show()})},record:function(a){$("#window-attach-voicemail li[active]").removeAttr("active");$("#window-attach-voicemail li[step='record']").attr("active",
!0);site.request("global/ajax/voicemail-start/",a,function(a){if(!_.get(a,"file_id"))return alert((_.isString(a)?a:null)||_.get(a,"error")||"Sorry, you're currently unable to attach a Voicemail."),AttachVoicemail.hide();AttachVoicemail.data.record=a})},hide:function(){$("#window-attach-voicemail").hide();$("body").removeClass("no-overflow")},ini:function(){"function"==typeof AttachVoicemail.bin&&AttachVoicemail.bin()},websockets:function(a,b){if(_.get(b,"file_id")==_.get(AttachVoicemail.data,"record.file_id"))switch(_.parseInt(_.get(b,
"file_audio_status_id"))){case 1:case 2:case 3:break;case 5:AttachVoicemail.callback(!0,b);AttachVoicemail.hide();break;default:AttachVoicemail.callback(!1,b),AttachVoicemail.hide()}},loaded:!1};$(document).ready(AttachVoicemail.ini);
(function(){var a={init:function(){$(document).on("click",".block_profile, [block-me]",function(b){b.preventDefault();var c=$(this),d=c.data("is_blocked")?"unblock":"block";b=c.data("is_blocked")?"Unblock":"Block";if(1==site.user.type_id)return a.request(c,d,"profile",c.data("source_profile_id")||c.attr("block-source"),c.data("target_profile_id")||c.attr("block-me")||c.attr("block-target"));site.dialog.custom({classes:"dialog-green contact-block",header_class:"hide_warning",title:b+" Option:",html:"<p><button data-type='profile' class='dialog-button-yes'>This profile only</button>\t\t\t\t\t\t<button data-type='all' class='dialog-button-yes'>All of my profiles</button>\t\t\t\t\t\t<button data-type='cancel' class='dialog-button-no'>Cancel</button></p>"});
var e=$("button[data-type=profile]").parents("section").attr("id");$("section#"+e+".dialog button").bind("click",function(b){$("section#"+e+".dialog button").unbind("click");type=$(this).data("type");if("cancel"==type)return!0;$("> div",c).removeClass("hide");$("> a",c).addClass("hide");a.request(c,d,type,c.data("source_profile_id")||c.attr("block-source"),c.data("target_profile_id")||c.attr("block-me")||c.attr("block-target"))})})},request:function(b,c,d,e,f){$('[target_profile_id="'+f+'"]').attr("date_blocked",
"1").find("span.date_blocked").text("...");site.request("global/ajax/"+c+"/",{type:d,my_id:e,other_id:f},a.response.bind(null,b,c))},response:function(b,c,d){if(d.done)switch(c){case "unblock":b.data("is_blocked",0);$("span",b).html("Block");a.set_unblocked(_.values(d.target_profile_id));break;case "block":b.data("is_blocked",1),$("span",b).html("Unblock"),a.set_blocked(_.values(d.target_profile_id),Date.now())}$("> a",b).removeClass("hide");$("> div",b).addClass("hide")},set_blocked:function(a,c){$(a).each(function(a,
b){$('[target_profile_id="'+b+'"]').attr("date_blocked",c).find("span.date_blocked").html('Blocked: <time data-livestamp="'+c+'" datetime="'+c+'"></time>')})},set_unblocked:function(a){$(a).each(function(a,b){$('[target_profile_id="'+b+'"]').attr("date_blocked","").find("span.date_blocked").text("")})}};$(document).ready(a.init);window.BlockProfile=a})(window);
(function(){var a={init:function(){$(".message-read a").on("click",a.view);a.queryCheck();$(document).on("message:compose",function(b,c){$("#message-view-modal-main").length&&a.queryCheck()});$("a.message_compose").on("click",function(){var a=$(this).data();if(!a.profile_id)return!1;site.compose.show(!1,!1,!0,a.profile_id);MessageComposeFragment.reset_attachments();return!1});$("a.profile_wizard").on("click",function(){var a=$(this).data();if(!a.profile_id)return!1;site.wizard.show(a.profile_id);
return!1})},deleteSelected:function(a){return site.request("global/ajax/message-mark/",{ids:a.join(","),v:1},function(){window.location.reload()},function(){alert("We were unable to move your messages. Please try again.")})},queryCheck:function(){urlParams=new URLSearchParams(window.location.search);urlParams.has("id")&&a.view(null,{chat_id:"chat"==urlParams.get("cur_inbox")?urlParams.get("id"):null,message_id:urlParams.get("id"),other_profile_id:urlParams.get("opid"),parent_message_id:urlParams.get("id")})},
close:function(){$(".window-compose-message").length&&MessageCompose.hide(!0);$("#message-view-modal-main").length&&a.view.destroy(!1,!0);return!0},view:function(b,c){c=c||$(this).parent().parent().data();if(_.get(c,"tid")||!_.get(c,"message_id"))return!0;b=window.location.pathname+"?cur_inbox="+$(".page-messages").data("cur_box")+"&opid="+_.get(c,"other_profile_id")+"&id="+_.get(c,"message_id");window.location.href!=b&&history.pushState("",document.title,b);a.view.destroy(!1,!0);$('.message-read[data-message_id="'+
_.get(c,"message_id")+'"]').removeClass("unread");$("#message-view-modal-loading").foundation("open");site.request("api/v3.1/action/message/read/",{"action-message-read":c},function(b){if(!_.get(b,'action-message-read["success"]'))return $("#message-view-modal-loading").foundation("close"),a.view.error(_.get(b,"action-message-read"));b["action-message-read"].data.listing=_.values(b["action-message-read"].data.listing);var c="";_.each(b["action-message-read"].data.listing,function(a,d){b["action-message-read"].data.listing[d].unlocked=
2==site.user.type_id;a.date_created_formatted||(b["action-message-read"].data.listing[d].date_created_formatted=moment(a.date_created).format("MMM Do, YYYY h:mm A"));b["action-message-read"].data.listing[d].from_avatar=b["action-message-read"].data.listing[d].from_avatar||site.url.current+"images/_default_avatar.png";b["action-message-read"].data.listing[d].to_avatar=b["action-message-read"].data.listing[d].to_avatar||site.url.current+"images/_default_avatar.png";b["action-message-read"].data.listing[d].to_read_moment=
"";b["action-message-read"].data.listing[d].to_read&&(b["action-message-read"].data.listing[d].to_read_moment=moment(b["action-message-read"].data.listing[d].to_read).fromNow());var e=0+(a.attached_files?_.toString(a.attached_files).split(",").length:0);e+=a.attached_products?_.toString(a.attached_products).split(",").length:0;b["action-message-read"].data.listing[d].attachment_length=e;b["action-message-read"].data.listing[d].unlocked||(b["action-message-read"].data.listing[d].unlocked=!(1==site.user.type_id&&
a.from_user_id!=site.user.id&&!a.to_read&&a.price));_.get(a,"file.listing")&&(b["action-message-read"].data.listing[d].file.listing=_.values(a.file.listing));c||(c=_.get(a,"subject"));1==site.user.type_id&&1==a.from_profile_type&&(b["action-message-read"].data.listing[d].from_url_https=site.url.current+"members/my-profile/")});var d=_.last(_.get(b["action-message-read"].data,"listing"));a.view.data=_.merge(b["action-message-read"].data,{parent_message_id:_.get(d,"parent_message_id")||_.get(d,"message_id"),
my_profile_id:site.user.id==_.get(d,"from_user_id")?_.get(d,"from_id"):_.get(d,"to_id"),my_profile_avatar:(site.user.id==_.get(d,"from_user_id")?_.get(d,"from_avatar"):_.get(d,"to_avatar"))||site.url.current+"images/_default_avatar.png",other_profile_id:site.user.id!=_.get(d,"from_user_id")?_.get(d,"from_id"):_.get(d,"to_id"),other_user_id:site.user.id!=_.get(d,"from_user_id")?_.get(d,"from_user_id"):_.get(d,"to_user_id"),subject:c,is_talker:site.vars.is_talker});a.view.build(a.view.data);MessageComposeFragment.reset_attachments();
$("#message-view-modal-main").addClass("active").removeClass("hide")},a.view.error)}};a.view.build=function(b){a.view.destroy(!1,!0);a.view.render(b);a.view.events();a.view.show()};a.view.destroy=function(b,c){b=!!b;if(!0!==!!c&&MessageCompose.has_user_input)return site.dialog.confirm("Are you sure you want to cancel sending this message?",function(c){c&&(MessageCompose.has_user_input=!1,a.view.destroy(b,!0))});!1!==b&&window.location.href!=window.location.pathname&&history.pushState("",document.title,
window.location.pathname);a.view.hide();return!0};a.view.error=function(b){a.view.destroy(!1,!0);$("#message-view-modal-loading").foundation("close");if("message_invalid_theater"===b["error-code"])return!1;alert((_.isString(b)?b:null)||_.get(b,"error")||"Sorry, you're currently unable to open this message.");return!1};a.view.events=function(){MessageCompose.has_user_input=!1;$("#message-view-modal-subject .close").on("click",a.view.destroy);$(".view-message-unlock .button").on("click",a.view.unlock)};
a.view.hide=function(){$("#message-view-modal").foundation("close");return!0};a.view.unlock=function(b,c){c=c||$(this).data();confirm("Are you sure you want unlock this message?")&&($('#message-view-modal-main li[data-message_id="'+c.message_id+'"] .view-message-unlock-main').removeClass("active").addClass("hide"),$('#message-view-modal-main li[data-message_id="'+c.message_id+'"] .view-message-unlock-loading').removeClass("hide").addClass("active"),site.request("api/v3.1/action/message/unlock/",{"action-message-unlock":c},
function(b){if(!_.get(b,'action-message-unlock["success"]'))return a.view.unlock.error(_.get(b,"action-message-unlock"));_.each(a.view.data.listing,function(c,d){if(c.message_id==b["action-message-unlock"].data.message_id)return c.unlocked=!0,a.view.data.listing[d]=_.merge(c,b["action-message-unlock"].data),!1});a.view.build(a.view.data);$("#message-view-modal-loading").removeClass("active").addClass("hide");$("#message-view-modal-main").removeClass("hide").addClass("active")},a.view.unlock.error))};
a.view.unlock.error=function(a){$('#message-view-modal-main li[data-message_id="'+a.message_id+'"] .view-message-unlock-loading').removeClass("active").addClass("hide");$('#message-view-modal-main li[data-message_id="'+a.message_id+'"] .view-message-unlock-main').removeClass("hide").addClass("active");alert((_.isString(a)?a:null)||_.get(a,"error")||"Sorry, we were unable to unlock this message.");return!1};a.view.render=function(a){a=a||{};a.is_hotchat=site.vars.is_hotchat;_.get(a,"listing")&&_.each(a.listing,
function(b,d){a.listing[d].file&&(a.listing[d].file.listing=_.values(_.get(b,"file.listing")));a.listing[d].price=utility.format.money(a.listing[d].price);a.listing[d].bonus_price&&(a.listing[d].bonus_price=utility.format.money(a.listing[d].bonus_price),a.listing[d].bonus_commission=utility.format.money(a.listing[d].bonus_commission))});message_modal_open=!0;$("#message-view-modal").html(Mustache.render($("#template-message-window").html(),a)).foundation("open");$("#message-view-modal-loading").foundation("close");
600>$("#message-view-modal-main").height()&&$("#message-view-modal-reply textarea").css({height:"50px"});$(".message-modal-attachments").foundation();return!0};a.view.scroll=function(b,c){b=void 0===b?0:b;0<$("#message-view-modal-listing .block_profile").length&&0<$("#message-view-modal-listing .block_profile").offset().top?($listing=$("#message-view-modal-listing"),$listingul=$("#message-view-modal-listing ul"),$listing.height()>$listingul.height()+90?$("#message-view-modal-listing").addClass("shrink").removeClass("auto"):
1<$("#message-view-modal-listing > ul > li").length&&($scrollto=$("#message-view-modal-listing > ul > li:last-of-type").offset().top,$listing.scrollTop($scrollto))):(b+=1,5>b&&setTimeout(a.view.scroll,200,b))};a.view.show=function(){a.view.scroll();return!0};$(document).ready(a.init);window.Message=a})(window);
(function(){var a={init:function(){$(document).on("click","#message-modal-attachments .attach-photo",a.attach.photo);$(document).on("click","#message-modal-attachments .attach-voicemail",AttachVoicemail.show.bind(null,a.attach.voicemail));$(document).on("click",".view-message-reply-attachments .close",a.detach);$(document).on("click","#message-view-modal-reply .send",a.send);$(document).on("click","#message-modal-attachments .attach-video",a.attach.video);$(document).on("click","#message-modal-attachments .attach-product",
a.attach.product);$(document).on("click","#message-view-modal-reply .view-message-reply-attachments .unattach",function(){var b=$(this).parents("li").data();delete a.attachments[b.type][b.file_id];a.attach.render()});a.reset_attachments()},reset_attachments:function(){a.attachments={photo:{},voicemail:{},product:{},video:{}}},attach:function(a,c){var b=a.html();a.attr("disabled",!0).html('<i class="fas fa-spin fa-circle-notch fa-fw"></i>Loading');site.demand.bundle("site.library","library/library",
function(){$("#window_fade").removeClass("attach-loading");site.library&&(site.library.queued=null);site.library.load(c);setTimeout(function(){a.removeAttr("disabled").html(b)},1E3)})}};a.attach.photo=function(){$("#message-modal-attachments").foundation("close");return a.attach($(this),{action:"get",type:"attachment",callback:a.attach.photo.callback})};a.attach.voicemailmodal=function(){$("#message-modal-attachments").foundation("close");return AttachVoicemail.show.bind(null,a.attach.voicemail)};
a.attach.photo.callback=function(b){_.each(_.get(b,"photos"),function(b,d){b=b.replace(/"/g,"");a.attachments.photo[d]={file_id:d,title:"Photo-"+d,url:b}});return a.attach.render()};a.attach.video=function(){$("#message-modal-attachments").foundation("close");return a.attach($(this),{action:"get",type:"videos",upload_disabled:1,callback:a.attach.video.callback})};a.attach.video.callback=function(b){if(!b.file_id)return!1;a.attachments.video[b.file_id]={file_id:b.file_id,title:"Video-"+b.file_id,url:b.url_https_dehashed};
return a.attach.render()};a.attach.product=function(){$("#message-modal-attachments").foundation("close");return a.attach($(this),{action:"get",type:"products",upload_disabled:1,callback:a.attach.product.callback})};a.attach.product.callback=function(b){_.each(_.get(b,"documents"),function(b,d){a.attachments.product[d]={file_id:d,title:"Document-"+d,url:"https://stg.talktome.com/images/icon_48_docs.png"}});_.each(_.get(b,"stories"),function(b,d){a.attachments.product[d]={file_id:d,title:"Story-"+
d,url:"https://stg.talktome.com/images/icon_48_audio.png"}});return a.attach.render()};a.attach.render=function(){var b=0;_.each(a.attachments,function(a){b+=_.values(a).length});var c=Mustache.render($("#template-message-compose-attachments").html(),{attachment_count:b,attachments:{photo:_.values(a.attachments.photo),product:_.values(a.attachments.product),video:_.values(a.attachments.video),voicemail:_.values(a.attachments.voicemail)}});$("#message-view-modal-reply .view-message-reply-attachments").html(c)};
a.attach.voicemail=function(b,c){if(!b)return alert("Sorry, we're unable to attach your Voicemail.");b=_.get(c,"file_id");a.attachments.voicemail[b]={file_id:b,url:site.url.current+"images/icon_16_voicemail.png"};a.attach.render()};a.detach=function(){var b=$(this).parent().data("file_id"),c=$(this).parent().data("type");_.get(a.attachments,"["+c+"]["+b+"]")&&(delete a.attachments[c][b],a.attach.render())};a.send=function(b){if(!_.get(site.vars.user,"type_id"))return!1;var c=$(this),d=$("#message-view-modal-reply"),
e=c.html(),f={attachments:a.send.attachments(d).join(","),from_profile_id:$(".message-window-from").data("profile_id"),message:$("#message-view-modal-reply-textarea textarea").val(),parent_id:d.data("parent_id"),price:null,subject:$(".message-window-subject").val(),to_profile_id:d.data("to_profile_id"),bonus_amount:d.find(".bonus").data("amount"),bonus_psid:d.find(".bonus").data("psid")};b=_.pick(_.merge(_.clone(f),b),_.keys(f));b.from_profile_id||(b.from_profile_id=f.from_profile_id);if(!b.to_profile_id)return alert("Please select someone to send your message to!");
if(!b.message&&!b.attachments)return alert("Your message cannot be empty!");a.send_element=c;a.send_parent=d;a.send_input=b;a.send_text=e;if(!b.message)return site.dialog.confirm("Hey, this message does not have any text. Did you intend to send an attachment only message?",a.send.confirmed),!1;a.send.confirmed(1)};a.send.confirmed=function(b){$element=a.send_element;$parent=a.send_parent;$input=a.send_input;$text=a.send_text;if(!b)return!1;b=_.get(site.vars.user,"type_id");$element.prop("disabled",
!0).css({opacity:.5}).html("Please wait ...");$("nav button",$parent).prop("disabled",!0).css({opacity:.5});$("textarea",$parent).prop("disabled",!0).css({opacity:.5});$(".message-window-subject, .message-window-to").prop("disabled",!0);$("a.bonus",$parent).attr("disabled",!0).css("opacity",1);return 1==b?a.send.caller_type($input,$element,$text):a.send.talker_type($input,$element,$text)};a.send.caller_type=function(b,c,d){b.bonus_amount||(b.bonus_amount=0,b.bonus_psid=0);return site.request("global/ajax/compose-price-load-json/",
{from:b.from_profile_id,to:b.to_profile_id,attachments:b.attachments,bonus_amount:b.bonus_amount},function(e){if(!_.get(e,"success"))return a.send.error(c,d,e);var f=function(){site.request("global/ajax/message-send/",b,function(b){if(!_.get(b,"success"))return a.send.error(c,d,b);setTimeout(function(){a.send.done(c,d);site.dialog.success("Your message was sent successfully.");MessageCompose.hide(!0);$(document).trigger("message:compose",_.get(b,"data"))},1E3)},a.send.error.bind(null,c,d))};0<parseFloat(e.data.price)?
site.dialog.confirm("It will cost you $"+e.data.price+" to send this message. Are you sure you want to send this message?",function(b){b?f():a.send.done(c,d)}):f()},a.send.error.bind(null,c,d))};a.send.talker_type=function(b,c,d){return site.request("global/ajax/compose-price-load-json/",{from:b.from_profile_id,to:b.to_profile_id},function(e){if(e.error)return site.dialog.alert(e.error,function(){return Message.close()});if(site.vars.is_hotchat)return b.price=e.data.message_price_default,site.request("global/ajax/message-send/",
b,function(a){return _.get(a,"success")?site.dialog.success("Message Sent Successfully!",function(){return Message.close()}):site.dialog.alert(_.get(a,"error")||"A unknown error has occurred. Please try again.",Message.close)});var f=0<$("#message-view-modal-reply .view-message-reply-attachments ul li").length?$("#message-view-modal-reply .view-message-reply-attachments ul li").length:$("div.compose_box ul.attachments li").length;f=0<f?parseFloat(f*parseFloat(site.data_get("message_voicemail_price_max_limit")).toFixed(2)):
parseFloat(site.data_get("message_price_max_limit").toFixed(2));e.data.commission=site.data_get("message_commission");e.data.max=f;site.dialog.custom({title:"Message Price",header_class:"hide_warning",classes:"dialog-theater large",html:"<h3>Message Price</h3><p>How much do you want the receiver to be charged for opening this message?</p><select name='options'><option value='.25'>$0.25 - Default</option><option value='0'>$0.00 - Free</option><option value='custom'>Custom Price</option></select><div class='ProfileCommission' data-rate='"+
e.data.commission+"' data-max='"+e.data.max+"'><input type='text' name='price' value='.25' style='display:none' /><span class='commission"+site.utility.hide_you_earn(!1)+"'>You Earn<b></b></span></div><div>Maximum Price: $"+site.utility.format.money(e.data.max)+"</div><div class='dialog-buttons'><button class='button button-common dialog-button-action'>Set Price</button><button class='button button-common dialog-button-no'>Cancel</button></div>"},function(e,f){if(!e)return a.send.done(c,d);b.price=
f.price;return site.request("global/ajax/message-send/",b,function(a){return _.get(a,"success")?site.dialog.success("Message Sent Successfully!",function(){return Message.close()}):site.dialog.alert(_.get(a,"error")||"A unknown error has occurred. Please try again.",Message.close)})},function(a){return JSForm.serialize($("div.dialog-content"))},function(){$('div.dialog-content select[name="options"]').on("change",function(a){a=$(a.target).val();"custom"==a?$('div.dialog-content input[name="price"]').show().val(".25").focus():
$('div.dialog-content input[name="price"]').val(a);return InitObject.hook_string("ProfileCommission","trigger",$('.ProfileCommission input[name="price"]'))});$('div.dialog-content input[name="price"]').on("keyup",function(a){var b=$(a.target).val(),c=$("div.ProfileCommission").data("max");b>c&&$(a.target).val(c);return!0});return InitObject.hook_string("ProfileCommission","trigger",$('.ProfileCommission input[name="price"]'))})},a.send.error.bind(null,c,d))};a.send.done=function(a,c){$(".message-window-subject, .message-window-to").removeProp("disabled");
a.removeProp("disabled").css({opacity:1}).html(c);$parent=a.parent().parent().parent();$("nav button",$parent).removeProp("disabled").css({opacity:1});$("textarea",$parent).removeProp("disabled").css({opacity:1});$(".bonus",$parent).removeAttr("disabled")};a.send.error=function(b,c,d){_.get(d,"error");site.dialog.alert(_.get(d,"error")||"We were unable to send your message.");a.send.done(b,c)};a.send.attachments=function(a){var b=[];$(".view-message-reply-attachments ul li",a).each(function(){b.push($(this).data("type")+
"_"+$(this).data("file_id"))});return b};$(document).ready(a.init);window.MessageComposeFragment=a})(window);
var LoadingIndicator={bin:function(){$(window).on("beforeunload",function(){LoadingIndicator.go()});LoadingIndicator.bin=null},go:function(){$("#loading_indicator").hide().show("drop",{direction:"left"});$("#loading_indicator > div").css({width:0}).animate({width:"100%"},4500)},done:function(){$("#loading_indicator > div").stop().css({width:"100%"});$("#loading_indicator").hide("drop",{direction:"right"},700)},ini:function(){"function"==typeof LoadingIndicator.bin&&LoadingIndicator.bin()}};$(document).ready(LoadingIndicator.ini);
var ForgotHelper={bin:function(){$(document).on("submit","#window-forgot form.forgot-form",function(a){a.preventDefault();ForgotHelper.start($(this))}).on("submit","#window-forgot form.forgot-update-form",function(a){a.preventDefault();ForgotHelper.update($(this))});ForgotHelper.bin=null},update:function(a){var b=a.find("[name='password']").val().trim(),c=a.find("[name='password2']").val().trim(),d=a.find("button.update-password");if(b&&c){if(b!==c)return alert("Your password and confirm password do not match. Try again.");
d.data("ohtml",d.html()).attr("disabled",!0).html('<i class="fas fa-fw fa-spin fa-circle-notch"></i> Saving ...');a.find("input").attr("disabled",!0);a.blur();site.request("forgot-password/",{password:b,responsive:!0},function(b){a.find("input").removeAttr("disabled");d.removeAttr("disabled").html(d.data("ohtml"));if(b.error)return alert(b.error);b.done&&($("#window-forgot .close-button").trigger("click"),window.location=window.location.pathname,b.success+=". Please wait while the page reloads and you are logged in.");
b.success&&site.dialog.alert({title:"Password Recovery",message:b.success,classes:"dialog dialog-green"})})}},start:function(a){var b=a.find('[name="username"]').val().trim(),c=a.find("button.reset-password");b&&(c.data("ohtml",c.html()).attr("disabled",!0).html('<i class="fas fa-fw fa-spin fa-circle-notch"></i> Checking ...'),a.find("input").attr("disabled",!0),site.request("forgot-password/",{username:b,responsive:!0},function(b){a.find("input").removeAttr("disabled");c.removeAttr("disabled").html(c.data("ohtml"));
if(b.error)return alert(b.error);if(b.success)return $("#window-forgot .close-button").trigger("click"),site.dialog.alert({title:"Password Recovery",message:b.success,classes:"dialog dialog-green"})}))},ini:function(){"function"==typeof ForgotHelper.bin&&ForgotHelper.bin()}};$(document).ready(ForgotHelper.ini);
var TextChat={bin:function(){$(document).on("click",".chat-listing",function(){TextChat.showlist($(this).data("profile_id"))});$(document).on("click",".chat-profile-listing",function(){TextChat.showprofilelist()});$(document).on("click",".chat-open-detail",function(){TextChat.showdetail($(this).data("profile_id"),$(this).data("other_profile_id"))});$(document).on("click","#textchat-back-show-list",function(){TextChat.showlist($(this).data("profile_id"))});$(document).on("click","#textchat-back-show-profile-list",
function(){TextChat.showprofilelist()});$(document).on("click",".chat-open-list",function(){TextChat.showlist($(this).data("profile_id"))});$(document).on("click",".textchat-close",function(){TextChat.close()});$(document).on("click","#chat-view-modal-reply .send",TextChat.send)},ini:function(){"function"==typeof TextChat.bin&&TextChat.bin()},send:function(){message=$("#chat-view-modal-reply-textarea textarea").val();my_profile=$("#chat-view-modal-reply").data("from_profile_id");to_profile=$("#chat-view-modal-reply").data("to_profile_id");
site.request("ajax/textchat/",{action:"chat-send",profile_id:my_profile,other_profile_id:to_profile,message:message},function(a){a.success&&$("#chat-view-modal-reply-textarea textarea").val("");console.log(a)})},showprofilelist:function(){$("#chat-view-profile-list-modal-loading").foundation("open");site.request("ajax/textchat/",{action:"chat-profilelist"},function(a){a=_.merge(a,{});$("#chat-view-profile-list-modal").html(Mustache.render($("#template-chat-profile-list-window").html(),a)).foundation("open");
$("#chat-view-profile-list-modal-loading").foundation("close")})},showlist:function(a){$("#chat-view-list-modal-loading").foundation("open");site.request("ajax/textchat/",{action:"chat-list",profile_id:a},function(b){b=_.merge(b,{my_profile_id:a});$("#chat-view-list-modal").html(Mustache.render($("#template-chat-list-window").html(),b)).foundation("open");$("#chat-view-list-modal-loading").foundation("close")})},showdetail:function(a,b){$("#chat-view-modal-loading").foundation("open");site.request("ajax/textchat/",
{action:"chat-detail",profile_id:a,other_profile_id:b},function(c){my_profile_title=c.listing[0].profile_title;other_profile_title=c.listing[0].other_profile_title;c=_.merge(c,{phone_number:c.listing[0].phone_number,my_profile_id:a,other_profile_id:b,profile_title:my_profile_title,other_profile_title:other_profile_title});$("#chat-view-modal").foundation("open");$("#chat-view-modal").html(Mustache.render($("#template-chat-window").html(),c)).foundation("open");$("#chat-view-modal-loading").foundation("close");
$listing=$("#chat-view-scroll");$scrollto=$("#chat-view-scroll > ul > li:last-of-type").offset().top;$listing.scrollTop($scrollto);site.chatstaydown=new ChatStayDown({target:document.getElementById("chat-view-scroll")});TextChat.notificationremove()})},close:function(){"block"==$("#chat-view-modal").css("display")&&$("#chat-view-modal").foundation("close");"block"==$("#chat-view-list-modal").css("display")&&$("#chat-view-list-modal").foundation("close");"block"==$("#chat-view-profile-list-modal").css("display")&&
$("#chat-view-profile-list-modal").foundation("close");"block"==$("#chat-view-modal-loading").css("display")&&$("#chat-view-modal-loading").foundation("close");"block"==$("#chat-view-list-modal-loading").css("display")&&$("#chat-view-list-modal-loading").foundation("close");"block"==$("#chat-view-profile-list-modal-loading").css("display")&&$("#chat-view-profile-list-modal-loading").foundation("close")},notificationremove:function(){var a=$('div[data-chat="chat-notification"]');if(!a.length)return!1;
a.remove()}};$(document).ready(TextChat.ini);
function ChatStayDown(a){a=a||{};this.target=a.target;this.interval=a.interval|1E3;this.max=a.max||0;this.callback=a.callback;this.userScroll=!0;this.spinner=a.spinner;this.spin_img=new Image;this.stickyHeight=a.stickyHeight||10;this.spinner&&(this.spin_img.src=this.spinner);var b=this;this.intend_down=!0;this.emit("lock");window.addEventListener("resize",function(a){b.emit("windowresize");b.checkdown()});this.target.addEventListener("scroll",function(a){b.userScroll&&(b.intend_down&&!b.isdown()?
(b.intend_down=!1,b.emit("release")):!b.intend_down&&b.isdown()&&(b.intend_down=!0,b.emit("lock")));b.userScroll=!0});if(window.MutationObserver)this.mo=new MutationObserver(function(a){var c,d,g;b.userScroll=!1;b.checkdown();for(c=0;c<a.length;c++){var h=a[c];for(d=0;d<h.addedNodes.length;d++)if(h.addedNodes[d].getElementsByTagName){var k=h.addedNodes[d].getElementsByTagName("img");var m=0;for(g=k.length;m<g;m++){var l=k[m];if(!l.complete){var p=l.parentNode;if(b.spinner){var n=b.spin_img.cloneNode();
p.replaceChild(n,l)}var q=function(a){n&&p.replaceChild(l,n);b.emit("imageload");b.checkdown();a.target.removeEventListener("load",q)};l.addEventListener("load",q)}}}}}),this.mo.observe(this.target,{attributes:!0,childList:!0,characterData:!0,subtree:!0});else{var c=function(){b.checkdown();window.setTimeout(c,b.interval)};c()}}
(function(){this.isdown=function(){return this.target.scrollHeight-this.target.scrollTop-this.target.clientHeight<this.stickyHeight};this.append=function(a){this.emit("append");this.target.appendChild(a);this.intend_down&&(this.target.scrollTop=this.target.scrollHeight,this.emit("scrolldown"));for(;0!==this.max&&this.target.children.length>this.max;)this.target.removeChild(this.target.children[0]),this.emit("removechild")};this.emit=function(a,b){"function"===typeof this.callback&&this.callback(a,
b)};this.checkdown=function(){var a=this.target.scrollHeight-this.target.scrollTop-this.target.clientHeight;if(this.intend_down||a<this.stickyHeight)this.target.scrollTop=this.target.scrollHeight,this.userScroll=!1,this.emit("scrolldown")}}).call(ChatStayDown.prototype);

}catch(exception){throw new Error(exception)}